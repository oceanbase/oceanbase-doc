| description ||
|---|---|
| keywords ||
| dir-name ||
| dir-name-en ||
| tenant-type ||

# Overview

OceanBase Database allows you to upgrade a cluster by using an upgrade script. The upgrade on the server side has no impact on applications and can be performed without suspending data write or services. OceanBase Database is upgraded zone by zone. During the upgrade, the leader role is switched from one zone to another, and the services running in the zone to be upgraded are migrated to other zones.

This topic describes the upgrade process, considerations, restrictions, and impact.

<main id="notice" type='notice'>
  <h4>Notice</h4>
  <p>You can upgrade an OceanBase cluster of V4.3.0 Beta to V4.3.1 Beta. At present, you cannot upgrade an OceanBase cluster of V4.2.x or earlier to V4.3.1 Beta. As the version evolves, upgrades from V4.2.x to V4.3.x will be supported. </p>
</main>

## Upgrade process

The upgrade script depends only on the Python script related to the RPM package of the target version. To be specific, if the target version is V4.1.0 or later, only one upgrade process exists and only the RPM package of the target version is required. After the RPM package of OceanBase Database is decompressed, you can obtain the `oceanbase_upgrade_dep.yml` file, which records the upgrade topology of OceanBase Database.

For more information about how to check the upgrade process, see **Step 2: Confirm the upgrade process** in [Upgrade an OceanBase cluster](300.start-upgrade.md).

## Considerations

When you upgrade an OceanBase cluster, note that:

* If the `ADD SERVER` or `DELETE SERVER` operation needs to be performed during the upgrade, contact OceanBase Technical Support.
* Transition versions cannot be directly upgraded, but need to be upgraded by following the upgrade path.
* To execute the upgrade script, you must connect to RootService in the sys tenant directly instead of by using an OceanBase Database Proxy (ODP).
* The following parameters may be modified during the upgrade. Therefore, back up these parameters before the upgrade.

   * [server_permanent_offline_time](../../../../../700.reference/800.configuration-items-and-system-variables/100.system-configuration-items/300.cluster-level-configuration-items/20300.server_permanent_offline_time.md)
   * [enable_rebalance](../../../../../700.reference/800.configuration-items-and-system-variables/100.system-configuration-items/400.tenant-level-configuration-items/2800.enable_rebalance.md)
   * [enable_rereplication](../../../../../700.reference/800.configuration-items-and-system-variables/100.system-configuration-items/300.cluster-level-configuration-items/8000.enable_rereplication.md)

* Starting from V4.3.0 Beta, OceanBase Database no longer supports the zlib_1.0 compression algorithm. Observe the following rules during an upgrade:

   * The `zlib` compression algorithm is no longer supported for the `log_transport_compress_func` parameter. Use another compression algorithm instead.
   * If the `zlib` compression algorithm is used for any tables, replace it with another supported compression algorithm or disable compression during the upgrade.
   * The `zlib` compression algorithm is not supported for TableAPI. You can specify another compression algorithm for TableAPI by using the `table_api_transport_compress_func` parameter.

## Limitations

Pay attention to the following limitations when you upgrade an OceanBase cluster:

* DDL is disabled in some phases of the upgrade and is automatically enabled after the upgrade.
* Major freezes are disabled during the upgrade between some versions and are automatically enabled after the upgrade.
* Migration, replication, and load balancing are disabled during the upgrade between some versions.
* During the upgrade of a cluster, physical baseline backup and physical recovery are not allowed, but log archiving is not interrupted.

    <main id="notice" type='notice'>
      <h4>Notice</h4>
      <p>During the upgrade of OceanBase Database from V4.0 to V4.1, log archiving is interrupted. </p>
    </main>

* Switchover and failover are not allowed during the upgrade.
* Tenant creation is not allowed.

<main id="notice" type='notice'>
  <h4>Notice</h4>
  <p>If the OceanBase cluster is associated with the arbitration service, you must upgrade the arbitration service before you upgrade the OceanBase cluster. For more information about how to upgrade the arbitration service, see <a href="200.arbitration-services-version-upgrade.md">Upgrade an arbitration service</a>. </br>You can query the <a href="../../../../../700.reference/700.system-views/300.system-view-of-sys-tenant/200.dictionary-view-of-sys-tenant/15700.o-dba_ob_arbitration_service-of-sys-tenant.md">oceanbase.DBA_OB_ARBITRATION_SERVICE</a> view of the sys tenant to check whether the current OceanBase cluster is associated with the arbitration service. </p>
</main>

## Upgrade impact

Pay attention to the following impact when you upgrade an OceanBase cluster:

* The leader role is switched from one zone to another during the upgrade, which increases the response time (RT) a little bit.

* The leader-follower switchover during the upgrade can affect your business. Transactions that exceed 100 ms are terminated.

## What to do next

[Upgrade an OceanBase cluster](300.start-upgrade.md)

## References

For more information about how to upgrade an OceanBase cluster by using OceanBase Cloud Platform (OCP), see [Upgrade an OceanBase cluster](https://en.oceanbase.com/docs/common-ocp-10000000001187432).