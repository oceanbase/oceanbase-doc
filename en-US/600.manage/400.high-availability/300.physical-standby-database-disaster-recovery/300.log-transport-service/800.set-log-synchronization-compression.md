|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# Specify log compression

During log synchronization for a standby tenant, you can enable compression to reduce the bandwidth used for log transfer.

## Procedure

1. Log on as the administrator to the standby tenant or the `sys` tenant of the cluster where the standby tenant resides.

2. Enable log compression.

   The tenant-level parameter `log_transport_compress_all` specifies whether to enable compression for log transfer. The default value is `False`, which specifies not to enable compression for log transfer. For more information about the `log_transport_compress_all` parameter, see [log_transport_compress_all](../../../../700.reference/800.configuration-items-and-system-variables/100.system-configuration-items/400.tenant-level-configuration-items/4900.log_transport_compress_all.md).

   The SQL syntax is as follows:

   ```sql
   ALTER SYSTEM SET log_transport_compress_all = value [TENANT [=] tenant_name];
   ```

   where:

   * `SET` is optional in MySQL mode.
   * `value` indicates the modified value of the parameter.
   * `TENANT [=] tenant_name` indicates the name of the tenant. You use this parameter to specify the name of the tenant only when you execute the statement in the `sys` tenant.

   Execute the following statement in the `sys` tenant to enable log compression for the specified standby tenant:

   ```sql
   ALTER SYSTEM SET log_transport_compress_all = True TENANT = standby_tenant;
   ```

   Execute the following statement in a standby tenant to enable log compression for the standby tenant:

   :::tab
   tab MySQL mode

   The statement for enabling log compression for a MySQL tenant is as follows:

   ```sql
   ALTER SYSTEM SET log_transport_compress_all = True;
   ```

   tab Oracle mode

   The statement for enabling log compression for an Oracle tenant is as follows:

   ```sql
   ALTER SYSTEM SET log_transport_compress_all = 'True';
   ```

   :::

   After you enable log compression, the system compresses logs based on the lz4_1.0 algorithm by default.

3. (Optional) Change the compression algorithm by modifying the `log_transport_compress_func` parameter.

   The tenant-level parameter `log_transport_compress_func` specifies the compression algorithm used for log transfer. Supported compression algorithms are lz4_1.0, zstd_1.0, and zstd_1.3.8. By default, the lz4_1.0 algorithm is used. For more information about the `log_transport_compress_func` parameter, see [log_transport_compress_func](../../../../700.reference/800.configuration-items-and-system-variables/100.system-configuration-items/400.tenant-level-configuration-items/5000.log_transport_compress_func.md).

   The SQL syntax is as follows:

   ```sql
   ALTER SYSTEM SET log_transport_compress_func = 'value' [TENANT [=] tenant_name];
   ```

   where:

   * `SET` is optional in MySQL mode.
   * `value` indicates the modified value of the parameter.
   * `TENANT [=] tenant_name` indicates the name of the tenant. You use this parameter to specify the name of the tenant only when you execute the statement in the `sys` tenant.

   Execute the following statement in the `sys` tenant to change the compression algorithm for the specified standby tenant:

   ```sql
   ALTER SYSTEM SET log_transport_compress_func = 'zstd_1.0' TENANT = standby_tenant;
   ```

   Execute the following statement in a standby tenant to change the compression algorithm for the standby tenant:

   ```sql
   ALTER SYSTEM SET log_transport_compress_func = 'zstd_1.0';
   ```

## References

* [View cluster parameters](../../../100.cluster-management/300.common-cluster-operations/1200.view-cluster-parameters.md)

* [Modify cluster parameters](../../../100.cluster-management/300.common-cluster-operations/1300.modify-cluster-parameters.md)