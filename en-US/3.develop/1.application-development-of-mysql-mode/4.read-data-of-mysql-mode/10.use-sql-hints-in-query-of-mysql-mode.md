# Use SQL hints in queries

When you use OceanBase Database for the first time, you may use large tables to test queries. You can use SQL hints in SQL queries to control parameter settings. For example, you can specify the consistency level and SQL query timeout period. 

## Overview of SQL hints

Execution plans involve the table join method, query conditions, and table indexes and affect the SQL statement execution performance of OceanBase Database. This is the internal logic of the SQL engine of OceanBase Database. You can add hint comments to SQL statements to change execution plans and thereby improve the SQL statement execution performance. 

A statement can contain only one hint comment, and this comment must follow the `SELECT`, `UPDATE`, `INSERT`, `REPLACE`, or `DELETE` keyword. 

Syntax for hints in statement comments:

```sql
{DELETE|INSERT|SELECT|UPDATE|REPLACE} /*+ [hint_text]... */
```

General SQL hints include:

* `READ_CONSISTENCY` hint: specifies the consistency level for reading tables. If `WEAK` is specified, the related SQL statement reads tables in weak mode. If `STRONG` is specified, the related SQL statement reads tables in strong mode. 

   > **Note**
   >
   > `READ_CONSISTENCY` hint: specifies the consistency level for the current query. For complete read/write splitting, routing and other parameters must be specified. The read/write splitting feature of OceanBase Database depends on the logical data center (LDC) feature of OBProxy. If you want to use the read/write splitting feature, we recommend that you configure the LDC first. For more information about read/write splitting, see [Read/write splitting](../../../3.user-guide/5.database-connection-and-routing/7.route-management/4.odp-routing-policy/1.read-write-splitting-1.md). 

* `INDEX` hint: instructs the optimizer to use an index scan for the specified table. 

* `QUERY_TIMEOUT` hint: instructs the server to set the execution timeout period for an SQL statement, in us. 

For more information about other general SQL hints, see [Comments](../../6.sql-syntax/2.common-tenant-mysql-mode/1.basic-elements/7.annotation.md). 

## Example of using SQL hints

SQL hints are frequently used with SQL statements and are not limited to use with SQL queries. The following code shows the syntax for an SQL query that uses hints:

```sql
SELECT /*+ hint_text [, hint_text] */ select_items FROM table_name;
```

> **Note**
>
> * You can use multiple SQL hints in a statement. Make sure that the features do not conflict with each other. 
> * By default, in the CLI environment of OBClient, the comment syntax is ignored, and SQL hints do not work. In this case, you must add the `-c` parameter when you start OBClient.

### Specify the consistency level for an SQL statement to read tables to WEAK

```sql
obclient> SELECT /*+ READ_CONSISTENCY(WEAK) */ *
    FROM employees
    WHERE employees.department_id = 1001;
Query OK, 0 row affected
```

### Specify to use indexes in an SQL statement

```sql
obclient> SELECT /*+ INDEX (employees emp_department_ix)*/ employee_id, department_id
FROM employees
WHERE department_id > 50;
```

### Specify to join tables based on the sequence of the tables in the `FROM` clause

```sql
obclient> SELECT /*+ ORDERED */ *
    FROM employees t1,department t2
    WHERE t1.department_id = t2.department_id;
Query OK, 0 row affected
```

### Use SQL hints to set the query timeout period to 10 seconds

```sql
obclient> SELECT /*+ query_timeout(10000000) */ o_id,o_c_id,o_carrier_id,o_ol_cnt,o_all_local,o_entry_d
    FROM ordr   
    WHERE o_w_id=1 and o_d_id=2 AND o_id=2100;
+------+--------+--------------+----------+-------------+------------+
| o_id | o_c_id | o_carrier_id | o_ol_cnt | o_all_local | o_entry_d  |
+------+--------+--------------+----------+-------------+------------+
| 2100 |      8 |            8 |       11 |           1 | 2020-02-15 |
+------+--------+--------------+----------+-------------+------------+
1 row in set
```

### Avoid parallel queries in an SQL statement

```sql
obclient> SELECT /*+ no_use_px parallel(8) */ * FROM(
    SELECT /*+ no_use_px parallel(8) */ no_w_id, no_d_id, MAX(no_o_id) max_no_o_id, MIN(no_o_id) min_no_o_id, COUNT(*) count_no
    FROM nord
    GROUP BY no_w_id, no_d_Id
    ) x
   WHERE max_no_o_id - min_no_o_id+ 1!= count_no;
Empty set
```
