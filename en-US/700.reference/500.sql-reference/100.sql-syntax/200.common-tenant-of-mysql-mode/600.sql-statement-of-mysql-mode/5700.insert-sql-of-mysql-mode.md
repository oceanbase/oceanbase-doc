| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | MySQL Mode      |

# INSERT

## Purpose

You can use this statement to add one or more records to a table.

Direct INSERT operations on subqueries are not supported. For example, `INSERT INTO (SELECT * FROM t1) VALUES(1, 1)` cannot be executed.

## Syntax

```sql
INSERT
    [/*+ [APPEND | direct(bool, int, [load_mode])] enable_parallel_dml PARALLEL(N) */]
    [IGNORE] [INTO]
    single_table_insert
    [ON DUPLICATE KEY UPDATE update_asgn_list];

load_mode:
    'full'
    | 'inc_replace'

single_table_insert:
    {dml_table_name values_clause
     | dml_table_name '(' ')' values_clause
     | dml_table_name '(' column_list ')' values_clause
     | dml_table_name SET update_asgn_list}

dml_table_name:
    table_name [PARTITION (partition_name,...)]

values_clause:
     {{VALUES | VALUE} ({expr | DEFAULT},...) [, ...]
      | select_stmt}

column_list
    column_name [, ...]

update_asgn_list:
     column_name = expr [, ...]
```

## Parameters

| **Parameter** | **Description** |
|-------------------------|------------------------------------------------------------------------|
| APPEND \| direct() | A hint for enabling the direct load feature. <ul><li>The `APPEND` hint is equivalent to `direct(true,0)`, and can collect statistics online like the `GATHER_OPTIMIZER_STATISTICS` hint does. </li><li>Options in `direct()`:<ul><li><code>bool</code>: specifies whether to sort the data written. The value <code>true</code> indicates that sorting is needed, and the value <code>false</code> indicates that sorting is not needed. </li><li><code>int</code>: the maximum number of erroneous rows allowed. </li><li><code>load_mode</code>: Optional. The direct load mode. Enclose the value with single quotation marks. Valid values:<ul><li><code>full</code>: the full direct load mode. This is the default value. </li><li><code>inc_replace</code>: the incremental direct load mode based on the <code>replace</code> semantic. <main id="notice" type='notice'><h4>Notice</h4><p><ul><li>When the value of <code>load_mode</code> is <code>inc_replace</code>, the <code>INSERT</code> statement cannot contain the <code>IGNORE</code> keyword. </li><li>The incremental direct load feature is currently in the experimental stage. To ensure system stability, we recommend that you do not use it in a production environment. </li></ul></p></main></li></ul></li></ul></li></ul> For more information about how to use `INSERT INTO` to import data in bypass mode, see [Import data in bypass mode by using the INSERT INTO SELECT statement](../../../../../500.data-migration/1100.bypass-import/300.use-insert-into-select-statement-to-bypass-import-data.md).  |
| enable_parallel_dml parallel(N) | The DOP for loading data. The default value of `N` is `4`. <main id="notice" type='explain'><h4>Note</h4><p>Generally, the <code>enable_parallel_dml</code> and <code>parallel</code> hints must be used together to enable PDML. However, if a table-level DOP is specified for the schema of the target table, you only need to specify the <code>enable_parallel_dml</code> hint. </p></main> |
| IGNORE | Ignores errors that occur during the execution of an `INSERT` statement.  |
| column_list | The name of the column to which the data is inserted. Multiple columns must be separated with commas (,).  |
| table_name | The name of the table into which data is to be inserted.  |
| partition_name | The name of the partition into which data is to be inserted.  |
| update_asgn_list | The statement that assigns values such as `c1 = 2`.  |
| ON DUPLICATE KEY UPDATE | The action performed on duplicate primary keys or unique keys. If this parameter is specified, the configured value takes the place of the inserted value when the inserted primary key or unique key is duplicated. If this parameter is not specified, an error is returned when the inserted primary key or unique key is duplicated.  |

## Examples

Sample tables and their data are defined as follows:

```sql
obclient> CREATE TABLE t1(c1 INT PRIMARY KEY, c2 INT) PARTITION BY KEY(c1) PARTITIONS 4;
Query OK, 0 rows affected

obclient> CREATE TABLE t2(c1 INT PRIMARY KEY, c2 INT);
Query OK, 0 rows affected
obclient> SELECT * FROM t2;
+----+------+
| c1 | c2   |
+----+------+
|  1 |    1 |
|  2 |    2 |
|  3 |    3 |
|  4 |    4 |
+----+------+
4 rows in set
```

* Insert a row of data into table `t1`.

   ```javascript
   obclient>  INSERT INTO t1 VALUES(1,1);
   Query OK, 1 row affected

   obclient> SELECT * FROM t1;
   +----+------+
   | c1 | c2   |
   +----+------+
   |  1 |    1 |
   +----+------+
   1 row in set
   ```

* Insert multiple rows of data into table `t1`.

   ```sql
   obclient> INSERT t1 VALUES(1,1),(2,DEFAULT),(2+2,3*4);
   Query OK, 3 rows affected
   Records: 3  Duplicates: 0  Warnings: 0

   obclient> SELECT * FROM t1;
   +----+------+
   | c1 | c2   |
   +----+------+
   |  1 |    1 |
   |  2 | NULL |
   |  4 |   12 |
   +----+------+
   3 rows in set
   ```

* Insert a single row of data into partition `p0` of table `t1`.

   ```sql
   obclient> INSERT INTO t1 PARTITION(p0) (c1) VALUES(5);
   Query OK, 1 row affected
   obclient> SELECT * FROM t1 PARTITION(p0);
   +----+------+
   | c1 | c2   |
   +----+------+
   |  5 | NULL |
   +----+------+
   1 row in set
   ```

* When you insert a duplicate primary key value into table `t1`, use the `ON DUPLICATE KEY UPDATE` function to update the value.

   ```sql
   obclient> INSERT INTO t1 VALUES(1,1),(1,2) ON DUPLICATE KEY UPDATE c1=100;
   Query OK, 3 rows affected
   Records: 2  Duplicates: 1  Warnings: 0

   obclient> SELECT * FROM t1;
   +-----+------+
   | c1  | c2   |
   +-----+------+
   | 100 |    1 |
   +-----+------+
   1 row in set
   ```

* Insert values into an updatable view `v`.

   ```sql
   obclient> CREATE VIEW v AS SELECT * FROM t1;
   Query OK, 0 rows affected
   obclient> INSERT INTO v VALUES (1,1);
   Query OK, 1 row affected

   obclient> SELECT * FROM v;
   +----+------+
   | c1 | c2   |
   +----+------+
   |  1 |    1 |
   +----+------+
   1 row in set
   ```

* Insert the query results of table `t1` into table `t2`.

   ```sql
   obclient> INSERT INTO t1 SELECT * FROM t2 WHERE c1>2;
   Query OK, 2 rows affected
   Records: 2  Duplicates: 0  Warnings: 0

   obclient> SELECT * FROM t1;
   +----+------+
   | c1 | c2   |
   +----+------+
   |  3 |    3 |
   |  4 |    4 |
   +----+------+
   2 rows in set
   ```
