# 代理层高可用

OBProxy 需要高可用能力来保证其服务。用户请求首先到达 OBProxy ，如果 OBProxy 发生异常，用户请求就无法被正常服务。OBProxy 还需要处理数据库集群节点故障，并做出相应的容错处理。

OBProxy 不同于 OceanBase 集群，OBProxy 没有持久化状态，其运行依赖的所有数据信息都来自于对数据库的访问，所以 OBProxy 故障不会导致数据丢失。OBProxy 也是由多台节点组成的集群提供服务，用户请求具体会由哪个 OBProxy 节点来执行，由用户的 F5 或者其他负载均衡组件负责，同时 OBProxy 的某个节点故障，也应由负载均衡组件自动剔除，保证之后的请求不会再发送到故障节点上。

OBProxy 运行过程会实时监控数据库集群的状态，一方面 OBProxy 会实时获取集群系统表，通过系统表了解每个数据库节点的健康状态和分区的实时位置，另一方面 OBProxy 会通过网络连接探测数据库节点的服务状态，遇到异常时会标记相应节点的故障状态，并进行相应的服务切换。

## 相关文档

更多关于 OBProxy 的介绍，请参见 [代理概述](../7.reference/1.oceanbase-database-concepts/6.data-link/2.database-proxy/1.agent-overview.md)。