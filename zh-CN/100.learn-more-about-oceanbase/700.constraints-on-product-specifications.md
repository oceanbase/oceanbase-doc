# 使用限制

## 标识符长度限制

:::tab
tab MySQL 模式
  | **数据项** | **最大长度** |
  |---------|----------|
  | 集群名     | 128 字节   |
  | 租户名     | 63 字节    |
  | 用户名     | 64 字节    |
  | 数据库名    | 128 字节   |
  | 表名      | 64 字符    |
  | 列名      | 128 字节   |
  | 索引名     | 64 字节    |
  | 视图名     | 64 字节    |
  | 别名      | 255 字节   |
  | 表组名     | 127 字节   |
tab Oracle 模式
  | **类型** | **最大长度** |
  |--------|----------|
  | 集群名    | 128 字节   |
  | 租户名    | 63 字节    |
  | 用户名    | 64 字节    |
  | 表名     | 128 字节   |
  | 列名     | 128 字节   |
  | 索引名    | 128 字节   |
  | 视图名    | 128 字节   |
  | 别名     | 128 字节   |
  | 对象名    | 128 字节   |
  | 表组名    | 127 字节   |
:::

## ODP(OceanBase Database Proxy) 连接限制

### 连接数据库限制

V4.x 版本中，通过 ODP 方式连接数据库时，不支持主备库自由路由。

### 最大连接数限制

|       类型        |                     最大限制                      |
|-----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 单个 ODP 的连接数 | 由 ODP 的 `client_max_connections` 参数控制，默认为 8192。 <main id="notice" type='explain'><h4>说明</h4><p>您可以通过增加 ODP 节点数或者修改 <code>client_max_connections</code> 配置项值的方式来增大集群的连接总数限制。</p></main>|

## 分区副本数限制

|         类型         |           最大限制            |
|--------------------|-------------------------------------------------------------------------------------|
| 每个 OBServer 节点的分区副本数 | 无严格限制 <main id="notice" type='explain'><h4>说明</h4><p>每个 OBServer 节点的分区副本数可根据租户内存大小来预估，1G 内存约支持约 2 万 tablet。</p></main> |

## 单个表的限制

|  类型   |   最大限制    |
|-------|--------------------|
| 行长度   | 1.5M 字节   |
| 列数    | 4096 列    |
| 索引个数  | 128 个     |
| 索引总列数 | 512 列     |
| 索引长度  | 16K   |
| 主键总列数 | 64 列      |
| 主键长度  | 16K       |
| 分区个数  | <ul><li>Oracle 模式：65536 个</li> <li>MySQL 模式：8192 个</li></ul>    |

## 单列的限制

|   类型    |   最大限制    |
|---------|-----------|
| 索引单个列长度 | 16K |

## 字符串类型限制

:::tab
tab MySQL 模式

  |   **类型**    | **最大长度**     |
  |---------------|------------------|
  | `CHAR`        | 256 字符         |
  | `VARCHAR`     | 262144 字符     |
  | `BINARY`      | 256 字节         |
  | `VARBINARY`   | 1048576 字节     |
  | `TINYBLOB`    | 255 字节         |
  | `BLOB`        | 65535 字节       |
  | `MEDIUMBLOB`  | 16777215 字节    |
  | `LONGBLOB`    | 536870910 字节   |
  | `TINYTEXT`    | 255 字节         |
  | `TEXT`        | 65535 字节       |
  | `MEDIUMTEXT`  | 16777215 字节    |
  | `LONGTEXT`    | 536870910 字节   |  
tab Oracle 模式

  |   **类型**  | **最大长度**|
  |-------------|------------|
  | `CHAR`      | 2000 字节  |
  | `NCHAR`     | 2000 字节  |
  | `VARCHAR`   | 32767 字节 |
  | `VARCHAR2`  | 32767 字节 |
  | `NVARCHAR2` | 32767 字节 |
  | `BLOB`      | 536870910 字节 |
  | `CLOB`      | 536870910 字节 |
:::

## 功能使用限制

物理备库的使用限制如下表所示。

| 限制项                         |   具体描述                                   |
|-------------------------------|----------------------------------------------|
| 备租户个数限制                  | 无限制                                       |
| 主租户和备租户异构              | <ul><li>不支持主租户与备使用不同的租户资源规格。例如，使用不同的 CPU 或 Memory 配置，会有稳定性风险</li><li>不支持主租户与备租户使用不同的 `UNIT_NUM` 配置</li></ul>   |
| 主备租户配置项修改是否同步       | 主租户与备租户的配置项相互独立，不会物理同步。如果修改了主租户的配置项，需要评估是否需要修改备租户的配置项  |
| 主备租户系统变量修改是否同步     | 主租户修改系统变量后，备租户的系统变量会同步修改       |
| 备租户操作                     | <ul><li>备租户支持强读或弱读，不支持写</li><li>备租户只能触发转储，不能触发合并，合并信息从主租户同步</li></ul>|
| Switchover 限制                | <ul><li>备切主时，要求备租户所在的集群的所有 Server 在线</li><li>备切主在切换前需要保证备租户已同步</li></ul>                        |
| Failover 限制                  | 要求备租户所在集群的所有 Server 在线                                    |
