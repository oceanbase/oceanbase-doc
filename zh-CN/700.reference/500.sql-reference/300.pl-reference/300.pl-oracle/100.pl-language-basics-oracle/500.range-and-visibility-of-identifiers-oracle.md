| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | Oracle Mode     |

# 标识符的范围和可见性

标识符的范围是指可以从中引用标识符的 PL 单元的区域。标识符的可见性是指在不限定标识符的情况下从中引用该标识符的 PL 单元的区域。

  <main id="notice" >
    <h4>功能适用性</h4>
    <p>该内容仅适用于 OceanBase 数据库企业版。OceanBase 数据库社区版仅提供 MySQL 模式。</p>
  </main>

标识符在声明它的 PL 单元是本地的。如果该单元具有子单元，则标识符对其是全局的。

如果子单元重新声明了全局标识符，则两个标识符都在该子单元内部，但是只有本地标识符可见。要引用全局标识符，子单元必须通过声明单元名称来限定它。如果该单元没有名称，则子单元无法引用全局标识符。

PL 单元不能引用在其他同级别单元中声明的标识符，因为这些标识符既不是本地块也不是全局块。

不能在同一 PL 单元中对相同的标识符声明两次，否则，在引用重复的标识符时会发生错误。

您可以在两个不同的单位中声明相同的标识符，但是标识符所表示的两个对象是不同的，更改其中一个不会影响另一个。

在同一范围内，为标签和子程序指定唯一的名称，可以避免混淆和异常情况。

```sql
  -- 外部块
obclient> DECLARE
    x CHAR;     --  x (CHAR) 范围开始
    y FLOAT;    -- y 范围开始
BEGIN
    --  x (CHAR)和 y 具有可见性
  
    -- 第一个子块:
    DECLARE
      x INTEGER;  -- x (INTEGER) 范围开始
      z FLOAT;       -- z 范围开始
      BEGIN
       -- x (INTEGER)、y 和 z 具有可见性
       NULL;
      END;          -- x (INTEGER) 和 z 的范围结束

     -- 第二个子块:
     DECLARE
       w FLOAT;     -- w 范围开始
     BEGIN
       -- x (CHAR)、 y 和 w 具有可见性
       NULL;
     END;          -- w 范围结束

  -- x (CHAR)和 y 具有可见性
END;            -- x (CHAR) 和 y 的范围结束
/
Query OK, 0 rows affected 
```



此示例显示了多个标识符的范围和可见性。第一子块重新声明全局标识符 `x`。要引用全局变量 `y`，第一个子块必须使用外部块的名称对其进行限定，但是外部块没有名称。因此，第一个子块不能引用全局变量 `x`，只能引用其局部变量 `x`。因为子块处于同一级别，所以第一子块不能引用 `w`，第二子块不能引用 `z`。
