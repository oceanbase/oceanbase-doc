| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | MySQL Mode      |

# 高效压缩位图数据类型转换

OceanBase 数据库支持将高效压缩位图类型的数据转换为其他数据类型，不支持将其他类型的数据转换为高效压缩位图类型。

## 与十六进制字符串之间相互转换

支持将高效压缩位图数据类型转换为十六进制字符串，示例如下：

```sql
CREATE TABLE t1 (rb ROARINGBITMAP);
INSERT INTO t1 VALUES (rb_from_string('1,2,3'));
SELECT * FROM t1;
```

返回结果如下：

```shell
+----------------------------------+
| rb                               |
+----------------------------------+
| 0x010303010000000200000003000000 |
+----------------------------------+
1 rows in set
```

查询含有元素 `1,2,3` 的高效压缩位图数据时，返回显示的是十六进制数。

 <main id="notice" type='explain'>
    <h4>说明</h4>
    <p>返回以上可视化查询结果需了解的注意事项请见[创建高效压缩位图列](200.create-roaring-bitmap-columns-of-mysql-mode.md)。</p>
  </main>

支持将十六进制字符串转换为高效压缩位图数据类型，示例如下：

```sql
INSERT INTO t1 VALUES (x'0100');
SELECT rb_to_string(rb) FROM t1;
```

返回结果如下：

```shell
+----------------------------------+
| rb_to_string(rb)                 |
+----------------------------------+
|                                  |
+----------------------------------+
1 rows in set
```

十六进制数 `x'0100'` 转换为高效压缩位图数据，表示空的高效压缩位图数据。

## 转换为字符串类型

将高效压缩位图数据类型转换为字符串类型，示例如下：

```sql
ALTER TABLE t2 MODIFY COLUMN rb TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_bin;
ALTER TABLE t2 MODIFY COLUMN rb int;
```

## 不支持的类型转换

不支持将其他数据类型列转换为高效压缩位图类型，否则会返回如下报错：

```shell
ERROR 1235 (0A000): Modify other type to roaringbitmap not supported
```
