| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | MySQL Mode      |

# LOCK TABLES

## 描述

该语句用于在会话（Session）中锁定表。

## 使用限制及注意事项

* 当前 Session 持有表锁时，再次执行 `LOCK TABLES` 时，会上多个表锁。

* 同 Session 上 `WRITE` 锁以后，能够执行 `RENAME` 操作，且 `RENAME` 操作不会释放表锁。

* 不支持视图（View）上锁。

## 权限要求

执行 `LOCK TABLES` 语句，需要当前用户至少拥有对应对象的 `LOCK TABLES` 权限。更多有关 OceanBase 数据库权限的详细介绍，请参见 [MySQL 模式下的权限分类](../../../../../600.manage/500.security-and-permissions/300.access-control/200.user-and-permission/200.permission-of-mysql-mode/100.permission-classification-of-mysql.md)。

## 语法

```sql
LOCK {TABLE | TABLES}
    tbl_name [[AS] alias] lock_type
    [, tbl_name [[AS] alias] lock_type ...];

lock_type:
    READ [LOCAL]
    | [LOW_PRIORTY] WRITE
```

## 语法说明

|       **字段名称**     | **描述** |
|------------------------|----------|
| LOCK {TABLE \| TABLES} | 表示对表或多个表进行锁定操作。`LOCK TABLE` 是 `LOCK TABLES` 的同义词。|
| table_name             | 指定要锁定表的名称。|
| [AS] alias             | 表示给表指定一个别名。|
| lock_type              | 指定表锁定的类型。有关表锁定类型的详细介绍可参见下文 [lock_type](#lock_type)。|

### lock_type

* `READ [LOCAL]`：表示对表进行读取锁定操作，支持多个 Session 同时进行读取锁定操作。具体如下：

  * `READ`：表示所有的 Session 只能读取被锁的表，不能对该表进行修改（包括执行锁的 Session）。
  * `READ LOCAL`：与 `READ` 相同，但允许执行 `INSERT` 命令。

* `[LOW_PRIORTY] WRITE`：表示对表进行写入锁定操作，具体如下：

  * `LOW_PRIORTY`：仅支持该关键字语法，功能不生效。
  * `WRITE`：除了当前 Session 被允许读取和修改被锁的表外，其他 Session 的所有访问被完全阻止。

## 示例

为 `test_tbl1` 表设置读锁，为 `test_tbl2` 表设置写锁。

```sql
LOCK TABLES test1 as t1 READ LOCAL, test2 as t2 WRITE;
```

## 相关文档

[UNLOCK TABLES](8950.unlock-tables-of-mysql-mode.md)
