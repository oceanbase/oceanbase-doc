| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | MySQL Mode      |

# SHOW JOB STATUS

## 描述

用于查询异步任务状态。

<main id="notice" type='notice'>
  <h4>注意</h4>
  <p><code>root</code> 用户可以查看所有用户创建的 job,普通用户只能查自己的 job。</p>
</main>

## 语法

```sql
SHOW JOB STATUS [WHERE job='job_id'];
```

## 参数说明

`job_id` 指异步任务的唯一 id，您可以执行 `SHOW JOB STATUS` 查看当前用户创建的所有任务状态或使用 `where` 语句指定 `job_id` 查看单个任务的状态。

## 示例

* 查看当前用户创建的所有任务状态。

    ```shel
    obclient> show job status;
    +------------------------+-------------+-----------+----------+----------------------------+----------------------------+------------------+
    | job_id                 | schema_name | status    | fail_msg | create_time                | update_time                | definition       |
    +------------------------+-------------+-----------+----------+----------------------------+----------------------------+------------------+
    | 2010011125899906847397 | oceanbase   | FINISH    | SUCCESS  | 2024-08-02 17:56:19.441303 | 2024-08-02 17:56:30.529692 | select sleep(1); |
    | 2010011125899906847786 | oceanbase   | SUBMITTED | NULL     | 2024-08-02 17:58:11.814612 | 2024-08-02 17:58:11.815297 | select sleep(2); |
    | 2010011125899906847800 | oceanbase   | SUBMITTED | NULL     | 2024-08-02 17:58:14.885659 | 2024-08-02 17:58:14.886382 | select sleep(3); |
    +------------------------+-------------+-----------+----------+----------------------------+----------------------------+------------------+
    3 rows in set (0.00 sec)
    ```

* 您也可以通过 `where` 条件指定 job id 查看单个任务状态。

    ```shell
    OceanBase(root@oceanbase)>show job status where job='2010011125899906847397';
    +------------------------+-------------+-----------+----------+----------------------------+----------------------------+------------------+
    | job_id                 | schema_name | status    | fail_msg | create_time                | update_time                | definition       |
    +------------------------+-------------+-----------+----------+----------------------------+----------------------------+------------------+
    | 2010011125899906847397 | oceanbase   | FINISH    | SUCCESS  | 2024-08-02 17:56:19.441303 | 2024-08-02 17:56:30.529692 | select sleep(1); |
    +------------------------+-------------+-----------+----------+----------------------------+----------------------------+------------------+
    1 rows in set (0.00 sec)
    ```

### 字段说明

|        字段     |                描述         |
|----------------|-----------------------------|
|`job_id`|指 job 的唯一 id。|
|`schema_name`|数据库的名称。|
|`status`|job 的运行状态。<ul><li><code>SUBMITTED</code>:表示任务已提交。</code></li><li><code>RUNNING</code>:表示开始调度任务（不一定开始执行）。</code><li><code>FINISH</code>:表示调度任务运行结束且返回成功。</li><li><code>FAILED</code>:表示调度任务运行结束且返回失败。</li><li><code>CANCELLED</code>表示任务被取消</code>。|
|`fail_msg`|job 运行的报错信息。|
|`create_time`|job 创建的时间。|
|`update_time`|job 最近一次状态更新的时间。|
|`definition`|job 执行的 SQL 语句。|
