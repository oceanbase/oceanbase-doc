| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | Oracle Mode      |

# 创建空间索引

OceanBase 数据库创建空间索引的语法与 Oracle 不同，空间索引列的 SRID 在建表时指定。

<main id="notice" type='notice'>
  <h4>注意</h4>
  <p>OceanBase 数据库创建空间索引不兼容 Orcale。因为 Orcale 创建空间索引必须手动维护 USER_SDO_GEOM_METADATA 系统表中空间索引列与索引信息的映射。而 OceanBase 数据库使用 MySQL 的风格兼容 Oracle 模式，不维护 USER_SDO_GEOM_METADATA 表，因此语法与 Oracle 不一致。</p>
</main>

## 准备工作

【导入SRS信息】

## 操作示例

以下示例展示如何创建空间索引：

```sql
-- 建表时确定索引列的 SRID
CREATE TABLE geoo (id NUMBER PRIMARY KEY, 
                    name VARCHAR2(32), 
                        shape SDO_GEOMETRY SRID 4326);
-- 插入两条测试数据
INSERT INTO geoo VALUES(1,'a',SDO_GEOMETRY(2003,4326,NULL,SDO_ELEM_INFO_ARRAY(1,1003,1),SDO_ORDINATE_ARRAY(0,0, 0,1, 1,1, 1,0, 0,0)));
INSERT INTO geoo VALUES(2,'a',SDO_GEOMETRY(2001,4326, sdo_point_type(0, 0, NULL), NULL, NULL));

-- 创建索引
CREATE INDEX g ON geoo(shape) INDEXTYPE IS MDSYS.SPATIAL_INDEX;
```

【
以下示例展示如何删除空间索引：

- 使用 `ALTER TABLE`：

```sql
ALTER TABLE geoo DROP INDEX g;
```

- 使用 `DROP INDEX`：

```sql
DROP INDEX g ON geoo;
```
】

创建空间索引的相关约束如下：

* 在创建了索引之后，比较的时候使用列定义中的 SRID 所对应的坐标系。空间索引存储了几何对象的 MBR（Minimum Bounding Rectangle）构建，MBR 的比较方式也依赖于 SRID。

# 附录

## SRS

SRS 指的是空间参照系统，它由坐标系、基准面和投影三个部分组成。GIS 特性中的每一条空间数据都会记录一个唯一的 SRID（Spatial Reference System 1984）。每条空间数据都依赖 SRID 对应的 SRS 进行空间表达式的计算。在创建 GIS 列时，可以同时指定 SRID，用于限定 GIS 列使用的参考坐标系。

## SRID 4326（WGS 84）

地球椭球具有多种模型，这些模型被称为基准，每一个空间参考系统是基于其中之一。其中，WGS 84（World Geodetic System 1984）是一个为全球定位系统（GPS）设定的标准，被广泛用于全球地图和空间数据。

SRID 4326 特指 GPS 使用的标准坐标系统 WGS 84，它使用经度和纬度值在地球表面上定义位置，并且经度纬度的单位是度。在实践中，SRID 4326 被广泛用来标识含有地理坐标数据的空间对象。