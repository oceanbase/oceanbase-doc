| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | Oracle Mode      |

# 创建空间索引

【OceanBase 数据库的 Oracle 模式创建空间索引的语法与 Oracle 不同，空间索引列的 SRID 在建表时指定。】

<main id="notice" type='notice'>
  <h4>注意</h4>
  <p>OceanBase 数据库的 Oracle 模式创建空间索引必须在 USER_SDO_GEOM_METADATA 中设置空间索引列与索引信息的映射。【索引信息包括 SRID，暂不包括 diminfo。】</p>
</main>

以下示例展示如何创建空间索引：

```sql
CREATE TABLE geoo (id NUMBER PRIMARY KEY, 
                              name VARCHAR2(32), 
                              shape SDO_GEOMETRY SRID 4326);
INSERT INTO geoo VALUES(1,'a',SDO_GEOMETRY(2003,4326,NULL,SDO_ELEM_INFO_ARRAY(1,1003,1),SDO_ORDINATE_ARRAY(0,0, 0,1, 1,1, 1,0, 0,0)));
INSERT INTO geoo VALUES(2,'a',SDO_GEOMETRY(2001,4326, sdo_point_type(0, 0, NULL), NULL, NULL));

CREATE INDEX g ON geoo(shape) INDEXTYPE IS MDSYS.SPATIAL_INDEX;
```

以下示例展示如何删除空间索引：

- 使用 `ALTER TABLE`：

```sql
ALTER TABLE geoo DROP INDEX g;
```

- 使用 `DROP INDEX`：

```sql
DROP INDEX g ON geoo;
```

创建空间索引的相关约束如下：

* 创建空间索引的列定义中必须包含 `NOT NULL` 约束。
* 在创建了索引之后，比较的时候使用列定义中的 SRID 所对应的坐标系。空间索引存储了几何对象的 MBR（Minimum Bounding Rectangle）构建，MBR 的比较方式也依赖于 SRID。
* 创建了空间索引的列最好是已经定义了 SRID，否则在该列上建的空间索引在查询时无法生效。
