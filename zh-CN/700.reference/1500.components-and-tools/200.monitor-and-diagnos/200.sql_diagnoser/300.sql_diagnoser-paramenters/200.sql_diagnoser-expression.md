# 诊断规则表达式

您可对诊断规则表达式进行修改。sql_diagnoser 的诊断规则表达式语法如下。

## 数据类型

|   类型   |      说明     |
|-------------|----------------|
|   数值类型   |   如： 1、 1.1、 -2.3。               |
|   字符串     |    如： 'a'、"abc"。                  |
|   布尔值     |      如： true、false。不区分大小写。     |
|  上下文变量   |  类属性，用于从上下文中取出对象属性。属性前需加 `$`，如取响应时间： `$elapsedTime`。 </br>需区分大小写。 |

## 对象计算

|   类型   |      说明     |
|-------------|----------------|
|   属性访问   |   访问对象的属性，如 `$a.b` 就是访问上下文中的 a 的 b 属性。             |
|   方法访问     |    访问对象的方法，可以与属性访问一起使用。如：`$a.f1()`，就是访问上下文中的 a 的 f1 方法。</br>目前暂未用到，仅展示用法。                   |

## 聚合运算

|   类型   |      说明     |
|-------------|----------------|
|   COUNT、AVG、STD、VAR、MIN、MAX、SUM、DISTINCT   |   与 SQL 一致，对集合进行运算。                |
|   集合投影     |    取集合中每个元素的属性，并构成新的集合，类似于 SQL 的投影列。 如：`$tableList.tableName`，若 `$tableList` 是集合，则会将每个元素的 tableName 属性取出，组成一个集合。</br>不区分大小写。                   |

## 关系运算

|   类型   |      说明     |
|-------------|----------------|
|   !=/<> 、=/== 、<= 、< 、>=、 >   |   与 SQL 一致。                |
|   IN     |    与 SQL 的 IN 相同，判断元素是否存在于某个集合中。</br>不区分大小写。                  |

## 布尔运算

|   类型   |      说明     |
|-------------|----------------               |
|   AND、OR、NOT   |   与 SQL 一致。不区分大小写。                              |

## 其他运算

|   类型   |      说明     |
|-------------|----------------|
|   ISNULL、NOTNULL、NOTEMPTY、ISEMPTY   |    ISNULL、NOTNULL 判断对象是否存在；NOTEMPTY、ISEMPTY 判断集合是否为空。</br>不区分大小写。                |
