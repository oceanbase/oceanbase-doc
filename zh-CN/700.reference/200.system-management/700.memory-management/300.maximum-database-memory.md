|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# 数据库内存上限

本文介绍了设置数据库内存上限的方式和相应的使用示例。

## 设置自身数据库内存上限方式

OceanBase 数据库提供以下两种方式来设置自身内存的上限：

* 按照计算机器总内存上限的百分比计算自身可以使用的总内存，由 `memory_limit_percentage` 参数配置。

* 直接设置 OceanBase 数据库可用内存的上限，由 `memory_limit` 参数配置。其中 `memory_limit` 参数值为 `0M` 时，使用百分比的配置方式，否则使用绝对值的配置方式。

## 使用示例

下面的示例展示了，当在一台 100 GB 的机器上启动一个 OceanBase 数据库实例时，`memory_limit_percentage` 和 `memory_limit` 参数的值是如何影响 OceanBase 数据库的内存上限的。

|    示例    | **memory_limit_percentage** | **memory_limit** | **OceanBase 数据库内存上限** |
|----------|-----------------------------|------------------|-----------------------|
| **示例 1** | 80                          | 0M               | 80 GB                 |
| **示例 2** | 80                          | 90 GB            | 90 GB                 |

* 示例 1 中，`memory_limit` 为 `0M`，表示使用百分比的配置方式，故以 `memory_limit_percentage` 为准，OceanBase 数据库内存上限为 100 GB\*80%=80 GB。

* 示例 2 中，`memory_limit` 为 90 GB，表示使用绝对值的配置方式，故以 `memory_limit` 为准，OceanBase 数据库内存上限为 90 GB。

  <main id="notice" type='notice'>
  <h4>注意</h4>
  <p>目前主流的 OceanBase 数据库服务器一般内存为 384 GB 或 512 GB，384 GB 内存建议配置为使用机器内存的 80%，512 GB 内存建议配置为使用机器内存的 90%。</p>
  </main>
