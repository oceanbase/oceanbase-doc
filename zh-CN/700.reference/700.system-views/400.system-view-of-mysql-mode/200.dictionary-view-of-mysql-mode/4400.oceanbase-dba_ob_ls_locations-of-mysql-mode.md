|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|MySQL Mode|

# oceanbase.DBA_OB_LS_LOCATIONS

<main id="notice" type='explain'>
  <h4>说明</h4>
  <p>从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

展示本租户的日志流（ LS ）副本分布信息。

## 字段说明

|     字段名称     |       类型       | 是否可以为 NULL |       描述        |
|--------------|----------------|------------|----------------------------------------------------------------------|
| CREATE_TIME  | datetime(6)         | NO         |   创建时间       |
| MODIFY_TIME  | datetime(6)         | NO         |   修改时间      |
| LS_ID        | bigint(20)          | NO         |   日志流 ID       |
| SVR_IP       | varchar(46)        | NO         | 服务器 IP 地址       |
| SVR_PORT     | bigint(20)   | NO         | 服务器端口号          |
| SQL_PORT     | bigint(20)   | NO         | SQL 端口号         |
| ZONE         | varchar(128)  | NO         | Zone 名称         |
| ROLE         | varchar(8)    | NO         | 副本角色 <li> `LEADER`   <li> `FOLLOWER`       |
| MEMBER_LIST  | varchar(4480) | NO         | 副本成员列表：当角色为 `LEADER` 时，该字段有效；否则为 `NULL`       |
| PAXOS_REPLICA_NUMBER       | bigint(20)    | NO         | Paxos 法定副本数：当角色为 `LEADER` 时，该字段有效；否则为 `NULL`  |
| REPLICA_TYPE | varchar(18)   | NO         | 副本类型： <li> `FULL`：全功能类型副本    <li> `READONLY`：只读型副本      |
| LEARNER_LIST | longtext      | YES        | 当前日志流的只读副本列表 <main id="notice" type='explain'><h4>说明</h4><p>该字段从 V4.2.0 版本开始引入。</p></main> |
| REBUILD      | varchar(5)    | NO         | 该副本是否正在 Rebuild <main id="notice" type='explain'><h4>说明</h4><p>该字段从 V4.2.1 版本开始引入。</p></main>|

## 查询示例

查看本租户日志流副本的分布信息。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.DBA_OB_LS_LOCATIONS;
```

查询结果如下：

```shell
+----------------------------+----------------------------+-------+----------------+----------+----------+-------+--------+-----------------------+----------------------+--------------+--------------+---------+
| CREATE_TIME                | MODIFY_TIME                | LS_ID | SVR_IP         | SVR_PORT | SQL_PORT | ZONE  | ROLE   | MEMBER_LIST           | PAXOS_REPLICA_NUMBER | REPLICA_TYPE | LEARNER_LIST | REBUILD |
+----------------------------+----------------------------+-------+----------------+----------+----------+-------+--------+-----------------------+----------------------+--------------+--------------+---------+
| 2024-09-03 11:24:50.890232 | 2024-09-03 11:24:53.272771 |     1 | 172.xx.xxx.xxx |     2882 |     2881 | zone1 | LEADER | 172.xx.xxx.xxx:2882:1 |                    1 | FULL         |              | FALSE   |
| 2024-09-03 11:25:04.074197 | 2024-09-03 11:25:06.474247 |  1001 | 172.xx.xxx.xxx |     2882 |     2881 | zone1 | LEADER | 172.xx.xxx.xxx:2882:1 |                    1 | FULL         |              | FALSE   |
+----------------------------+----------------------------+-------+----------------+----------+----------+-------+--------+-----------------------+----------------------+--------------+--------------+---------+
2 rows in set
```
