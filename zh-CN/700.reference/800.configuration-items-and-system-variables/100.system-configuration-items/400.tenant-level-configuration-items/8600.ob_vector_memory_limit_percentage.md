|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# ob_vector_memory_limit_percentage

<main id="notice" type='explain'>
  <h4>说明</h4>
  <p>该配置项从 V4.3.3 版本开始引入。</p>
</main>

## 功能描述

`ob_vector_memory_limit_percentage` 用于配置向量索引模块对内存资源占用的阈值（单位为百分比）。

## 权限要求

* 查询配置项

  `sys` 租户和 MySQL 用户租户均可以使用 `SHOW PARAMETERS` 语句或视图 `GV$OB_PARAMETERS` 查询该配置项。

* 修改配置项

  `sys` 租户和 MySQL 用户租户都可修改该配置项。

## 属性说明

|      **属性**      |   **描述**   |
|--------------------|--------------|
| 参数类型             | Int         |
| 默认值               | 0，即关闭向量索引功能       |
| 取值范围             | [0, 100) |
| 是否可修改           | 是，支持通过 `ALTER SYSTEM SET` 语句修改。|
| 是否重启 OBServer 节点生效 | 否，设置后立即生效。     |

## 使用说明

此参数的具体取值需要基于计算公式和业务需求来规划。请点击[下载内存计算表格](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer/V4.3.3/%E5%86%85%E5%AD%98%E8%AE%A1%E7%AE%97.xlsx)计算参数取值。

表格说明：

* 创建向量索引需要先配置 `ob_vector_memory_limit_percentage` 配置项，当需要在一个租户下创建多个向量索引时，所需的内存是所有内存的总和。

* 您需要按业务场景需要填写表格第一列数据量和第二列向量维度数值。

* 表格第三列 M 表示 HNSW 图索引的最大边数，`16` 为默认值，通常不需要改动。

* 表格第五列最小内存配置仅用于后建索引，且不进行任何新增数据的场景。

## 配置示例

设置向量索引内存占用的阈值为 30%。

```shell
obclient> ALTER SYSTEM SET ob_vector_memeory_limit_percentage = 30;
```
