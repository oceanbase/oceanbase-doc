|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# replica_parallel_migration_mode

<main id="notice" type='explain'>
<h4>说明</h4>
<p>对于 V4.2.x 版本，该配置项从 V4.2.5 版本开始引入。</p>
</main>

## 功能描述

`replica_parallel_migration_mode` 用于指定日志流副本并行迁移功能的模式。

## 权限要求

* 查询配置项

  `sys` 租户和所有用户租户均可以使用 `SHOW PARAMETERS` 语句或视图 `GV$OB_PARAMETERS` 查询该配置项。

* 修改配置项

  仅 `sys` 租户可以修改该配置项，用户租户不能修改该配置项。

## 属性说明

| **属性**  | **描述** |
| ----------|----------------------------------|
| 参数类型   | String |
| 默认值     | auto |
| 取值范围   |<ul><li>`aoto`：自动模式。</br>物理备库场景下，如果主租户设置为该值，则表示关闭并行迁移功能；如果备租户设置为该值，则表示开启并行迁移功能。</li> <li>`on`：开启模式，即开启并行迁移功能。</li> <li>`off`：关闭模式，即关闭并行迁移功能。</li></ul> |
| 是否可修改 | 是，支持通过 `ALTER SYSTEM SET` 语句修改。|
| 是否重启 OBServer 节点生效 | 否，设置后立即生效。  |

## 使用说明

设置该配置项时，需要注意以下事项：

* 物理备库场景下，主备租户对日志流副本并行迁移功能的需求不同：

  * 主租户在常规场景中，可能不需要使用并行迁移功能，因为多个副本同时迁移时拷贝的数据量较大，有可能会影响 Leader 副本的 I/O 性能。

  * 备租户使用并行迁移的需求较高，可以通过并行迁移降低备租户上副本 Rebuild 的概率。

* 在使用并行迁移功能时，应尽可能减少对已有主库（主租户）业务的影响。结合业务需要，如果希望加速扩缩容，则可以开启并行迁移功能。

* 物理备库场景下，主租户和备租户均需要设置该配置项。

## 配置示例

用户租户为本租户开启并行迁移功能。

```shell
obclient> ALTER SYSTEM SET replica_parallel_migration_mode = 'on';
```



