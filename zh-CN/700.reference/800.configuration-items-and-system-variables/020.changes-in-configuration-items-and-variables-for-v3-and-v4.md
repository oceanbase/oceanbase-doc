|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# V3.x 与 V4.x 配置项和系统变量的变更

由于 OceanBase 数据库在 V4.x 版本进行了架构的变更升级以及重构调整，很多配置项或变量已不再起作用，V4.x 对于无效的配置项或变量进行了删除和变更。例如，用于触发 Major Freeze 的配置项 `minor_freeze_times` 已经删除。同时，我们还调整了一些配置项的默认值，例如，V4.x 版本从底层解决了大事务能力的支持，事务不再受冻结操作的影响，故将 `freeze_trigger_percentage` 的默认值调整为 20%。

## V4.x 版本中配置项相关的变更

### 替换的配置项

下表中列出了 V4.x 版本中用于替换 V3.x 版本的配置项。

| 配置项名（V3.x）                 | 替换后的配置项名（V4.x）           |  描述                           |
|---------------------------------|----------------------------------|----------------------------------|
| [backup_concurrency](100.system-configuration-items/300.cluster-level-configuration-items/1000.backup_concurrency.md)                            | [ha_low_thread_score](100.system-configuration-items/400.tenant-level-configuration-items/3600.ha_low_thread_score.md)                  | 替换后的配置项为租户级别           |
| [clog_disk_utilization_threshold](100.system-configuration-items/300.cluster-level-configuration-items/3100.clog_disk_utilization_threshold.md)  | [log_disk_utilization_threshold](100.system-configuration-items/400.tenant-level-configuration-items/4900.log_disk_utilization_threshold.md)    | 替换后的配置项为租户级别           |
| [clog_transport_compress_func](100.system-configuration-items/300.cluster-level-configuration-items/3400.clog_transport_compress_func.md)        | [log_transport_compress_func](100.system-configuration-items/400.tenant-level-configuration-items/5400.log_transport_compress_func.md)      | 替换后的配置项为租户级别           |
| [data_copy_concurrency](100.system-configuration-items/300.cluster-level-configuration-items/4000.data_copy_concurrency.md)、[fast_recovery_concurrency](100.system-configuration-items/300.cluster-level-configuration-items/9600.fast_recovery_concurrency.md)、[restore_concurrency](100.system-configuration-items/300.cluster-level-configuration-items/18400.restore_concurrency.md)  | [ha_high_thread_score](100.system-configuration-items/400.tenant-level-configuration-items/3500.ha_high_thread_score.md)                                                      | 替换后的配置项为租户级别           |
| [log_archive_checkpoint_interval](100.system-configuration-items/300.cluster-level-configuration-items/12800.log_archive_checkpoint_interval.md) | [archive_lag_target](100.system-configuration-items/400.tenant-level-configuration-items/200.archive_lag_target.md)                   | 替换后的配置项为租户级别           |
| [merge_thread_count](100.system-configuration-items/300.cluster-level-configuration-items/14300.merge_thread_count.md)                           | [compaction_low_thread_score](100.system-configuration-items/400.tenant-level-configuration-items/1200.compaction_low_thread_score.md)     | 替换后的配置项为租户级别           |
| [migrate_concurrency](100.system-configuration-items/300.cluster-level-configuration-items/14800.migrate_concurrency.md) 、[server_data_copy_out_concurrency](100.system-configuration-items/300.cluster-level-configuration-items/20500.server_data_copy_out_concurrency.md)、[server_data_copy_in_concurrency](100.system-configuration-items/300.cluster-level-configuration-items/20400.server_data_copy_in_concurrency.md)               | [ha_mid_thread_score](100.system-configuration-items/400.tenant-level-configuration-items/3700.ha_mid_thread_score.md)              | 替换后的配置项为租户级别           |
| [sql_audit_memory_limit](100.system-configuration-items/300.cluster-level-configuration-items/20700.sql_audit_memory_limit.md)           | [ob_sql_audit_percentage](200.system-variable/300.global-system-variable/9400.ob_sql_audit_percentage-global.md)                 | 替换为租户变量，不再是配置项           |
| [minor_merge_concurrency](100.system-configuration-items/300.cluster-level-configuration-items/15300.minor_merge_concurrency.md)                 | [compaction_mid_thread_score](100.system-configuration-items/400.tenant-level-configuration-items/1300.compaction_mid_thread_score.md)      | 替换后的配置项为租户级别           |
| [clog_persistence_compress_func](100.system-configuration-items/400.tenant-level-configuration-items/900.clog_persistence_compress_func.md)      | [log_storage_compress_func](100.system-configuration-items/400.tenant-level-configuration-items/5200.log_storage_compress_func.md)        | 替换后的配置项为租户级别           |
| [enable_clog_persistence_compress](100.system-configuration-items/400.tenant-level-configuration-items/2400.enable_clog_persistence_compress.md) | [log_storage_compress_all](100.system-configuration-items/400.tenant-level-configuration-items/5100.log_storage_compress_all.md)         | 替换后的配置项为租户级别           |

### 更改名称的配置项

下表列出了在 V4.x 版本中更改了名称的配置项。

| 配置项名（V3.x）                  | 配置项名（V4.x）            | 描述                            |
|----------------------------------|----------------------------|---------------------------------|
| tableapi_transport_compress_func | [kv_transport_compress_func](100.system-configuration-items/400.tenant-level-configuration-items/4000.kv_transport_compress_func.md) | <ul><li>对于 V4.2.x 版本，从 V4.2.1 BP2 版本开始更名，同时级别调整为租户级别。</li> <li>对于 V4.3.x 版本，名称暂未变更。</li></ul>     |

### 更改生效范围的配置项

OceanBase 数据库是多租户架构，大多数用户会选择在同一个集群中创建多个租户，再根据业务种类的不同来分别进行管理。为了满足用户一个租户代表一个业务单元的使用需求，在 V4.x 版本中，将集群级别的能力拆分为租户级别，例如，租户级的备份，租户级的转储与合并。

下表列出了更改生效范围的配置项。

| 配置项名                          | 描述                                      |
|----------------------------------|-------------------------------------------|
| [backup_data_file_size](100.system-configuration-items/400.tenant-level-configuration-items/500.backup_data_file_size.md)            |<ul><li>对于 V4.2.x 版本，从 V4.2.1 BP2 版本开始，由集群级变更为租户级。</li> <li>对于 V4.3.x 版本，从 V4.3.0 版本开始，由集群级变更为租户级。</li></ul>     |
| [enable_rebalance](100.system-configuration-items/400.tenant-level-configuration-items/2900.enable_rebalance.md)                     |从 V4.2.0 版本开始，由集群级变更为租户级。|
| [balancer_idle_time](100.system-configuration-items/400.tenant-level-configuration-items/600.balancer_idle_time.md)                  |从 V4.2.0 版本开始，由集群级变更为租户级。|
| [log_archive_concurrency](100.system-configuration-items/400.tenant-level-configuration-items/4500.log_archive_concurrency.md)       |从 V4.1.0 版本开始，由集群级变更为租户级。    |
| [log_restore_concurrency](100.system-configuration-items/400.tenant-level-configuration-items/5000.log_restore_concurrency.md)       |从 V4.1.0 版本开始，由集群级变更为租户级。    |
| [major_compact_trigger](100.system-configuration-items/400.tenant-level-configuration-items/5600.major_compact_trigger.md)           |从 V4.0.0 版本开始，由集群级变更为租户级。    |
| [minor_compact_trigger](100.system-configuration-items/400.tenant-level-configuration-items/6100.minor_compact_trigger.md)           |从 V4.0.0 版本开始，由集群级变更为租户级。|

### 更改生效模式的配置项

配置项一般分为动态生效和重启生效等两种生效模式，大部分配置项为动态生效方式，即不需要重启 OBServer 节点就可以生效。

下表列出了更改生效模式的配置项。

| 配置项名                          | 描述                                      |
|----------------------------------|-------------------------------------------|
| [server_cpu_quota_min](100.system-configuration-items/300.cluster-level-configuration-items/20300.server_cpu_quota_min.md)             | <ul><li>对于 V4.2.x 版本，暂未更改生效模式。</li> <li>对于 V4.3.x 版本，从 V4.3.0 版本开始，生效模式由重启生效变更为立即生效。</li></ul> |
| [server_cpu_quota_max](100.system-configuration-items/300.cluster-level-configuration-items/20200.server_cpu_quota_max.md)             | <ul><li>对于 V4.2.x 版本，暂未更改生效模式。</li> <li>对于 V4.3.x 版本，从 V4.3.0 版本开始，生效模式由重启生效变更为立即生效。</li></ul> |

### 更改默认值的配置项

下表中列出了更改默认值的配置项。

| 配置项名                            | 描述                                      |
|------------------------------------|-------------------------------------------|
| [memstore_limit_percentage](100.system-configuration-items/300.cluster-level-configuration-items/14100.memstore_limit_percentage.md)           | <ul><li>对于 V4.2.x 版本，从 V4.2.3 版本开始，默认值由 50 调整为 0。</li> <li>对于 V4.3.x 版本，从 V4.3.0 版本开始，默认值由 50 调整为 0。</li></ul>|
| [range_optimizer_max_mem_size](100.system-configuration-items/400.tenant-level-configuration-items/7800.range_optimizer_max_mem_size.md)        | <ul><li>对于 V4.2.x 版本，从 V4.2.2 版本开始，默认值由 128 M 调整为 0M。</li> <li>对于 V4.3.x 版本，从 V4.3.0 版本开始，默认值由 128 M 调整为 0M。</li></ul>|
| [ls_gc_delay_time](100.system-configuration-items/400.tenant-level-configuration-items/5500.ls_gc_delay_time.md)                                | <ul><li>对于 V4.2.x 版本，从 V4.2.1 BP1 版本开始，默认值由 1h 调整为 0s。</li> <li>对于 V4.3.x 版本，从 V4.3.0 版本开始，默认值由 1h 调整为 0s。</li></ul> |
| [enable_monotonic_weak_read](100.system-configuration-items/400.tenant-level-configuration-items/2800.enable_monotonic_weak_read.md)            | 从 V4.2.1 版本开始，默认值由 true 调整为 false。|
| [location_refresh_thread_count](100.system-configuration-items/300.cluster-level-configuration-items/12600.location_refresh_thread_count.md)    | 从 V4.2.0 版本开始，默认值由 4 调整为 2。|
| [enable_record_trace_id](100.system-configuration-items/300.cluster-level-configuration-items/8100.enable_record_trace_id.md)                   | 从 V4.2.0 版本开始，默认值由 true 调整为 false。|
| [plan_cache_evict_interval](100.system-configuration-items/300.cluster-level-configuration-items/17300.plan_cache_evict_interval.md)            | 从 V4.2.0 版本开始，默认值由 1s 调整为 5s。|
| [tenant_task_queue_size](100.system-configuration-items/300.cluster-level-configuration-items/24100.tenant_task_queue_size.md)                  | 从 V4.1.0 版本开始，默认值由 65536 调整为 16384。|
| [server_cpu_quota_min](100.system-configuration-items/300.cluster-level-configuration-items/20300.server_cpu_quota_min.md)                      | <ul><li>从 V4.2.1 版本开始，默认值由 1 调整为 0。</li> <li>从 V4.0.0 版本开始，默认值由 2.5 调整为 1。</li></ul>|
| [writing_throttling_maximum_duration](100.system-configuration-items/400.tenant-level-configuration-items/8900.writing_throttling_maximum_duration.md)     | 从 V4.0.0 版本开始，默认值由 1h 调整为 2h。|
| [writing_throttling_trigger_percentage](100.system-configuration-items/400.tenant-level-configuration-items/9000.writing_throttling_trigger_percentage.md) | 从 V4.0.0 版本开始，默认值由 100 调整为 60。|
| [freeze_trigger_percentage](100.system-configuration-items/400.tenant-level-configuration-items/3400.freeze_trigger_percentage.md)              | 从 V4.0.0 版本开始，默认值由 70 调整为 20。|

### 更改取值范围的配置项

下表中列出了更改取值范围的配置项。

| 配置项名                          | 描述                                      |
|----------------------------------|-------------------------------------------|
| [large_query_threshold](100.system-configuration-items/300.cluster-level-configuration-items/11400.large_query_threshold.md)            |<ul><li>对于 V4.2.x 版本，从 V4.2.3 版本开始，取值范围由 [1ms, +∞) 变更为 [0ms, +∞)。</li> <li>对于 V4.3.x 版本，从 V4.3.0 版本开始，取值范围由 [1ms, +∞) 变更为 [0ms, +∞)。</li></ul>|
| [memstore_limit_percentage](100.system-configuration-items/300.cluster-level-configuration-items/14100.memstore_limit_percentage.md)     |<ul><li>对于 V4.2.x 版本，从 V4.2.3 版本开始，取值范围由 (0, 100) 调整为 [0, 100)。</li> <li>对于 V4.3.x 版本，从 V4.3.0 版本开始，取值范围由 (0, 100) 调整为 [0, 100)。</li></ul>|
| [range_optimizer_max_mem_size](100.system-configuration-items/400.tenant-level-configuration-items/7800.range_optimizer_max_mem_size.md) |<ul><li>对于 V4.2.x 版本，从 V4.2.2 版本开始，取值范围由 [16M，1G] 调整为 [0M，+∞)。</li> <li>对于 V4.3.x 版本，从 V4.3.0 版本开始，取值范围由 [16M，1G] 调整为 [0M，+∞)。</li></ul>|
| [job_queue_processes](100.system-configuration-items/400.tenant-level-configuration-items/3900.job_queue_processes.md)                   |<ul><li>对于 V4.2.x 版本，从 V4.2.1 BP1 版本开始，取值范围由 [0,1000] 调整为 [0,16384]。</li> <li>对于 V4.3.x 版本，从 V4.3.0 版本开始，取值范围由 [0,1000] 调整为 [0,16384]。</li></ul>|
| [memory_limit_percentage](100.system-configuration-items/300.cluster-level-configuration-items/13900.memory_limit_percentage.md)         |从 V4.2.1 版本开始，取值范围由 [10, 90] 调整为 [10, 95]。|
| [cpu_quota_concurrency](100.system-configuration-items/400.tenant-level-configuration-items/1900.cpu_quota_concurrency.md)               |从 V4.2.0 版本开始，取值范围由 [1,10] 调整为 [1,20]。|
| [memory_limit](100.system-configuration-items/300.cluster-level-configuration-items/13800.memory_limit.md)                               |从 V4.1.0 版本开始，取值范围由 [4G, +∞) 调整为 [1G, +∞)。|
| [server_cpu_quota_min](100.system-configuration-items/300.cluster-level-configuration-items/20300.server_cpu_quota_min.md)               |<ul><li>从 V4.2.1 版本开始，取值范围由 [1，16] 调整为 [0, 16]。</li> <li>从 V4.0.0 版本开始，取值范围由 [0，16] 调整为 [1, 16]。</li></ul>|

### 新增的配置项

下表中列出了在 V4.x 版本中新增的配置项。

| 配置项名                                                                                                       | 引入版本    | 描述                             |
|---------------------------------------------------------------------------------------------------------------|-------------|---------------------------------|
| [replica_parallel_migration_mode](100.system-configuration-items/400.tenant-level-configuration-items/7820.replica_parallel_migration_mode.md) | V4.2.5  | 控制日志流副本并行迁移功能模式。|
| [sts_credential](100.system-configuration-items/400.tenant-level-configuration-items/8220.sts_credential.md)                       | V4.2.5  | 用于访问 OCP 提供的 STS 服务。|
| [enable_lock_priority](100.system-configuration-items/400.tenant-level-configuration-items/2750.enable_lock_priority.md)           | V4.2.5  | 锁优先级开关。|
| [unit_gc_wait_time](100.system-configuration-items/300.cluster-level-configuration-items/24830.unit_gc_wait_time.md)               | V4.2.5  | 指定 unit gc 最大等待时长。 |
| [query_memory_limit_percentage](100.system-configuration-items/400.tenant-level-configuration-items/7490.query_memory_limit_percentage.md) | V4.2.5 | 指定单个 SQL 可使用的租户内存百分比。|
| [kv_group_commit_batch_size](100.system-configuration-items/400.tenant-level-configuration-items/9500.kv_group_commit_batch_size.md) | V4.2.5| 指定 obkv 组提交功能 batch 操作的大小。 |
| [kv_group_commit_rw_mode](100.system-configuration-items/400.tenant-level-configuration-items/9600.kv_group_commit_rw_mode.md)     |  V4.2.5 | 在组提交开启的情况下，指定支持组提交的操作类型。 |
| [recover_table_concurrency](100.system-configuration-items/400.tenant-level-configuration-items/9100.recover_table_concurrency.md) | V4.2.5  | 设置级恢复的跨租户导表阶段，允许并发恢复的最大表数。   |
| [audit_log_buffer_size](100.system-configuration-items/400.tenant-level-configuration-items/210.audit_log_buffer_size.md)          |  V4.2.4  | 控制异步写日志时的 buffer 大小。                    |
| [audit_log_compression](100.system-configuration-items/400.tenant-level-configuration-items/220.audit_log_compression.md)          |  V4.2.4  | 设置审计日志使用的压缩算法。                     |
| [audit_log_enable](100.system-configuration-items/400.tenant-level-configuration-items/230.audit_log_enable.md)                    |  V4.2.4  | 控制审计功能是否开启。                     |
| [audit_log_format](100.system-configuration-items/400.tenant-level-configuration-items/240.audit_log_format.md)                    |  V4.2.4  | 配置审计日志的文件格式。                     |
| [audit_log_max_size](100.system-configuration-items/400.tenant-level-configuration-items/250.audit_log_max_size.md)                |  V4.2.4  | 控制单个 OBServer 上审计日志的最大保存量。                     |
| [audit_log_path](100.system-configuration-items/400.tenant-level-configuration-items/260.audit_log_path.md)                        |  V4.2.4  | 配置审计日志的输出目录。                     |
| [audit_log_prune_seconds](100.system-configuration-items/400.tenant-level-configuration-items/270.audit_log_prune_seconds.md)      |  V4.2.4  | 控制审计日志的最大保存时间。                     |
| [audit_log_query_sql](100.system-configuration-items/400.tenant-level-configuration-items/280.audit_log_query_sql.md)              |  V4.2.4  | 控制如何记录审计记录中的 SQL 语句。                     |
| [audit_log_rotate_on_size](100.system-configuration-items/400.tenant-level-configuration-items/290.audit_log_rotate_on_size.md)    |  V4.2.4  | 控制审计记录单个文件的大小。                     |
| [audit_log_strategy](100.system-configuration-items/400.tenant-level-configuration-items/295.audit_log_strategy.md)                |  V4.2.4  | 控制审计记录写文件策略。                     |
| [alert_log_level](100.system-configuration-items/300.cluster-level-configuration-items/100.alert_log_level.md)                     |  <ul><li>对于 V4.2.x 版本，从 V4.2.3 版本开始引入。</li> <li>对于 V4.3.x 版本，从 V4.3.2 版本开始引入。</li></ul>                  | 设置警告日志的级别。 |
| [data_disk_write_limit_percentage](100.system-configuration-items/300.cluster-level-configuration-items/4300.data_disk_write_limit_percentage.md) | <ul><li>对于 V4.2.x 版本，从 V4.2.3 版本开始引入。</li> <li>对于 V4.3.x 版本，从 V4.3.1 版本开始引入。</li></ul>     | 控制数据盘写入限制的百分比。 |
| [enable_global_background_resource_isolation](100.system-configuration-items/300.cluster-level-configuration-items/7000.enable_global_background_resource_isolation.md) | <ul><li>对于 V4.2.x 版本，从 V4.2.3 版本开始引入。</li> <li>对于 V4.3.x 版本，从 V4.3.2 版本开始引入。</li></ul> | 控制是否开启全局前后台资源隔离功能。 |
| [global_background_cpu_quota](100.system-configuration-items/300.cluster-level-configuration-items/10100.global_background_cpu_quota.md)          |  <ul><li>对于 V4.2.x 版本，从 V4.2.3 版本开始引入。</li> <li>对于 V4.3.x 版本，从 V4.3.2 版本开始引入。</li></ul>           | 控制在开启全局前后台资源隔离时后台任务的 CPU 核数。 |
| [syslog_compress_func](100.system-configuration-items/300.cluster-level-configuration-items/22400.syslog_compress_func.md)                        | <ul><li>对于 V4.2.x 版本，从 V4.2.3 版本开始引入。</li> <li>对于 V4.3.x 版本，从 V4.3.1 版本开始引入。</li></ul>             | 设置系统日志的压缩算法。 |
| [syslog_disk_size](100.system-configuration-items/300.cluster-level-configuration-items/22500.syslog_disk_size.md)                                | <ul><li>对于 V4.2.x 版本，从 V4.2.3 版本开始引入。</li> <li>对于 V4.3.x 版本，从 V4.3.1 版本开始引入。</li></ul>             | 设置系统日志的磁盘空间上限。 |
| [syslog_file_uncompressed_count](100.system-configuration-items/300.cluster-level-configuration-items/22600.syslog_file_uncompressed_count.md)    | <ul><li>对于 V4.2.x 版本，从 V4.2.3 版本开始引入。</li> <li>对于 V4.3.x 版本，从 V4.3.1 版本开始引入。</li></ul>             | 设置系统日志不压缩的文件数量。 |
| [choose_migration_source_policy](100.system-configuration-items/400.tenant-level-configuration-items/700.choose_migration_source_policy.md)       | <ul><li>对于 V4.2.1 版本，从 V4.2.1 BP7 版本开始引入；对于 V4.2.x 其他版本，从 V4.2.3 版本开始引入。</li> <li>对于 V4.3.x 版本，从 V4.3.2 版本开始引入。</li></ul>  | 指定迁移选择源端副本的优先策略。 |
| [enable_kv_group_commit](100.system-configuration-items/400.tenant-level-configuration-items/2600.enable_kv_group_commit.md)                      | V4.2.3            | 控制是否需要开启组提交功能。 |
| [lob_enable_block_cache_threshold](100.system-configuration-items/400.tenant-level-configuration-items/4400.lob_enable_block_cache_threshold.md)  | <ul><li>对于 V4.2.x 版本，从 V4.2.3 版本开始引入。</li> <li>对于 V4.3.x 版本，从 V4.3.2 版本开始引入。</li></ul>             | 设置 OUTROW 存储的 LOB 查询缓存的阈值。 |
| [strict_check_os_params](100.system-configuration-items/300.cluster-level-configuration-items/21600.strict_check_os_params.md)                    | V4.2.2            | 控制是否开启检查 OS 配置参数的功能开关。 |
| [log_storage_compress_all](100.system-configuration-items/400.tenant-level-configuration-items/5100.log_storage_compress_all.md)                  | <ul><li>对于 V4.2.x 版本，从 V4.2.2 版本开始引入。</li> <li>对于 V4.3.x 版本，从 V4.3.1 版本开始引入。</li></ul> | 控制是否开启 clog 存储压缩功能。|
| [log_storage_compress_func](100.system-configuration-items/400.tenant-level-configuration-items/5200.log_storage_compress_func.md)                | <ul><li>对于 V4.2.x 版本，从 V4.2.2 版本开始引入。</li> <li>对于 V4.3.x 版本，从 V4.3.1 版本开始引入。</li></ul>            | 设置 clog 存储压缩的压缩算法。 |
| [sql_protocol_min_tls_version](100.system-configuration-items/300.cluster-level-configuration-items/21000.sql_protocol_min_tls_version.md)        | V4.2.1            | 设置 SQL 语句进行 SSL 连接时所使用的 SSL/TLS 协议的最低版本号。 |
| [compaction_dag_cnt_limit](100.system-configuration-items/400.tenant-level-configuration-items/1000.compaction_dag_cnt_limit.md)                  | V4.2.1            | 配置 Compaction DAG 队列上 DAG 数量的上限值。 |
| [compaction_schedule_tablet_batch_cnt](100.system-configuration-items/400.tenant-level-configuration-items/1400.compaction_schedule_tablet_batch_cnt.md) | V4.2.1     | 配置 Compaction 分批调度时，每个批次调度的分区数的上限值。|
| [enable_transfer](100.system-configuration-items/400.tenant-level-configuration-items/3100.enable_transfer.md)                                    | V4.2.1            | 控制是否允许在租户内进行 Transfer。 |
| [ttl_thread_score](100.system-configuration-items/400.tenant-level-configuration-items/8600.ttl_thread_score.md)                                  | V4.2.1            | 设置 TTL 任务使用线程时间片的权重值。  |
| [local_ip](100.system-configuration-items/300.cluster-level-configuration-items/11800.local_ip.md)                                                | V4.2.0           | 部署集群时指定的安装 ObServer 机器的 IP 地址。                     |
| [observer_id](100.system-configuration-items/300.cluster-level-configuration-items/16900.observer_id.md)                                          | V4.2.0           | 集群中 RS 分配给 OBServer 节点的唯一标识。 |
| [standby_fetch_log_bandwidth_limit](100.system-configuration-items/300.cluster-level-configuration-items/21400.standby_fetch_log_bandwidth_limit.md)  | V4.2.0       | 设置备租户所在集群中的所有 Server 从主租户同步日志的流量总和每秒可占用的最大带宽。 |
| [storage_meta_cache_priority](100.system-configuration-items/300.cluster-level-configuration-items/21500.storage_meta_cache_priority.md)           | V4.2.0          | 控制 kvcache 中存储 Meta Cache 的优先级。 |
| [archive_lag_target](100.system-configuration-items/400.tenant-level-configuration-items/200.archive_lag_target.md)                                | V4.2.0          | 控制租户日志归档延迟的时间。 |
| [log_disk_throttling_maximum_duration](100.system-configuration-items/400.tenant-level-configuration-items/4600.log_disk_throttling_maximum_duration.md)   | V4.2.0  | 调整触发日志限速后，日志盘的最大可用时间。  |
| [log_disk_throttling_percentage](100.system-configuration-items/400.tenant-level-configuration-items/4700.log_disk_throttling_percentage.md)       | V4.2.0          | 触发日志写入限速的不可回收日志盘空间占比。 |
| [ls_gc_delay_time](100.system-configuration-items/400.tenant-level-configuration-items/5500.ls_gc_delay_time.md)                                   | V4.2.0          | 配置租户日志流延迟删除的时间。 |
| [partition_balance_schedule_interval](100.system-configuration-items/400.tenant-level-configuration-items/6900.partition_balance_schedule_interval.md)  | V4.2.0     | 设置分区均衡调度周期。 |
| [range_optimizer_max_mem_size](100.system-configuration-items/400.tenant-level-configuration-items/7800.range_optimizer_max_mem_size.md)           | V4.2.0          | 限制 Query Range 模块使用的内存。 |
| [standby_db_fetch_log_rpc_timeout](100.system-configuration-items/400.tenant-level-configuration-items/8100.standby_db_fetch_log_rpc_timeout.md)   | V4.2.0          | 设置备库拉取日志 RPC 超时时间，以控制备库日志传输服务检测主库某台 Server 不可用并切换到其他 Server。 |
| [standby_db_preferred_upstream_log_region](100.system-configuration-items/400.tenant-level-configuration-items/8200.standby_db_preferred_upstream_log_region.md) | V4.1.0| 配置物理备库场景下，备租户同步上游日志的首选 Region。 |
| [log_storage_warning_tolerance_time](100.system-configuration-items/300.cluster-level-configuration-items/13100.log_storage_warning_tolerance_time.md)  | V4.1.0     | 设置从日志盘 IO 失败到磁盘被标记为坏盘时触发切主的时间。 |
| [ob_startup_mode](100.system-configuration-items/300.cluster-level-configuration-items/16700.ob_startup_mode.md)                                   | V4.1.0          | 设置 OBServer 节点的启动模式，仅支持在第一次启动时修改。 |
| [sql_net_thread_count](100.system-configuration-items/300.cluster-level-configuration-items/20900.sql_net_thread_count.md)                         | V4.1.0          | 设置 MySQL 集群 IO 线程的个数，即 `global_sql_nio_server` 线程的个数。 |
| [arbitration_timeout](100.system-configuration-items/400.tenant-level-configuration-items/100.arbitration_timeout.md)                              | V4.1.0          | 设置触发自动降级的超时时间。 |
| [dump_data_dictionary_to_log_interval](100.system-configuration-items/400.tenant-level-configuration-items/2300.dump_data_dictionary_to_log_interval.md)  | V4.1.0   | 控制租户数据字典持久化的周期。 |
| [enable_user_defined_rewrite_rules](100.system-configuration-items/400.tenant-level-configuration-items/3200.enable_user_defined_rewrite_rules.md)  | V4.1.0         | 控制用户自定义规则是否开启的开关。  |
| [log_transport_compress_all](100.system-configuration-items/400.tenant-level-configuration-items/5300.log_transport_compress_all.md)                | V4.1.0         | 对日志传输是否使用压缩。  |
| [log_transport_compress_func](100.system-configuration-items/400.tenant-level-configuration-items/5400.log_transport_compress_func.md)              | V4.1.0         | 指定日志传输的压缩算法。 |
| [rpc_memory_limit_percentage](100.system-configuration-items/400.tenant-level-configuration-items/7900.rpc_memory_limit_percentage.md)              | V4.1.0         | 设置租户中 RPC 的最大内存占租户总内存的百分比。 |
| [tenant_sql_login_thread_count](100.system-configuration-items/400.tenant-level-configuration-items/8400.tenant_sql_login_thread_count.md)          | V4.1.0         | 设置 MySQL 租户登录的线程个数，即 `mysql_queue` 线程的个数。  |
| [tenant_sql_net_thread_count](100.system-configuration-items/400.tenant-level-configuration-items/8500.tenant_sql_net_thread_count.md)              | V4.1.0         | MySQL 租户 IO 线程的个数，即 `sql_nio_server` 线程的个数。   |
| [log_disk_percentage](100.system-configuration-items/300.cluster-level-configuration-items/12900.log_disk_percentage.md)                            | V4.0.0         | 设置 Redo 日志占用其所在磁盘总空间的百分比。  |
| [log_disk_size](100.system-configuration-items/300.cluster-level-configuration-items/13000.log_disk_size.md)                                        | V4.0.0        | 设置 Redo 日志磁盘的大小，即本 OBServer 可以使用的日志盘总空间大小。 |
| [ha_high_thread_score](100.system-configuration-items/400.tenant-level-configuration-items/3500.ha_high_thread_score.md)                            | V4.0.0        | 设置高可用高优先级线程的当前工作线程数。 |
| [ha_low_thread_score](100.system-configuration-items/400.tenant-level-configuration-items/3600.ha_low_thread_score.md)                              | V4.0.0        | 设置高可用低优先级线程的当前工作线程数。 |
| [ha_mid_thread_score](100.system-configuration-items/400.tenant-level-configuration-items/3700.ha_mid_thread_score.md)                              | V4.0.0        | 设置高可用中优先级线程的当前工作线程数。 |

### 废弃的配置项

下表中列出了在 V4.x 版本中被废弃的配置项。

| 配置项名                                                                                                                                                      | 描述                      |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
| [enable_kv_group_commit](100.system-configuration-items/400.tenant-level-configuration-items/2600.enable_kv_group_commit.md)   | 功能优化调整，从V4.2.5 版本开始删除。对于 V4.2.5 之后版本，可以使用配置项 [kv_group_commit_batch_size](100.system-configuration-items/400.tenant-level-configuration-items/9500.kv_group_commit_batch_size.md) 和 [kv_group_commit_rw_mode](100.system-configuration-items/400.tenant-level-configuration-items/9600.kv_group_commit_rw_mode.md) 来控制组提交功能。 |
| [global_write_halt_residual_memory](100.system-configuration-items/300.cluster-level-configuration-items/10400.global_write_halt_residual_memory.md)         | 相关功能不再使用，从 V4.2.0 版本开始删除。 |
| [max_px_worker_count](100.system-configuration-items/300.cluster-level-configuration-items/13400.max_px_worker_count.md)                                     | 相关功能不再使用，从 V4.2.0 版本开始删除。 |
| [plan_cache_high_watermark](100.system-configuration-items/300.cluster-level-configuration-items/17400.plan_cache_high_watermark.md)                         | 相关功能一直未支持，从 V4.2.0 版本开始删除。|
| [plan_cache_low_watermark](100.system-configuration-items/300.cluster-level-configuration-items/17500.plan_cache_low_watermark.md)                           | 相关功能一直未支持，从 V4.2.0 版本开始删除。|
| [rootservice_memory_limit](100.system-configuration-items/300.cluster-level-configuration-items/18800.rootservice_memory_limit.md)                           | 架构升级变更，从 V4.2.0 版本开始删除。     |
| [system_trace_level](100.system-configuration-items/300.cluster-level-configuration-items/23100.system_trace_level.md)                                       | 实现逻辑变更，该配置项已不适用，从 V4.2.0 版本开始删除。|
| [token_reserved_percentage](100.system-configuration-items/300.cluster-level-configuration-items/24200.token_reserved_percentage.md)                         | 实现逻辑变更，该配置项已不适用，从 V4.2.0 版本开始删除。|
| [trace_log_sampling_interval](100.system-configuration-items/300.cluster-level-configuration-items/24300.trace_log_sampling_interval.md)                     | 实现逻辑变更，该配置项已不适用，从 V4.2.0 版本开始删除。|
| [io_category_config](100.system-configuration-items/400.tenant-level-configuration-items/3800.io_category_config.md)                                         | 实现逻辑变更，该配置项已不适用，从 V4.2.0 版本开始删除。|
| [auto_broadcast_location_cache_rate_limit](100.system-configuration-items/300.cluster-level-configuration-items/400.auto_broadcast_location_cache_rate_limit.md) | 架构升级变更，从 V4.0.0 版本开始删除。|
| [auto_leader_switch_interval](100.system-configuration-items/300.cluster-level-configuration-items/500.auto_leader_switch_interval.md)                       | 架构升级变更，从 V4.0.0 版本开始删除。|
| [auto_refresh_location_cache_rate_limit](100.system-configuration-items/300.cluster-level-configuration-items/600.auto_refresh_location_cache_rate_limit.md) | 架构升级变更，从 V4.0.0 版本开始删除。|
| [backup_backup_dest](100.system-configuration-items/300.cluster-level-configuration-items/800.backup_backup_dest.md)                                         | 相关功能不再支持，从 V4.0.0 版本开始删除。 |
| [backup_backup_dest_option](100.system-configuration-items/300.cluster-level-configuration-items/900.backup_backup_dest_option.md)                           | 相关功能不再支持，从 V4.0.0 版本开始删除。|
| [backup_dest_option](100.system-configuration-items/300.cluster-level-configuration-items/1200.backup_dest_option.md)                                        | 架构升级变更，从 V4.0.0 版本开始删除。|
| [backup_concurrency](100.system-configuration-items/300.cluster-level-configuration-items/1000.backup_concurrency.md)                                        | 架构升级变更，从 V4.0.0 版本开始删除。从 V4.0.0 版本开始新增配置项 [ha_low_thread_score](100.system-configuration-items/400.tenant-level-configuration-items/3600.ha_low_thread_score.md) 替代该配置项。|
| [backup_dest](100.system-configuration-items/300.cluster-level-configuration-items/1100.backup_dest.md)                                                      | 架构升级变更，从 V4.0.0 版本开始删除。|
| [backup_log_archive_option](100.system-configuration-items/300.cluster-level-configuration-items/1300.backup_log_archive_option.md)                          | 架构升级变更，从 V4.0.0 版本开始删除。|
| [backup_net_limit](100.system-configuration-items/300.cluster-level-configuration-items/1400.backup_net_limit.md)                                            | 架构升级变更，从 V4.0.0 版本开始删除。|
| [backup_recovery_window](100.system-configuration-items/300.cluster-level-configuration-items/1500.backup_recovery_window.md)                                | 架构升级变更，从 V4.0.0 版本开始删除。|
| [backup_region](100.system-configuration-items/300.cluster-level-configuration-items/1600.backup_region.md)                                                  | 架构升级变更，从 V4.0.0 版本开始删除。|
| [backup_zone](100.system-configuration-items/300.cluster-level-configuration-items/1700.backup_zone.md)                                                      | 架构升级变更，从 V4.0.0 版本开始删除。|
| [balance_blacklist_failure_threshold](100.system-configuration-items/300.cluster-level-configuration-items/1800.balance_blacklist_failure_threshold.md)      | 架构升级变更，从 V4.0.0 版本开始删除。|
| [balance_blacklist_retry_interval](100.system-configuration-items/300.cluster-level-configuration-items/1900.balance_blacklist_retry_interval.md)            | 架构升级变更，从 V4.0.0 版本开始删除。|
| [balancer_emergency_percentage](100.system-configuration-items/300.cluster-level-configuration-items/2000.balancer_emergency_percentage.md)                  | 架构升级变更，从 V4.0.0 版本开始删除。|
| [balancer_timeout_check_interval](100.system-configuration-items/300.cluster-level-configuration-items/2300.balancer_timeout_check_interval.md)              | 架构升级变更，从 V4.0.0 版本开始删除。|
| [clog_disk_utilization_threshold](100.system-configuration-items/300.cluster-level-configuration-items/3100.clog_disk_utilization_threshold.md)              | 架构升级变更，从 V4.0.0 版本开始删除。从 V4.0.0 版本开始新增配置项 [log_disk_utilization_threshold](100.system-configuration-items/400.tenant-level-configuration-items/4900.log_disk_utilization_threshold.md) 替代该配置项。| 
| [clog_expire_days](100.system-configuration-items/300.cluster-level-configuration-items/3200.clog_expire_days.md)                                            | 架构升级变更，从 V4.0.0 版本开始删除。|
| [clog_cache_priority](100.system-configuration-items/300.cluster-level-configuration-items/2900.clog_cache_priority.md)                                      | 架构升级变更，从 V4.0.0 版本开始删除。|
| [clog_disk_usage_limit_percentage](100.system-configuration-items/300.cluster-level-configuration-items/3000.clog_disk_usage_limit_percentage.md)            | 架构升级变更，从 V4.0.0 版本开始删除。|
| [clog_transport_compress_func](100.system-configuration-items/300.cluster-level-configuration-items/3400.clog_transport_compress_func.md)                    | V4.0.0 版本暂未支持该功能，从 V4.0.0 版本开始删除。从 V4.1.0 版本开始新增配置项 [log_transport_compress_func](100.system-configuration-items/400.tenant-level-configuration-items/5400.log_transport_compress_func.md) 替代该配置项。 |
| [clog_max_unconfirmed_log_count](100.system-configuration-items/400.tenant-level-configuration-items/800.clog_max_unconfirmed_log_count.md)                  | 实现逻辑变更，相关功能不在适用，从 V4.0.0 版本开始删除。|
| [clog_persistence_compress_func](100.system-configuration-items/400.tenant-level-configuration-items/900.clog_persistence_compress_func.md)                  | 相关功能在 V4.0.0 版本未支持，从 V4.0.0 版本开始删除。从 V4.2.1 版本开始（不含 V4.3.0 版本）重新支持，新增 [log_storage_compress_func](100.system-configuration-items/400.tenant-level-configuration-items/5200.log_storage_compress_func.md) 替代该配置项。|
| [cpu_reserved](100.system-configuration-items/300.cluster-level-configuration-items/3900.cpu_reserved.md)                                                    | 架构升级变更，从 V4.0.0 版本开始删除。|
| [data_copy_concurrency](100.system-configuration-items/300.cluster-level-configuration-items/4000.data_copy_concurrency.md)                                  | 实现逻辑变更，从 V4.0.0 版本开始删除。从 V4.0.0 版本开始新增配置项 [ha_high_thread_score](100.system-configuration-items/400.tenant-level-configuration-items/3500.ha_high_thread_score.md) 替代该配置项。|
| [default_transport_compress_func](100.system-configuration-items/300.cluster-level-configuration-items/5500.default_transport_compress_func.md)              | 架构升级变更，从 V4.0.0 版本开始删除。|
| [election_cpu_quota](100.system-configuration-items/300.cluster-level-configuration-items/6100.election_cpu_quota.md)                                        | 架构升级变更，从 V4.0.0 版本开始删除。|
| [election_blacklist_interval](100.system-configuration-items/300.cluster-level-configuration-items/6000.election_blacklist_interval.md)                      | 架构升级变更，从 V4.0.0 版本开始删除。|
| [enable_auto_refresh_location_cache](100.system-configuration-items/300.cluster-level-configuration-items/6500.enable_auto_refresh_location_cache.md)        | 架构升级变更，从 V4.0.0 版本开始删除。|
| [enable_auto_leader_switch](100.system-configuration-items/300.cluster-level-configuration-items/6400.enable_auto_leader_switch.md)                          | 架构升级变更，从 V4.0.0 版本开始删除。|
| [enable_clog_persistence_compress](100.system-configuration-items/400.tenant-level-configuration-items/2400.enable_clog_persistence_compress.md)             | 相关功能在 V4.0.0 版本未支持，从 V4.0.0 版本开始删除。从 V4.2.1 版本开始（不含 V4.3.0 版本）重新支持，新增 [log_storage_compress_all](100.system-configuration-items/400.tenant-level-configuration-items/5100.log_storage_compress_all.md) 替代该配置项。 |
| [enable_global_freeze_trigger](100.system-configuration-items/300.cluster-level-configuration-items/7100.enable_global_freeze_trigger.md)                    | 架构升级变更，从 V4.0.0 版本开始删除。|
| [enable_log_archive](100.system-configuration-items/300.cluster-level-configuration-items/7200.enable_log_archive.md)                                        | 架构升级变更，从 V4.0.0 版本开始删除。 |
| [enable_election_group](100.system-configuration-items/300.cluster-level-configuration-items/6900.enable_election_group.md)                                  | 架构升级变更，从 V4.0.0 版本开始删除。 |
| [enable_merge_by_turn](100.system-configuration-items/300.cluster-level-configuration-items/7500.enable_merge_by_turn.md)                                    | 相关功能不再支持，从 V4.0.0 版本开始删除。|
| [enable_manual_merge](100.system-configuration-items/300.cluster-level-configuration-items/7400.enable_manual_merge.md)                                      | 相关功能不再支持，从 V4.0.0 版本开始删除。|
| [enable_one_phase_commit](100.system-configuration-items/300.cluster-level-configuration-items/7800.enable_one_phase_commit.md)                              | 实现逻辑变更，相应功能不再适用，从 V4.0.0 版本开始删除。 |
| [enable_pg](100.system-configuration-items/300.cluster-level-configuration-items/8000.enable_pg.md)                                                          | 架构升级变更，从 V4.0.0 版本开始删除。|
| [enable_separate_sys_clog](100.system-configuration-items/300.cluster-level-configuration-items/8600.enable_separate_sys_clog.md)                            | 相关功能一直未生效，从 V4.0.0 版本开始删除。|
| [enable_smooth_leader_switch](100.system-configuration-items/300.cluster-level-configuration-items/8700.enable_smooth_leader_switch.md)                      | 架构升级变更，从 V4.0.0 版本开始删除。|
| [enable_rootservice_standalone](100.system-configuration-items/300.cluster-level-configuration-items/8500.enable_rootservice_standalone.md)                  | 架构升级变更，从 V4.0.0 版本开始删除。|
| [fast_recovery_concurrency](100.system-configuration-items/300.cluster-level-configuration-items/9600.fast_recovery_concurrency.md)                          | 实现逻辑变更，从 V4.0.0 版本开始删除。从 V4.0.0 版本开始新增配置项 [ha_high_thread_score](100.system-configuration-items/400.tenant-level-configuration-items/3500.ha_high_thread_score.md) 替代该配置项。|
| [flush_log_at_trx_commit](100.system-configuration-items/300.cluster-level-configuration-items/9700.flush_log_at_trx_commit.md)                              | 使用率较低，从 V4.0.0 版本开始删除。|
| [gc_wait_archive](100.system-configuration-items/300.cluster-level-configuration-items/9900.gc_wait_archive.md)                                              | 架构升级变更，从 V4.0.0 版本开始删除。  |
| [global_index_build_single_replica_timeout](100.system-configuration-items/300.cluster-level-configuration-items/10200.global_index_build_single_replica_timeout.md) | 实现逻辑变更，相应功能不再适用，从 V4.0.0 版本开始删除。 |
| [global_major_freeze_residual_memory](100.system-configuration-items/300.cluster-level-configuration-items/10300.global_major_freeze_residual_memory.md)      | 使用率较低，从 V4.0.0 版本开始删除。 |
| [get_leader_candidate_rpc_timeout](100.system-configuration-items/300.cluster-level-configuration-items/10000.get_leader_candidate_rpc_timeout.md)            | 架构升级变更，从 V4.0.0 版本开始删除。|
| [ignore_replica_checksum_error](100.system-configuration-items/300.cluster-level-configuration-items/10700.ignore_replica_checksum_error.md)                  | 不建议使用，从 V4.0.0 版本开始删除。|
| [index_clog_cache_priority](100.system-configuration-items/300.cluster-level-configuration-items/11100.index_clog_cache_priority.md)                          | 架构升级变更，从 V4.0.0 版本开始删除。|
| [index_info_block_cache_priority](100.system-configuration-items/300.cluster-level-configuration-items/11200.index_info_block_cache_priority.md)              | 架构升级变更，从 V4.0.0 版本开始删除。|
| [index_cache_priority](100.system-configuration-items/300.cluster-level-configuration-items/11000.index_cache_priority.md)                                    | 架构升级变更，从 V4.0.0 版本开始删除。|
| [ilog_index_expire_time](100.system-configuration-items/300.cluster-level-configuration-items/10800.ilog_index_expire_time.md)                                | 架构升级变更，从 V4.0.0 版本开始删除。|
| [location_cache_priority](100.system-configuration-items/300.cluster-level-configuration-items/12100.location_cache_priority.md)                              | 架构升级变更，从 V4.0.0 版本开始删除。|
| [location_cache_expire_time](100.system-configuration-items/300.cluster-level-configuration-items/12000.location_cache_expire_time.md)                        | 架构升级变更，从 V4.0.0 版本开始删除。|
| [log_archive_batch_buffer_limit](100.system-configuration-items/300.cluster-level-configuration-items/12700.log_archive_batch_buffer_limit.md)                | 架构升级变更，从 V4.0.0 版本开始删除。|
| [log_archive_checkpoint_interval](100.system-configuration-items/300.cluster-level-configuration-items/12800.log_archive_checkpoint_interval.md)              | 架构升级变更，从 V4.0.0 版本开始删除。从 V4.0.0 版本开始新增配置项 [archive_lag_target](100.system-configuration-items/400.tenant-level-configuration-items/200.archive_lag_target.md) 替代该配置项。|
| [max_kept_major_version_number](100.system-configuration-items/300.cluster-level-configuration-items/13300.max_kept_major_version_number.md)                  | 使用率较低，从 V4.0.0 版本开始删除。|
| [merge_stat_sampling_ratio](100.system-configuration-items/300.cluster-level-configuration-items/14200.merge_stat_sampling_ratio.md)                          | 实现方式变更，从 V4.0.0 版本开始删除。|
| [merge_thread_count](100.system-configuration-items/300.cluster-level-configuration-items/14300.merge_thread_count.md)                                        | 实现逻辑变更，从 V4.0.0 版本开始删除。从 V4.0.0 版本开始新增配置项 [compaction_low_thread_score](100.system-configuration-items/400.tenant-level-configuration-items/1200.compaction_low_thread_score.md) 替代该配置项。|
| [merger_completion_percentage](100.system-configuration-items/300.cluster-level-configuration-items/14400.merger_completion_percentage.md)                    | 使用率较低，从 V4.0.0 版本开始删除。|
| [merger_switch_leader_duration_time](100.system-configuration-items/300.cluster-level-configuration-items/14500.merger_switch_leader_duration_time.md)        | 相应功能不再支持，从 V4.0.0 版本开始删除。|
| [merger_warm_up_duration_time](100.system-configuration-items/300.cluster-level-configuration-items/14600.merger_warm_up_duration_time.md)                    | 架构升级变更，从 V4.0.0 版本开始删除。|
| [migrate_concurrency](100.system-configuration-items/300.cluster-level-configuration-items/14800.migrate_concurrency.md)                                      | 实现逻辑变更，从 V4.0.0 版本开始删除。从 V4.0.0 版本开始新增配置项 [ha_mid_thread_score](100.system-configuration-items/400.tenant-level-configuration-items/3700.ha_mid_thread_score.md) 替代该配置项。|
| [minor_deferred_gc_time](100.system-configuration-items/300.cluster-level-configuration-items/15100.minor_deferred_gc_time.md)                                | 不建议使用，从 V4.0.0 版本开始删除。|
| [minor_freeze_times](100.system-configuration-items/300.cluster-level-configuration-items/15200.minor_freeze_times.md)                                        | 与配置项 `major_compact_trigger` 的含义一致，从 V4.0.0 版本开始删除该配置项，统一使用配置项 `major_compact_trigger`。|
| [minor_merge_concurrency](100.system-configuration-items/300.cluster-level-configuration-items/15300.minor_merge_concurrency.md)                              | 实现逻辑变更，从 V4.0.0 版本开始删除。从 V4.0.0 版本开始新增配置项 [compaction_mid_thread_score](100.system-configuration-items/400.tenant-level-configuration-items/1300.compaction_mid_thread_score.md) 替代该配置项。|
| [minor_warm_up_duration_time](100.system-configuration-items/300.cluster-level-configuration-items/15400.minor_warm_up_duration_time.md)                      | 不建议使用，从 V4.0.0 版本开始删除。|
| [multiblock_read_gap_size](100.system-configuration-items/300.cluster-level-configuration-items/15500.multiblock_read_gap_size.md)                            | 架构升级变更，从 V4.0.0 版本开始删除。 |
| [multiblock_read_size](100.system-configuration-items/300.cluster-level-configuration-items/15600.multiblock_read_size.md)                                    | 架构升级变更，从 V4.0.0 版本开始删除。 |
| [ob_esi_rpc_port](100.system-configuration-items/300.cluster-level-configuration-items/16200.ob_esi_rpc_port.md)                                              | 相关功能不再支持，从 V4.0.0 版本开始删除。|
| [enable_ob_esi_process](100.system-configuration-items/300.cluster-level-configuration-items/7600.enable_ob_esi_process.md)                                   | 相关功能不再支持，从 V4.0.0 版本开始删除。 |
| [ob_esi_session_timeout](100.system-configuration-items/300.cluster-level-configuration-items/16300.ob_esi_session_timeout.md)                                | 相关功能不再支持，从 V4.0.0 版本开始删除。|
| [ob_esi_io_concurrency](100.system-configuration-items/300.cluster-level-configuration-items/15900.ob_esi_io_concurrency.md)                                  | 相关功能不再支持，从 V4.0.0 版本开始删除。|
| [ob_esi_memory_limit](100.system-configuration-items/300.cluster-level-configuration-items/16100.ob_esi_memory_limit.md)                                      | 相关功能不再支持，从 V4.0.0 版本开始删除。|
| [ob_esi_syslog_level](100.system-configuration-items/300.cluster-level-configuration-items/16400.ob_esi_syslog_level.md)                                      | 相关功能不再支持，从 V4.0.0 版本开始删除。|
| [ob_esi_max_syslog_file_count](100.system-configuration-items/300.cluster-level-configuration-items/16000.ob_esi_max_syslog_file_count.md)                    | 相关功能不再支持，从 V4.0.0 版本开始删除。|
| [ofs_list](100.system-configuration-items/300.cluster-level-configuration-items/17000.ofs_list.md)                                                            | 相应功能不再适用，从 V4.0.0 版本开始删除。|
| [partition_table_check_interval](100.system-configuration-items/300.cluster-level-configuration-items/17200.partition_table_check_interval.md)                | 架构升级变更，从 V4.0.0 版本开始删除。|
| [rebuild_replica_data_lag_threshold](100.system-configuration-items/300.cluster-level-configuration-items/17900.rebuild_replica_data_lag_threshold.md)        | 架构升级变更，从 V4.0.0 版本开始删除。 |
| [replica_safe_remove_time](100.system-configuration-items/300.cluster-level-configuration-items/18100.replica_safe_remove_time.md)                            | 架构升级变更，从 V4.0.0 版本开始删除。|
| [resource_soft_limit](100.system-configuration-items/300.cluster-level-configuration-items/18300.resource_soft_limit.md)                                      | 架构升级变更，从 V4.0.0 版本开始删除。|
| [restore_concurrency](100.system-configuration-items/300.cluster-level-configuration-items/18400.restore_concurrency.md)                                      | 实现逻辑变更，从 V4.0.0 版本开始删除。从 V4.0.0 版本开始新增配置项 [ha_high_thread_score](100.system-configuration-items/400.tenant-level-configuration-items/3500.ha_high_thread_score.md) 替代该配置项。|
| [row_purge_thread_count](100.system-configuration-items/300.cluster-level-configuration-items/19100.row_purge_thread_count.md)                                | 相关功能一直未支持，从 V4.0.0 版本开始删除。|
| [server_data_copy_out_concurrency](100.system-configuration-items/300.cluster-level-configuration-items/20500.server_data_copy_out_concurrency.md)            | 实现逻辑变更，从 V4.0.0 版本开始删除。从 V4.0.0 版本开始新增配置项 [ha_mid_thread_score](100.system-configuration-items/400.tenant-level-configuration-items/3700.ha_mid_thread_score.md) 替代该配置项。|
| [server_data_copy_in_concurrency](100.system-configuration-items/300.cluster-level-configuration-items/20400.server_data_copy_in_concurrency.md)              | 实现逻辑变更，从 V4.0.0 版本开始删除。从 V4.0.0 版本开始新增配置项 [ha_mid_thread_score](100.system-configuration-items/400.tenant-level-configuration-items/3700.ha_mid_thread_score.md) 替代该配置项。|
| [sql_audit_memory_limit](100.system-configuration-items/300.cluster-level-configuration-items/20700.sql_audit_memory_limit.md)                                | 实现逻辑变更，相应功能已不再适用，从 V4.0.0 版本开始删除。从 V4.0.0 版本开始新增变量 [ob_sql_audit_percentage](200.system-variable/300.global-system-variable/9400.ob_sql_audit_percentage-global.md) 替代该配置项。|
| [switchover_process_thread_count](100.system-configuration-items/300.cluster-level-configuration-items/21700.switchover_process_thread_count.md)              | 架构升级变更，从 V4.0.0 版本开始删除。|
| [sys_bkgd_io_high_percentage](100.system-configuration-items/300.cluster-level-configuration-items/21800.sys_bkgd_io_high_percentage.md)                      | 架构升级变更，从 V4.0.0 版本开始删除。|
| [sys_bkgd_io_low_percentage](100.system-configuration-items/300.cluster-level-configuration-items/21900.sys_bkgd_io_low_percentage.md)                        | 架构升级变更，从 V4.0.0 版本开始删除。|
| [sys_cpu_limit_trigger](100.system-configuration-items/300.cluster-level-configuration-items/22300.sys_cpu_limit_trigger.md)                                  | 架构升级变更，从 V4.0.0 版本开始删除。|
| [system_cpu_quota](100.system-configuration-items/300.cluster-level-configuration-items/22900.system_cpu_quota.md)                                            | 架构升级变更，从 V4.0.0 版本开始删除。|
| [tenant_groups](100.system-configuration-items/300.cluster-level-configuration-items/24000.tenant_groups.md)                                                  | 相关功能不再支持，从 V4.0.0 版本开始删除。|
| [trx_force_kill_threshold](100.system-configuration-items/300.cluster-level-configuration-items/24600.trx_force_kill_threshold.md)                            | 实现逻辑变更，相应功能不再适用，从 V4.0.0 版本开始删除。|
| [unit_balance_resource_weight](100.system-configuration-items/300.cluster-level-configuration-items/24800.unit_balance_resource_weight.md)                    | 架构升级变更，从 V4.0.0 版本开始删除。|
| [user_iort_up_percentage](100.system-configuration-items/300.cluster-level-configuration-items/25100.user_iort_up_percentage.md)                              | 实现逻辑变更，相应功能不再适用，从 V4.0.0 版本开始删除。|
| [user_tab_col_stat_cache_priority](100.system-configuration-items/300.cluster-level-configuration-items/25300.user_tab_col_stat_cache_priority.md)            | 实现逻辑变更，相应功能不再适用，从 V4.0.0 版本开始删除。|
| [wait_leader_batch_count](100.system-configuration-items/300.cluster-level-configuration-items/25500.wait_leader_batch_count.md)                              | 架构升级变更，从 V4.0.0 版本开始删除。|
| [zone_merge_concurrency](100.system-configuration-items/300.cluster-level-configuration-items/25900.zone_merge_concurrency.md)                                | 相关功能不再支持，从 V4.0.0 版本开始删除。 |
| [zone_merge_order](100.system-configuration-items/300.cluster-level-configuration-items/26000.zone_merge_order.md)                                            | 相关功能不再支持，从 V4.0.0 版本开始删除。|
| [zone_merge_timeout](100.system-configuration-items/300.cluster-level-configuration-items/26100.zone_merge_timeout.md)                                        | 相关功能不再支持，从 V4.0.0 版本开始删除。|

## V4.x 版本中系统变量相关的变更

为了更好地适配用户的业务使用场景，OceanBase 数据库针对租户变量的默认值、取值范围等也进行了一系列的优化调整。特别地，在之前的版本中，`undo_retention` 是作为系统变量引入的，而在 V4.x 版本中，从 V4.0.0 版本开始，`undo_retention` 调整为租户级配置项。

### 更改默认值的系统变量

下表列出了更改默认值的变量。

| 变量名                          | 描述                                      |
|---------------------------------|-------------------------------------------|
| [ob_default_lob_inrow_threshold](200.system-variable/400.session-system-variable/6440.ob_default_lob_inrow_threshold-session.md)      | <ul><li>对于 V4.2.x 版本，从 V4.2.3 版本开始，默认值由 4096 调整为 8192。</li> <li>对于 V4.3.x 版本，从 V4.3.2 版本开始，默认值由 4096 调整为 8192。</li></ul> |
| [sql_mode](200.system-variable/300.global-system-variable/11700.sql_mode-global.md)                                                   |<ul><li>对于 V4.2.x 版本，从 V4.2.2 版本开始，默认值由 “STRICT_ALL_TABLES,NO_ZERO_IN_DATE” 变更为 “STRICT_ALL_TABLES,NO_ZERO_IN_DATE,NO_AUTO_CREATE_USER”。</li> <li>对于 V4.3.x 版本，从 V4.3.0 版本开始，默认值由 “STRICT_ALL_TABLES,NO_ZERO_IN_DATE” 变更为 “STRICT_ALL_TABLES,NO_ZERO_IN_DATE,NO_AUTO_CREATE_USER”。</li></ul>|
| [optimizer_features_enable](200.system-variable/300.global-system-variable/10460.optimizer_features_enable-global.md)                 | <ul><li>对于 V4.2.1 版本，V4.2.1 BP6 及之前版本，默认值为空，表示使用 V4.2.1.0 的优化器能力；从 V4.2.1 BP7 版本开始，默认值调整为当前四位数版本号，表示新建的集群可以使用新版优化器能力，而从 V4.2.1 BP6 及之前版本升级后依然使用升级前指定的优化器版本。</li> <li>对于 V4.2.1 以外的其他版本，默认值仍为空，无变更。</li></ul> |
| [secure_file_priv](200.system-variable/300.global-system-variable/11500.secure_file_priv-global.md)                                   | 从 V4.2.1 版本开始，默认值由 `NULL` 调整为 `""`。|
| [max_allowed_packet](200.system-variable/300.global-system-variable/3700.max_allowed_packet-global.md)                                | 从 V4.2.1 版本开始，默认值由 4194304 调整为 16777216。|
| [ob_max_read_stale_time](200.system-variable/400.session-system-variable/8100.ob_max_read_stale_time-session.md)                      | 从 V4.1.0 版本开始，默认值由 5000000 调整为 -1。|
| [ob_trx_idle_timeout](200.system-variable/400.session-system-variable/10100.ob_trx_idle_timeout-session.md)                           | 从 V4.0.0 版本开始，默认值由 120s 调整为 1d。|
| [ob_trx_timeout](200.system-variable/300.global-system-variable/10300.ob_trx_timeout-global.md)                                       | 从 V4.0.0 版本开始，默认值 100s 调整为 1d。|

### 更改取值范围或取值含义的系统变量

下表列出了更改取值范围或取值含义的系统变量。

| 变量名                          | 描述                                      |
|----------------------------------|-------------------------------------------|
| [secure_file_priv](200.system-variable/300.global-system-variable/11500.secure_file_priv-global.md)                    | 从 V4.2.0 版本开始，枚举值空字符串（`""`）和 `NULL` 的含义由原来的 “无限制” 调整为 “导入、导出被禁用”。|
| [ob_max_read_stale_time](200.system-variable/400.session-system-variable/8100.ob_max_read_stale_time-session.md)       | 从 V4.1.0 版本开始，取值范围由 \[0, 9223372036854775807\] 修改为 \[-1, 9223372036854775807\]。|

### 更改权限要求的系统变量

下表列出了更改权限要求的变量。

| 变量名                          | 描述                                      |
|----------------------------------|-------------------------------------------|
| [secure_file_priv](200.system-variable/300.global-system-variable/11500.secure_file_priv-global.md)                    | 从 V4.2.0 版本开始，限制只通过本地 Unix Socket 连接才能修改该变量。|

### 新增的系统变量

下表列出了在 V4.x 版本中新增的系统变量。

| 变量名                                                                               | 引入版本    | 描述                             |
|-------------------------------------------------------------------------------------|-------------|---------------------------------|
| [cardinality_estimation_model](200.system-variable/400.session-system-variable/3200.cardinality_estimation_model-session.md)           | V4.2.4 | 设置控制优化器在基数估计时使用的相关性假设。 |
| [enable_sql_plan_monitor](200.system-variable/400.session-system-variable/14300.enable_sql_plan_monitor-session.md)                    | V4.2.4 | 设置当前会话的 SQL 是否记入 SQL plan monitor。 |
| [activate_all_roles_on_login](200.system-variable/300.global-system-variable/200.activate_all_roles_on_login-global.md)                | <ul><li>对于 V4.2.x 版本，从 V4.2.3 版本开始引入。</li> <li>对于 V4.3.x 版本，从 V4.3.1 版本开始引入。</li></ul>   | 控制在登录时是否默认自动启用所有 Roles。  |
| [innodb_stats_persistent](200.system-variable/300.global-system-variable/3130.innodb_stats_persistent-global.md)                       | <ul><li>对于 V4.2.x 版本，从 V4.2.3 版本开始引入。</li> <li>对于 V4.3.x 版本，从 V4.3.2 版本开始引入。</li></ul>   | 控制是否将 InnoDB 索引统计信息持久化到磁盘上。 |
| [ob_compatibility_control](200.system-variable/300.global-system-variable/6350.ob_compatibility_control-global.md)                     | <ul><li>对于 V4.2.x 版本，从 V4.2.3 版本开始引入。</li> <li>对于 V4.3.x 版本，从 V4.3.2 版本开始引入。</li></ul>   | 用于控制 MYSQL5.7、 MYSQL8.0 有兼容性冲突时的行为模式。 |
| [ob_compatibility_version](200.system-variable/300.global-system-variable/6360.ob_compatibility_version-global.md)                     | <ul><li>对于 V4.2.x 版本，从 V4.2.3 版本开始引入。</li> <li>对于 V4.3.x 版本，从 V4.3.2 版本开始引入。</li></ul>   | 控制产品行为发生变更的功能兼容的 OceanBase 数据库版本。 |
| [ob_security_version](200.system-variable/300.global-system-variable/9350.ob_security_version-global.md)                               | <ul><li>对于 V4.2.x 版本，从 V4.2.3 版本开始引入。</li> <li>对于 V4.3.x 版本，从 V4.3.2 版本开始引入。</li></ul>   | 控制安全功能兼容的 OceanBase 数据库版本。 |
| [automatic_sp_privileges](200.system-variable/300.global-system-variable/650.automatic_sp_privileges-global.md)                        | <ul><li>对于 V4.2.x 版本，从 V4.2.2 版本开始引入。</li> <li>对于 V4.3.x 版本，从 V4.3.1 版本开始引入。</li></ul>   | 设置在存储过程中是否被自动授予 ALTER 和 EXECUTE 的权限。 |
| [lc_time_names](200.system-variable/400.session-system-variable/3450.lc_time_names-session.md)                                         | <ul><li>对于 V4.2.x 版本，从 V4.2.2 版本开始引入。</li> <li>对于 V4.3.x 版本，从 V4.3.1 版本开始引入。</li></ul>   | 控制显示日期和月份名称和缩写的语言。  |
| [ob_enable_pl_cache](200.system-variable/400.session-system-variable/7150.ob_enable_pl_cache-session.md)                               | <ul><li>对于 V4.2.x 版本，从 V4.2.2 版本开始引入。</li> <li>对于 V4.3.x 版本，从 V4.3.1 版本开始引入。</li></ul>   | 控制 PL cache 模块是否开启。 |
| [optimizer_dynamic_sampling](200.system-variable/300.global-system-variable/10450.optimizer_dynamic_sampling-global.md)                | V4.2.0   | 控制动态采样的等级。  |
| [optimizer_features_enable](200.system-variable/300.global-system-variable/10460.optimizer_features_enable-global.md)                  | V4.2.0   | 启用不同 OceanBase 版本优化器功能。 |
| [parallel_degree_limit](200.system-variable/400.session-system-variable/10700.parallel_degree_limit-session.md)                        | V4.2.0   | 设置在使用 Auto DOP 策略时，优化器选择并行度的上限值。 |
| [parallel_degree_policy](200.system-variable/300.global-system-variable/10560.parallel_degree_policy-global.md)                        | V4.2.0   | 设置并行度选择策略。 |
| [parallel_min_scan_time_threshold](200.system-variable/300.global-system-variable/10650.parallel_min_scan_time_threshold-global.md)    | V4.2.0   | 在 Auto DOP 策略中用于计算并行度的参数，即设置对基表扫描进行并行处理的最小评估执行时间。 |
| [runtime_filter_type](200.system-variable/300.global-system-variable/16100.runtime_filter_type-global.md)                              | V4.2.0   | 设置租户级别的 Runtime Filter 类型。 |
| [runtime_filter_wait_time_ms](200.system-variable/300.global-system-variable/16200.runtime_filter_wait_time_ms-gloabl.md)              | V4.2.0   | 设置 Runtime Filter 的最大等待时间。 |
| [runtime_filter_max_in_num](200.system-variable/300.global-system-variable/16300.runtime_filter_max_in_num-global.md)                  | V4.2.0   | 设置 Runtime In Filter 的 NDV （某个列中不同值的个数）个数。 |
| [runtime_bloom_filter_max_size](200.system-variable/300.global-system-variable/16400.runtime_bloom_filter_max_size-global.md)          | V4.2.0   | 设置 Runtime Bloom Filter 的最大使用内存，单位为字节。  |
| [cte_max_recursion_depth](200.system-variable/300.global-system-variable/1950.cte_max_recursion_depth-global.md)                       | V4.1.0   | 设置公共表表达式（CTE）的最大递归深度。服务器会终止执行任何超过此 CTE 值的操作。 |
| [ob_max_read_stale_time](200.system-variable/300.global-system-variable/8200.ob_max_read_stale_time-global.md)                         | V4.1.0   | 设置弱读取查询的最大延迟阈值（us）。 |
| [regexp_stack_limit](200.system-variable/300.global-system-variable/11350.regexp_stack_limit-global.md)                                | V4.1.0   | 设置正则表达式匹配操作的内部堆栈的最大可用内存，默认单位为字节。                     |
| [ob_enable_show_trace](200.system-variable/400.session-system-variable/7400.ob_enable_show_trace-session.md)                           | V4.1.0   | 设置是否使用 Show Trace 日志。 |
| [cursor_sharing](200.system-variable/300.global-system-variable/2000.cursor_sharing-global.md)                                         | V4.0.0   | 判断处理 SQL 时是否进行参数化。 |
| [innodb_strict_mode](200.system-variable/300.global-system-variable/3100.innodb_strict_mode-global.md)                                 | V4.0.0   | 设置特定语法的 SQL 检查模式。 |
| [log_row_value_options](200.system-variable/300.global-system-variable/3500.log_row_value_options-global.md)                           | V4.0.0   | 控制 Lob 是否使用部分更新。 |
| [ob_enable_rich_error_msg](200.system-variable/300.global-system-variable/6550.ob_enable_rich_error_msg-global.md)                     | V4.0.0   | 控制 SQL 执行出错时是否显示 svr_ip、time、trace_id 等信息。 |

### 废弃的系统变量

下表中列出了在 V4.x 版本中被废弃的系统变量。

| 变量名                                                                                                                          | 描述                      |
|--------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
| ob_enable_trace_log                                                                                                            | 架构升级变更，从 V4.1.0 版本开始删除。 |
| [ob_create_table_strict_mode](200.system-variable/400.session-system-variable/6300.ob_create_table_strict_mode-session.md)      | 架构升级变更，从 V4.0.0 版本开始删除。 |
| [ob_enable_blk_nestedloop_join](200.system-variable/400.session-system-variable/6500.ob_enable_blk_nestedloop_join-session.md)  | 实现逻辑变更，相应功能不适用，从 V4.0.0 版本开始删除。|
| [ob_enable_hash_group_by](200.system-variable/300.global-system-variable/6600.ob_enable_hash_group_by-global.md)                | 实现方式变更，从 V4.0.0 版本开始删除。|
| [ob_timestamp_service](200.system-variable/300.global-system-variable/9900.ob_timestamp_service-global.md)                      | 架构升级变更，从 V4.0.0 版本开始删除。 |