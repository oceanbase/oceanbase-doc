# What's New

OceanBase V4.3.3 是版本 4.3 系列的首个 GA 版本，带来了多个关键突破。首先，在关系型数据库基础上，支持了适用于 AI 类分析处理的向量类型及索引。其次，为了更好地满足 HTAP 混合负载场景下的 TP 和 AP 资源强隔离需求，引入了一种全新的列存副本形态。此外，本版本在面向 AP 查询任务的性能上也实现了显著提升。其他新功能包括支持 Array 复杂数据类型、优化 Roaringbitmap 的计算性能、强化物化视图的刷新能力、扩展外表功能、提升外表导入性能、优化 AP 类 SQL 的计划生成和执行策略，加速面向 OLAP 负载的能力提升。同时，V4.2.4 及之前版本的大部分特性也已在 V4.3.3 中得到支持，未来还将推出同样适用于 OLTP 业务的全新融合版本。

本篇文章主要为您介绍 OceanBase V4.3.3 的一些关键功能特性以及主要的性能提升。

## 关键功能特性

### 向量类型及索引（实验特性）

随着 AI 技术的普及，非结构化数据（如图像、视频和文本）的爆炸性增长，使得向量数据库应运而生。这种数据库为高维向量的存储、索引和检索提供了全托管的解决方案，能够将关键词搜索转为向量化检索，实现大规模高维向量的相似性检索。

OceanBase 数据库 V4.3.3 版本在 MySQL 模式下提供了向量类型存储、向量索引和 embedding 向量检索能力，支持最大 16000 维的 Float 向量和各种基本运算，包括加减乘、比较和聚合，支持精准搜索和近似最近邻搜索，并具备最大 2000 维的 HNSW 索引，适用于图像和视频检索、行为推荐、安全和欺诈检测等业务场景。

[向量检索概述](640.ob-vector-search/100.ob-vector-search-intro.md)

### ARRAY 数据类型

ARRAY 是 AP 业务中常用的复杂数据类型，能够存储多个同类型的元素，适合用于表示多值属性。OceanBase V4.3.3 在 MySQL 模式下支持 ARRAY 类型，用户可在建表时定义某列为数值型或字符型数组，并可嵌套数组。同时，支持构造表达式进行数组查询或写入，提供 `array_contains` 表达式和 ANY 操作符判断数组元素，以及支持 +、-、=、!= 等操作符进行数组计算。

更多详细信息，参见 [数组元素类型概述](700.reference/500.sql-reference/100.sql-syntax/200.common-tenant-of-mysql-mode/100.basic-elements-of-mysql-mode/100.data-type-of-mysql-mode/1200.array-data-type-of-mysql-mode/100.array-data-type-overview-of-mysql-mode.md)。

### 只读列存副本（实验特性）

V4.3.0 开始支持了列式存储，但为了满足 HTAP 混合负载场景下 TP、AP 资源物理强隔离的需求，V4.3.3 推出了一种全新的部署形态，支持在原集群基础上，扩展单独的 Zone 来存放只读列存副本。在该 Zone 上所有用户表均为列存格式存储，AP 业务可以使用独立的 ODP，通过 SESSION 级系统变量 ob_route_policy 设置路由策略为COLUMN_STORE_ONLY 来访问列存副本进行弱读方式的查询分析，而不影响原 TP 业务。

更多详细信息，参见 [列存副本](700.reference/100.oceanbase-database-concepts/500.distributed-database-objects/300.data-partitions-and-replicas/300.partition-replica-type/400.columnstore-replica.md)。

V4.3.3 将该功能定义为实验特性，将在后续版本继续完善为正式生产特性。

### 物化视图能力增强

V4.3.1 开始支持物化视图改写能力，在系统变量 QUERY_REWRITE_ENABLED 设置为 True 的情况下，创建物化视图时可以通过指定 enable query rewrite 来使用自动改写能力，从而减少业务手工改写成本。V4.3.3 进一步支持了非聚合物化视图的 From 连接兼容、查询包含物化视图中不存在的表的改写，并支持了聚合物化视图改写及聚合上卷改写。

更多详细信息，参见 [物化视图查询改写（MySQL 模式）](700.reference/300.database-object-management/100.manage-object-of-mysql-mode/600.manage-views-of-mysql-mode/200.manage-materialized-views-of-mysql-mode/100.materialized-views-of-mysql-mode/600.materialized-views-rewrite-of-mysql-mode.md) 和 [物化视图查询改写（Oracle 模式）](700.reference/300.database-object-management/200.manage-object-of-oracle-mode/500.manage-views-of-oracle-mode/200.manage-materialized-views-of-oracle-mode/100.materialized-views-of-oracle-mode/600.materialized-views-rewrite-of-oracle-mode.md)。

OceanBase 之前版本仅支持行存储格式的物化视图，V4.3.3 开始，将扩展列存储格式的物化视图支持，从而有机会在一些部分包含物化视图引用的复杂分析场景获得更好的查询性能。更多详细信息，参见 [创建物化视图（MySQL 模式）](700.reference/300.database-object-management/100.manage-object-of-mysql-mode/600.manage-views-of-mysql-mode/200.manage-materialized-views-of-mysql-mode/100.materialized-views-of-mysql-mode/200.create-materialized-views-of-mysql-mode.md) 和 [创建物化视图（Oracle 模式）](700.reference/300.database-object-management/200.manage-object-of-oracle-mode/500.manage-views-of-oracle-mode/200.manage-materialized-views-of-oracle-mode/100.materialized-views-of-oracle-mode/200.create-materialized-views-of-oracle-mode.md)。

### 分布式晚期物化

晚期物化策略通过在满足条件的情况下，优化索引表过滤和主表回查的顺序，减少随机 IO 消耗。OceanBase V4.3.3 扩展了对分区表的晚期物化支持。

### INSERT OVERWRITE 能力增强

V4.3.2 开始支持表级覆盖写能力（INSERT OVERWRITE），V4.3.3 补充完善了该特性，支持在 INSERT OVERWRITE 语句中指定目标表为一级或二级分区，也支持指定目标表的部分列信息，使得数据替换写入的方式更加灵活。

更多详细信息，参见 [插入数据（MySQL 模式）](300.develop/100.application-development-of-mysql-mode/400.write-data-of-mysql-mode/100.insert-data-of-mysql-mode-in-develop.md) 和 [插入数据（Oracle 模式）](300.develop/200.application-development-of-oracle-mode/400.write-data-of-oracle-mode/100.insert-data-of-oracle-mode-in-develop.md)。

## 高性能

### RoaringBitmap 性能优化

OceanBase V4.3.3 重点分析了 RoaringBitmap 类型计算的性能问题，优化内存申请和表达式执行逻辑，精简非必要的性能开销，数倍提升 cardinality、and/or/xor/andnot 及聚合场景下的执行性能。

## 高可靠

### 快速恢复

OceanBase V4.3.3 支持了一种只恢复日志不恢复数据的快速恢复能力，通过数据备份支持对备份的 SSTable 构建基于备份地址的中间层索引，OBServer 能够像读取本地数据一样随机读取备份的 SSTable数据，从而达到无需恢复数据到本地即可提供数据的读写服务。

## 易用性

### 日志流副本管理

V4.x 系列在设计上使用日志流代替了分区的概念，对标低版本的分区运维命令，新版本重新设计实现了日志流副本级别任务的运维方式，提供了一系列语法，用于支持日志流副本的添加、删除、副本类型转换、迁移、修改日志流 paxos 成员数量和取消容灾任务等能力，满足客户手动运维日志流副本的需求。

## 相关文档

本篇文章主要向您介绍了重点的新增功能、关键特性等，如果想要了解更多版本详情以及其他各版本信息，请关注我们的版本发布记录：

- [企业版 V4.3.3 版本发布记录](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.3.3)

- [OceanBase 数据库企业版发布记录](900.release-notes/200.enterprise-edition-history-release.md)

- [OceanBase 数据库社区版发布记录](900.release-notes/300.community-edition-history-release.md)
