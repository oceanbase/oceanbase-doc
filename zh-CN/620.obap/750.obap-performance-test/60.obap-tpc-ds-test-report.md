# OceanBase 数据库 TPC-DS 性能测试报告

## 测试环境 (阿里云 ECS)

- 3 节点硬件配置

  |服务类型|ECS 类型|实列数|机器核心数|内存|
  |---|---|---|---|---|
  | OceanBase 数据库 | ecs.r6.8xlarge | 3 | 32c | 256G
  每台机器系统盘 300G、日志盘 400G、数据盘 2T，磁盘性能级别为 PL1 |
  | TPC-H | ecs.r6.8xlarge | 1 | 32c | 256G |

- 3 节点租户规格

  ```
  CREATE RESOURCE UNIT tpch_unit max_cpu 30, memory_size '180g'
  CREATE RESOURCE POOL tpch_pool unit = 'tpch_unit', unit_num = 1, zone_list=('zone1','zone2','zone3');
  CREATE TENANT tpch_mysql resource_pool_list=('tpch_pool'),  zone_list('zone1', 'zone2', 'zone3'), primary_zone=RANDOM, locality='F@zone1,F@zone2,F@zone3' set variables ob_compatibility_mode='mysql', ob_tcp_invited_nodes='%';
  ```

- 软件版本

|服务类型|软件版本|
|---|---|
| OceanBase 数据库  | <ul><li>企业版：OceanBase 4.3.0.1</li><li>社区版：OceanBase_CE 4.3.0.1</li></ul>|
| TPC-H | V3.0.0 |
| OS | CentOS Linux release 7.9.2009 (Core) |

## 测试方案

- 使用 obd 部署 OceanBase 数据库集群。TPC-H 客户端需要部署在一台机器上, 作为客户端的压力机器。您无需部署 ODP，测试时直连任意一台机器即可。
- 3 节点的 OceanBase 集群部署规模为 1：1：1。部署成功后先新建跑 TPCH 测试的租户及用户（sys 租户是管理集群的内置系统租户，请勿直接使用 sys 租户进行测试），设置租户的 primary_zone 为 RANDOM。
- 测试数据量：100G。
- 测试步骤详见 [OceanBase 数据库 TPC-DS 测试](../750.obap-performance-test/50.obap-tpc-ds-test.md)。

## 测试结果

|**Query ID**|**3节点 OBServer V4.3.0 查询响应时间（单位：秒）**|
|---|---|
| Q1 | 0.23 |
| Q2 | 1.18 |
| Q3 | 0.14 |
| Q4 | 11.64 |
| Q5 | 1.22 |
| Q6 | 0.24 |
| Q7 | 0.27 |
| Q8 | 0.26 |
| Q9 | 0.53 |
| Q10 | 0.56 |
| Q11 | 6.99 |
| Q12 | 0.29 |
| Q13 | 0.21 |
| Q14 | 9.31 |
| Q15 | 0.43 |
| Q16 | 0.7 |
| Q17 | 0.45 |
| Q18 | 0.35 |
| Q19 | 0.18 |
| Q20 | 0.24 |
| Q21 | 0.18 |
| Q22 | 1.32 |
| Q23 | 13.09 |
| Q24 | 0.99 |
| Q25 | 0.68 |
| Q26 | 0.21 |
| Q27 | 0.34 |
| Q28 | 0.92 |
| Q29 | 0.53 |
| Q30 | 0.25 |
| Q31 | 0.71 |
| Q32 | 0.11 |
| Q33 | 0.57 |
| Q34 | 0.34 |
| Q35 | 0.86 |
| Q36 | 0.31 |
| Q37 | 0.33 |
| Q38 | 1.97 |
| Q39 | 0.84 |
| Q40 | 0.16 |
| Q41 | 0.03 |
| Q42 | 0.11 |
| Q43 | 0.59 |
| Q44 | 0.47 |
| Q45 | 0.38 |
| Q46 | 0.41 |
| Q47 | 1.19 |
| Q48 | 0.24 |
| Q49 | 0.93 |
| Q50 | 0.51 |
| Q51 | 2.94 |
| Q52 | 0.11 |
| Q53 | 0.18 |
| Q54 | 0.7 |
| Q55 | 0.11 |
| Q56 | 0.63 |
| Q57 | 0.78 |
| Q58 | 0.74 |
| Q59 | 2.67 |
| Q60 | 0.66 |
| Q61 | 0.37 |
| Q62 | 0.42 |
| Q63 | 0.19 |
| Q64 | 1.02 |
| Q65 | 0.85 |
| Q66 | 0.45 |
| Q67 | 10.62 |
| Q68 | 0.33 |
| Q69 | 0.53 |
| Q70 | 1.19 |
| Q71 | 0.5 |
| Q72 | 10.83 |
| Q73 | 0.2 |
| Q74 | 4.43 |
| Q75 | 2.09 |
| Q76 | 0.49 |
| Q77 | 0.81 |
| Q78 | 3.05 |
| Q79 | 0.61 |
| Q80 | 1.27 |
| Q81 | 0.19 |
| Q82 | 0.52 |
| Q83 | 0.62 |
| Q84 | 0.19 |
| Q85 | 0.57 |
| Q86 | 0.4 |
| Q87 | 2.12 |
| Q88 | 3.37 |
| Q89 | 0.28 |
| Q90 | 0.18 |
| Q91 | 0.12 |
| Q92 | 0.11 |
| Q93 | 0.56 |
| Q94 | 0.57 |
| Q95 | 7.13 |
| Q96 | 0.28 |
| Q97 | 1.09 |
| Q98 | 0.37 |
| Q99 | 0.73 |
| Total | 134.76 |

