# OceanBase 数据库企业版

本文主要介绍 OceanBase 数据库企业版所有版本的发版说明。

## V4.3.3

[**点击查看 V4.3.3 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.3.3)

**版本信息：**
* 发布时间：2024 年 9 月 30 日
* 版本号：V4.3.3
* RPM 版本号：oceanbase-4.3.3.0-100000412024101200

**版本概述：**

OceanBase V4.3.3 作为 4.3 系列的第一个 GA 版本发布，在几个关键场景完成了突破。一是在关系型数据库基础上支持了适用于 AI 类分析处理的向量类型及索引；二是更好满足 HTAP 混合负载场景下，TP、AP 资源物理强隔离诉求的全新的列存副本形态；三是面向 AP 类查询任务的整体可观的性能提升。除此之外，新增 `ARRAY` 复杂类型支持、优化 Roaringbitmap 类型计算性能，强化物化视图改写刷新等能力，扩展外表功能、提高外表导入性能，优化 AP 类 SQL 的计划生成和执行策略，加快面向 OLAP 负载的产品化能力提升。新版本还支持了一种只需恢复日志无需恢复数据到本地即可提供读写服务的快速恢复能力，也支持了 QUERY 级别的资源组设定，提升了系统的可靠性和易用性。同时，V4.2.4 及之前版本的绝大部分特性已经在 V4.3.3 补充支持，后续也会推出同样可应用于 OLTP 业务生产的全新融合版本。


## V4.3.2

### V4.3.2 Beta

[**点击查看 V4.3.2 Beta Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.3.2)

**版本信息**

* 发布时间：2024 年 7 月 16 日
* 版本号：V4.3.2 Beta
* RPM 版本号：oceanbase-4.3.2.0-100000442024071321

**版本概览：**

OceanBase V4.3.2 是面向 AP 业务的性能增强版本，数据读取、数据分发、数据计算、向量化处理、计划选择全方位改进，AP 类基准测试性能整体提升 10%-15%。引入 Roaringbitmap 数据类型及相关计算表达式，给大数据集合运算和去重场景提供了更优选择。丰富增量旁路导入功能、提升全量旁路导入性能，扩展支持 Parquet 文件外表，加速大规模数据的处理速度。作为一款一体化数据库，新版本也针对 `express oltp`、`complex oltp`、`olap`、`htap`、`kv` 等 5 类场景分别梳理了场景化参数模版，配合部署工具，让初始配置就适合每一种业务类型。此外，新版本还融合了 V4.2.x 系列前序版本的诸多兼容性增强和用户体验改进特性，并合入了TP 类 SQL 的性能改进，致力于满足各类应用场景对产品的诉求。

## V4.3.1

### V4.3.1 Beta

[**点击查看 V4.3.1 Beta Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.3.1)

**版本信息：**
* 发布时间：2024 年 5 月 17 日
* 版本号：V4.3.1 Beta
* RPM 版本号：oceanbase-4.3.1.0-100000212024051522

**版本概览：**

OceanBase V4.3.1 在 V4.3.0 基础上，新增全文索引特性提升文档检索效率，扩展实时物化视图、物化视图改写、主键物化视图等功能以满足多场景的分析需求。引入分区管理新机制，如分区交换、外表分区、MySQL 模式分区键数据类型扩展等，提升大规模数据的处理能力。多模特性（含 JSON、XML、GIS）功能升级，增加 JSON 多值索引、JSON 部分更新的能力支持，促进异构数据的迁移与融合。MySQL 与 Oracle 兼容性持续增强，支持 Lateral Derived Tables、 MySQL 锁函数、Oracle 视图注释与远程 UDF 调用等，以便融入生态。提供增量旁路导入能力，提升了多次导入场景的入库性能，同时优化了多局部索引场景下的 DML 性能，提高了基础统计信息收集效率，并在行采样、小规格 TP 场景取得了显著的性能提升。新版本也进一步优化了资源使用，支持了 CLOG 日志缓存和存储压缩、SQL 临时结果压缩、系统日志压缩等特性。补充完善了 MySQL 权限体系、支持了操作系统配置检查，加固系统安全。一如既往地关注用户体验，增加资源规格估算能力，增强备份透明度，提供 IPV6 格式支持，赋能数据库管理与运维。
V4.3.1 定位为 Beta 版本，推荐实时数仓或联机交易业务测试使用，下半年将发布推荐用于生产的 GA 版本。

## V4.3.0

### V4.3.0 Beta

[**点击查看 V4.3.0 Beta Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.3.0)

**版本信息：**

* 发布时间：2024 年 3 月 22 日
* 版本号：V4.3.0 Beta
* RPM 版本号：oceanbase-4.3.0.1-101000062024032200
* 版本说明：Beta 版本解决了大部分缺陷，并趋于稳定。推荐测试环境使用。

**版本概览：**

OceanBase 数据库 V4.3.0 版本深入典型 AP 场景，不再局限于 TP + 轻量化 AP 的版本定位。基于 LSM-Tree 架构推出列存引擎，实现行存、列存数据存储一体化，同时推出基于 Column 数据格式描述的新版向量化引擎和基于列存的代价模型，支持高效处理大宽表，显著提升 AP 场景查询性能，并兼顾 TP 业务场景。新增 Oracle 兼容的物化视图功能，通过预计算存储视图的查询结果提升实时查询性能，支撑快速报表生成和数据分析场景。新版本内核也扩展了 Online DDL、支持了租户克隆等功能，优化 PDML、优化 `LOB` 类型旁路导入性能、节点重启性能，增加 S3 备份恢复介质支持，优化系统资源使用，并增加索引使用监控、客户端本地导入等功能提升系统易用性。推荐用于复杂分析、实时报表、实时数仓或联机交易等混合负载场景。


## V4.2.1

### V4.2.1 BP3 Hotfix4

[**点击查看 V4.2.1 BP3 Hotfix4 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.2.1)

**版本信息：**

* 发布时间：2024 年 01 月 18 日
* 版本号：V4.2.1 BP3 Hotfix4
* RPM 版本号：oceanbase-4.2.1.3-103040012024011620

**版本概览：**

修复内核因实现类似于 SQLPlus 客户端去除字符串换行前空格的行为，导致与原生 Oracle 不兼容的问题。从该版本开始，不再对字符串换行前的空格进行处理。

### V4.2.1 BP3 Hotfix2

[**点击查看 V4.2.1 BP3 Hotfix2 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.2.1)

**版本信息：**

* 发布时间：2024 年 01 月 11 日
* 版本号：V4.2.1 BP3 Hotfix2
* RPM 版本号：oceanbase-4.2.1.3-103020012024011011

**版本概览：**

修复在 PS 二合一协议开启下的 SQL 远程执行计划生成失败、自增主键和二级索引冲突导致的 OBKV 客户端报错以及包含 LONGTEXT 列的表在执行 OBKV TTL 任务时失败的问题。

### V4.2.1 BP3 Hotfix1

[**点击查看 V4.2.1 BP3 Hotfix1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.2.1)

**版本信息：**

* 发布时间：2024 年 01 月 05 日
* 版本号：V4.2.1 BP3 Hotfix1
* RPM 版本号：oceanbase-4.2.1.3-103010012024010418

**版本概述：**

修复调用 `DBMS_MONITOR` 包传入小数类型数据报错 `Incorrect arguments to control info` 的问题。


### V4.2.1 BP3

[**点击查看 V4.2.1 BP3 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.2.1)

**版本信息：**

* 发布时间：2023 年 12 月 29 日
* 版本号：V4.2.1 BP3
* RPM 版本号：oceanbase-4.2.1.3-103000052023122809

**版本概览：**

新增 OBServer 到 ODP 链路压缩、网络备库性能优化、OBKV 全局索引功能，以及对 Oracle 模式和 MySQL 模式进行了多项性能优化和特性升级，同时还新增了统计信息复制功能、SQL 限流功能优化、备份进度展示功能，并提升了 MySQL 8.0 语法兼容性。

### V4.2.1 BP2 Hotfix1

[**点击查看 V4.2.1 BP2 Hotfix1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.2.1)

**版本信息：**

* 发布时间：2023 年 12 月 14 日
* 版本号：V4.2.1 BP2 Hotfix1
* RPM 版本号：oceanbase-4.2.1.2-102020012023121317

**版本概览：**

新建集群默认关闭 NLJ 和 SPF 算子的 BATCH RESCAN 优化，而升级的集群仍保持原状态。存量环境中稳定性问题可通过全局设置禁用该优化。同时，修复了 BATCH RESCAN 导致的 OBServer core 问题，二级分区表组数据分布问题，以及 JSON_EXTRACT 函数的兼容性问题。


### V4.2.1 BP2

[**点击查看 V4.2.1 BP2 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.2.1)

**版本信息：**

* 发布时间：2023 年 12 月 05 日
* 版本号：V4.2.1 BP2
* RPM 版本号：oceanbase-4.2.1.2-102010012023120119

**版本概览：**

在 MySQL 模式下引入分页查询保序功能以确保输出顺序的稳定性，并提供手动 Transfer Partition 能力以满足特定的数据分布需求。此外，该版本还优化了物理恢复性能，增加 OBKV 的 RPC 压缩功能，提供 LOB 存储模式的动态配置选项，并新增 Tablet Location 的主动广播能力以减少 SQL 重试和读写错误。

### V4.2.1 BP1 Hotfix1

[**点击查看 V4.2.1 BP1 Hotfix1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.2.1)

**版本信息：**

* 发布时间：2023 年 11 月 10 日
* 版本号：V4.2.1 BP1 Hotfix1
* RPM 版本号：oceanbase-4.2.1.1-101010022023110921

**版本概览：**

修复 OBKV 在处理 TTL 表时内存占用过多、TTL 任务执行时日志流切主导致内存未释放，以及重复创建 SESSION 时导致的内存泄漏问题。

### V4.2.1 BP1

[**点击查看 V4.2.1 BP1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.2.1)

**版本信息：**

* 发布时间：2023 年 11 月 01 日
* 版本号：V4.2.1 BP1
* RPM 版本号：oceanbase-4.2.1.1-101000062023103122

**版本概览：**

通过在 `DBA_OB_ROOTSERVICE_EVENT_HISTORY` 视图的 `migrate_unit` 和 `finish_migrate_unit` 事件中增加新值 `manual_migrate`，用于区别手动迁移和自动迁移。同时，为了简化 OBKV 请求问题的定位，新版本引入 OBKV 连接数统计功能，并新增 `[G]V$OB_KV_CONNECTIONS` 视图来查询当前租户的所有 KV 类活跃 SESSION 信息。

### V4.2.1 GA Hotfix2

[**点击查看 V4.2.1 GA Hotfix2 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.2.1)

**版本信息：**

* 发布时间：2023 年 10 月 23 日
* 版本号：V4.2.1 GA Hotfix2
* RPM 版本号：oceanbase-4.2.1.0-100020042023102310


**版本概览：**

修复在 Transfer 场景下自增列未刷新 tablet location cache 导致的执行报错，SQL 执行 NLJ Group Rescan 优化时因存储参数切换引发报错 4016，OBKV 中 `current_timestamp` 作为 TTL 过期列引起的 Core 问题，以及 update 操作中可消除 JOIN 未能应用 PDML 的问题，并解决了 MySQL 模式下隐式类型转换影响谓词推导和优化计划生成的问题。


### V4.2.1 GA Hotfix1

[**点击查看 V4.2.1 GA Hotfix1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.2.1)

**版本信息：**

* 发布时间：2023 年 10 月 17 日
* 版本号：V4.2.1 GA Hotfix1
* RPM 版本号：oceanbase-4.2.1.0-100010052023101619

**版本概览：**

修复复杂 SQL 执行时，使用 SPF 优化造成节点 Core 的问题；`trx_read_only` 设置为 True 时，UDF 内部 SQL 无法命中 Plan Cache，导致性能较差的问题；PS 模式下存储过程中复杂数据类型默认值参数校验失败问题。

### V4.2.1 GA

[**点击查看 V4.2.1 GA Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.2.1)

**版本信息：**

* 发布时间：2023 年 9 月 28 日
* 版本号：V4.2.1 GA
* RPM 版本号：oceanbase-4.2.1.0-100000182023092722

**版本概览：**

OceanBase 数据库 V4.2.1 版本是 V4.2.x 版本系列的第一个长期支持版本（LTS），该版本新增了 VALUES 语句、JSON_TABLE 表达式等与 MySQL 兼容的功能，同时还提供了 DBLink 调用 Package、读取 Sequence 等与 Oracle 兼容的功能。此外，该版本还推出了 WR 数据采集框架和增强的全链路诊断功能。同时，该版本还优化了系统资源的使用，并增加了表级恢复能力和对备份介质 COS 的支持。推荐将其用于云上和线下常规业务的生产环境中。

### V4.2.0 BP1

[**点击查看 V4.2.0 BP1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.2.0)

**版本信息：**

* 发布时间：2023 年 9 月 14 日
* 版本号：V4.2.0 BP1
* RPM 版本号：oceanbase-4.2.0.0-101000042023091319

**版本概览：**

修复 Oracle 模式下，当 RS 租户和普通租户不在同一台机器上时，DDL 操作尝试在 RS 机器上使用租户 ID 分配内存可能导致的报错 4013 的问题。解决了并行执行时未指定全索引后缀条件下使用index skip scan 计划的正确性问题，以及租户设置 `_optimizer_better_inlist_costing=true` 后可能导致节点 Core dump 的问题，同时修复从 V4.1.x 版本升级到 V4.2.x 版本后 max_ls_id 维护不正确造成业务执行耗时过长的问题。

## V4.2.0

### V4.2.0 GA

[**点击查看 V4.2.0 GA Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.2.0)

**版本信息：**

* 发布时间：2023 年 8 月 31 日
* 版本号：V4.2.0 GA

**版本概览：**

OceanBase 数据库 V4.2.0 GA 版本在 Beta 版本基础上进一步增强版本稳定性，推荐用于生产。后续 V4.2.1 版本也会作为长期支持版本（LTS）对外提供服务。

### V4.2.0 Beta

[**点击查看 V4.2.0 Beta Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.2.0)

**版本信息：**

* 发布时间：2023 年 8 月 2 日
* 版本号：V4.2.0 Beta
* 版本说明：Beta 版本解决了大部分缺陷，并趋于稳定。推荐测试环境使用。

**版本概览：**

OceanBase 数据库 V4.2.0 版本是在 V4.1.0 版本基础上进一步健全完善核心特性，补齐了 V3.x 系列的全部主要功能，提升产品可扩展性，优化资源使用，提高性能，增强兼容性与易用性。目前发布的为 V4.2.0 Beta 版本，而后续的 V4.2.x 版本也会作为 长期支持版本（LTS） 对外提供服务。

## V4.1.0

### V4.1.0 BP4 Hotfix1

[**点击查看 V4.1.0 BP4 Hotfix1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.1.0)

**版本信息：**

* 发布时间：2023 年 9 月 28 日
* 版本号：V4.1.0 BP4 Hotfix1
* RPM 版本号：oceanbase-4.1.0.2-104010012023092816

**版本概览：**

修复在升级混跑期间，当在 PX 分区表的 JOIN 场景中，查询选择了 PKEY 计划（计划中包含 EXCHANGE OUT DISTR (PKEY) 字段）时，执行结果可能不正确的问题。

### V4.1.0 BP4

[**点击查看 V4.1.0 BP4 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.1.0)

**版本信息：**

* 发布时间：2023 年 9 月 21 日
* 版本号：V4.1.0 BP4
* RPM 版本号：oceanbase-4.1.0.2-104000032023092119

**版本概览：**

对 OBKV 功能进行优化，新增支持二次路由功能，避免分区 Location Cache 变更造成的请求失败问题。同时对 MySQL 模式下的临时表功能做了禁用的行为变更。

### V4.1.0 BP3 Hotfix2

[**点击查看 V4.1.0 BP3 Hotfix2 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.1.0)

**版本信息：**

* 发布时间：2023 年 9 月 11 日
* 版本号：V4.1.0 BP3 Hotfix2
* RPM 版本号：oceanbase-4.1.0.2-103020012023090809

**版本概览：**

修复并行执行未指定全索引后缀条件（例如，索引键为 c1,c2,c3，但只指定了 c2 而未指定 c3）的情况下，查询执行 index skip scan 计划引发的正确性问题。


### V4.1.0 BP3 Hotfix1

[**点击查看 V4.1.0 BP3 Hotfix1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.1.0)

**版本信息：**

* 发布时间：2023 年 8 月 25 日
* 版本号：V4.1.0 BP3 Hotfix1
* RPM 版本号：oceanbase-4.1.0.2-103010012023082514

**版本概览：**

修复 MySQL 模式下变更普通租户规格时，最大连接数降低至 100，非 Root 用户新建连接失败的问题；修复计划生成添加到 Plan Cache 时，复用已经释放计划的指针，导致 server core dump 的问题。

### V4.1.0 BP3

[**点击查看 V4.1.0 BP3 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.1.0)

**版本信息：**

* 发布时间：2023 年 8 月 25 日
* 版本号：V4.1.0 BP3 Hotfix1
* RPM 版本号：oceanbase-4.1.0.2-103010012023082514

**版本概览：**

在并行 TRUNCATE 场景下，优化序列缓存的实现，确保在 TRUNCATE TABLE 完成后，序列值不会被错误地推高，符合 MySQL 的语义。在 OBKV-Table 中新增支持 min/max/count 等聚合函数的接口，可以直接返回聚合后的结果，无需再返回数据行再进行聚合。同时，还新增了自增主键和连续递增序列的功能，支持在插入数据时进行行数据校验。

### V4.1.0 BP2 Hotfix1

[**点击查看 V4.1.0 BP2 Hotfix1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.1.0)

**版本信息：**

* 发布时间：2023 年 6 月 29 日
* 版本号：V4.1.0 BP2 Hotfix1
* RPM 版本号：oceanbase-4.1.0.1-102010012023062910

**版本概览：**

修复 MySQL 模式下，当 timestamp 类型的列指定 default 值为 current_timestamp 或 now() 时，在进行 insert/update 操作并显式指定该列的值为 default 时，导致插入时间比 current_timestamp 晚 8 个小时的问题。

### V4.1.0 BP2

[**点击查看 V4.1.0 BP2 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.1.0)

**版本信息：**

* 发布时间：2023 年 6 月 15 日
* 版本号：V4.1.0 BP2
* RPM 版本号：oceanbase-4.1.0.1-102000042023061309

**版本概览：**

修复一系列关键问题，包括事务挂起、优化器谓词下推、系统时间异常、SQL执行错误、并行更新限制、网络抖动、内存泄漏、租户白名单、数据乱码、视图访问错误、数据类型不一致以及并发操作导致的schema 版本错误，显著提升了数据库的性能。

### V4.1.0 BP1

[**点击查看 V4.1.0 BP1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.1.0)

**版本信息：**

* 发布时间：2023 年 5 月 8 日
* 版本号：V4.1.0 BP1
* RPM 版本号：oceanbase-4.1.0.0-101000052023050621

**版本概览：**

修复数据库在特殊数据分布、列删除、存储过程调用、网络配置、资源限制、元数据兼容性、正则表达式函数处理以及生成列索引使用等方面的问题，增强了数据库的稳定性、性能和兼容性。

### V4.1.0

[**点击查看 V4.1.0 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.1.0)

**版本信息：**

* 发布时间：2023 年 3 月 31 日
* 版本号：V4.1.0
* RPM 版本号：oceanbase-4.1.0.0-100001122023040322

**版本概览：**

OceanBase 数据库 V4.1.0 版本面向公有云和开源用户场景需求，在对功能健全优化的同时，不断对产品进行打磨和完善，在对 MySQL 8.0 兼容、性能、易用性、成本方面进行优化增强，目标支持项目规模化复制，是真正可全面商业化推广的版本。

## V3.2.4

### V3.2.4 BP8

[**点击查看 V3.2.4 BP8 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.4)

**版本信息：**

* 发布时间：2024 年 4 月 17 日
* 版本号：V3.2.4 BP8
* RPM 版本号：oceanbase-3.2.4.8-108000142024041520

**版本概览：**

支持备份备份集对应的 `table_name_list`，并提供 `ob_admin` 解析备份集的 `table_name_list` 的能力。

### V3.2.4 BP7 Hotfix1

[**点击查看 V3.2.4 BP7 Hotfix1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.4)

**版本信息：**

* 发布时间：2024 年 1 月 3 日
* 版本号：V3.2.4 BP7 Hotfix1
* RPM 版本号：oceanbase-3.2.4.7-107010022023122913

**版本概览：**

从该版本开始，基于 ARM 平台的 RPM 包，会默认开启 LSE 编译。修复存在等值连接条件的两列上，有一侧存在 IN 表达式，例如 `t1.c1 = t2.c1 and t1.c1 in (1,2,3,4,5)` 时，如果还存在其他列上的连接条件，做 Nest Loop Join 时右表上有多个索引可选的情况下，可能导致存在 IN 条件的列索引无法选择，进而可能导致性能不优的问题。

### V3.2.4 BP7

[**点击查看 V3.2.4 BP7 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.4)

**版本信息：**

* 发布时间：2023 年 12 月 5 日
* 版本号：V3.2.4 BP7
* RPM 版本号：oceanbase-3.2.4.7-107000012023113010

**版本概览：**

该版本有如下功能的新增：支持备份配置项并提供解析能力；新增 XA 事务相关监控统计项，便于在 XA 事务流量发生变化时，用户可以及时感知。

### V3.2.4 BP6 Hotfix4

[**点击查看 V3.2.4 BP6 Hotfix4 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.4)

**版本信息：**

* 发布时间：2024 年 1 月 29 日
* 版本号：V3.2.4 BP6 Hotfix4
* RPM 版本号：oceanbase-3.2.4.6-106040022024012617

**版本概览：**

修复在不需要回表的全局索引场景下，OBServer 未正确返回二次路由错误信息，导致 ODP 路由不准，性能不佳的问题。

### V3.2.4 BP6 Hotfix3

[**点击查看 V3.2.4 BP6 Hotfix3 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.4)

**版本信息：**

* 发布时间：2023 年 12 月 28 日
* 版本号：V3.2.4 BP6 Hotfix3
* RPM 版本号：oceanbase-3.2.4.6-106030022023122216

**版本概览：**

从该版本开始，基于 ARM 平台的 RPM 包，会默认开启 LSE 编译。修复业务单机分区数较多的情况下，压测流量落在新建分区上，无法利用 Clog 聚合优化，随着时间推移引起性能下降的问题。

### V3.2.4 BP6 Hotfix2

[**点击查看 V3.2.4 BP6 Hotfix2 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.4)

**版本信息：**

* 发布时间：2023 年 12 月 11 日
* 版本号：V3.2.4 BP6 Hotfix2
* RPM 版本号：oceanbase-3.2.4.6-106020012023121110

**版本概览：**

修复 Connect By 数据量过大导致内存溢出的问题。

### V3.2.4 BP6 Hotfix1

[**点击查看 V3.2.4 BP6 Hotfix1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.4)

**版本信息：**

* 发布时间：2023 年 11 月 8 日
* 版本号：V3.2.4 BP6 Hotfix1
* RPM 版本号：oceanbase-3.2.4.6-106010012023110914

**版本概览：**

修复普通租户下的 `oceanbase.GV$OB_SESSION` 视图可以查到其他租户的 Session 信息的问题；修复 Oracle模式下，`decode` 表达式的第三个参数是 `varchar2/char` 类型，且类型推导过程中 `length_semantics` 未设置时，SQL 执行报错 -4016 的问题。

### V3.2.4 BP6

[**点击查看 V3.2.4 BP6 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.4)

**版本信息：**

* 发布时间：2023 年 11 月 3 日
* 版本号：V3.2.4 BP6
* RPM 版本号：oceanbase-3.2.4.6-106000062023110109

**版本概览：**

- 完善 COREDUMP 信息：COREDUMP 错误信息中支持打印 SQL 内容，便于快速定位问题 SQL ，采取限流等操作应急。

- 允许上调 MySQL 模式下最大分区数：目前 MySQL 模式下限制单表最大分区数为 8192，但遇到部分业务单表分区过万的情况。新版本增加配置项 `max_partition_num` 控制 MySQL 模式下允许的单表最大分区数，在业务分区过多的场景下，可适当调大上限放宽限制。

- `FIND_IN_SET` 函数性能优化：针对 `FIND_IN_SET` 第二个参数为常量的场景，优化了函数执行性能。


### V3.2.4 BP5 Hotfix7

[**点击查看 V3.2.4 BP5 Hotfix7 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.4)

**版本信息：**

* 发布时间：2024 年 1 月 4 日
* 版本号：V3.2.4 BP5 Hotfix7
* RPM 版本号：oceanbase-3.2.4.5-105070012024010214

**版本概览：**

修复 Primary Zone 为 RANDOM 时，PX Batch Rescan 返回结果不正确的问题；修复 Oracle 模式下，高并发查询 `ALL_` 开头的视图，CPU 使用过高的问题。

### V3.2.4 BP5 Hotfix6

[**点击查看 V3.2.4 BP5 Hotfix6 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.4)

**版本信息：**

* 发布时间：2023 年 12 月 15 日
* 版本号：V3.2.4 BP5 Hotfix6
* RPM 版本号：oceanbase-3.2.4.5-105060012023121115

**版本概览：**

- 修复 OBServer 数量过多时，复制表相关虚拟表 `__all_virtual_duplicate_partition_mgr_stat` 中 `partition_lease_list` 展示不完整的问题。

- 修复切主场景下，复制表事务提交后未读到最新数据的问题。

- 修复复制表切主场景下写入的日志 obcdc 无法识别的问题。


### V3.2.4 BP5 Hotfix5

[**点击查看 V3.2.4 BP5 Hotfix5 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.4)

**版本信息：**

* 发布时间：2023 年 12 月 6 日
* 版本号：V3.2.4 BP5 Hotfix5
* RPM 版本号：oceanbase-3.2.4.5-105050022023120510

**版本概览：**

- 修复 Oracle 模式下，在 For Loop Cursor 中嵌套其他 Block A，在 Block A 中 Goto 到 For Loop Cursor 外层，再次进入 For Loop Cursor 中时，报错 -5589，`Cursor is already open` 的问题。
- 修复 Oracle 模式下，使用 RR（或 Serializable）隔离级别时，如果会话 `autocommit` 为 False，且执行过 Select 语句，设置 `set autocommit = 1` 没有触发隐式提交的问题。
- 修复 Oracle 模式下，使用 RR（或 Serializable）隔离级别情况下，数据被其他 Session 删除并发起转储且超过 `undo_retention` 设置时间时，Read Only 事务返回超时的问题。

### V3.2.4 BP5 Hotfix4

[**点击查看 V3.2.4 BP5 Hotfix4 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.4)

**版本信息：**

* 发布时间：2023 年 11 月 14 日
* 版本号：V3.2.4 BP5 Hotfix4
* RPM 版本号：oceanbase-3.2.4.5-105040022023111323

**版本概览：**

- 修复 PS 模式下，SQL 无法命中 Plan Cache 的问题。

- 修复 Oracle 模式下，使用了和原生 Oracle 不同的 Hash 算法，`dbms_utility.get_hash_value` 执行结果不同的问题。


### V3.2.4 BP5 Hotfix3

[**点击查看 V3.2.4 BP5 Hotfix3 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.4)

**版本信息：**

* 发布时间：2023 年 11 月 3 日
* 版本号：V3.2.4 BP5 Hotfix3
* RPM 版本号：oceanbase-3.2.4.5-105030012023103122

**版本概览：**

- 修复存在函数索引的情况下，Prepare Stmt 中包含函数索引定义且对定义中常量进行了参数化时，SQL 执行报错的问题。

- 修复 `UNION` 子句 `SELECT` 中有常量，常量输出列在外围用作过滤时，由于 Exec Param 将过滤谓词转换为 Startup Filter，并按老引擎执行，SQL 报错 `failed to calc startup filter` 的问题。

### V3.2.4 BP5 Hotfix2

[**点击查看 V3.2.4 BP5 Hotfix2 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.4)

**版本信息：**

* 发布时间：2023 年 10 月 9 日
* 版本号：V3.2.4 BP5 Hotfix2
* RPM 版本号：oceanbase-3.2.4.5-105020052023092709

**版本概览：**

- 修复 MySQL 模式下，`DATETIME` 类型转 `JSON` 类型时区偏移的问题。  - 修复 Oracle 模式下，XA 事务内存泄漏问题。

- 修复 Oracle 模式下，开启 PS 二合一协议时，如果传参为空且对应谓词可以改成恒 False，执行计划走偏性能较差的问题。

### V3.2.4 BP5 Hotfix1

[**点击查看 V3.2.4 BP5 Hotfix1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.4)

**版本信息：**

* 发布时间：2023 年 9 月 4 日
* 版本号：V3.2.4 BP5 Hotfix1
* RPM 版本号：oceanbase-3.2.4.5-105010012023090116

**版本概览：**

修复在执行 `insert into...on duplicate key /replace into` 语句插入大量冲突行时，由于内存释放不及时，可能导致租户内存不足的报错问题。

### V3.2.4 BP5

[**点击查看 V3.2.4 BP5 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.4)

**版本信息：**

* 发布时间：2023 年 8 月 18 日
* 版本号：V3.2.4 BP5
* RPM 版本号：oceanbase-3.2.4.5-105000012023081513


**版本概览：**

OBKV 引入二次路由功能以规避分区位置缓存变化导致的请求失败问题，同时新增 `opt_param` 和 `no_index` HINT 增强执行计划能力，优化进程列表统计时间精度并新增 CPU 时间统计，增加`GV$SYSSTAT` 视图中的 CPU 时间统计项以更准确反映 CPU 利用率，提升了 Oracle 模式下全局临时表的稳定性，支持 Oracle 的 FM 日期格式修饰词，并兼容 MySQL 8.0 Lateral Derived Tables 功能。


### V3.2.4 BP4 Hotfix5

[**点击查看 V3.2.4 BP4 Hotfix5 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.4)

**版本信息：**

* 发布时间：2023 年 8 月 2 日
* 版本号：V3.2.4 BP4 Hotfix5
* RPM 版本号：oceanbase-3.2.4.4-104050012023073116

**版本概览：**

修复 MySQL 模式下 Trigger 的 Insert 语句返回的 `rows affected` 与原生 MySQL 不一致的问题，解决 `timestamp` 类型列默认值为 `current_timestamp` 或 `now()` 时导致的时区延迟问题，改善 UDF 在存在大量错误日志时的性能问题，解决 Unit 迁移或数量变更时存储过程偶尔报错 4201 的问题，修复 CPU 使用过高导致 RS 切主失败的问题，以及修复 Public 同义词与 Function 对象或 Package 对象同名时，同义词解析无限递归导致爆栈的问题。


### V3.2.4 BP4

[**点击查看 V3.2.4 BP4 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.4)

**版本信息：**

* 发布时间：2023 年 6 月 21 日
* 版本号：V3.2.4 BP4
* RPM 版本号：oceanbase-3.2.4.4-104000052023062021

**版本概览：**

对 OBKV 中进行了功能优化，增强了 Table 模型，支持单分区内的 Count 函数，同时引入了定义过期列功能以实现数据的自动清理。在 MySQL 数据类型方面，新增了对 `NCHAR/NVARCHAR` 类型的支持，并实现了 `SELECT N'xxx'` 语法。为了提升 Oracle 函数的兼容性，还新增了 `SOUNDEX` 和 `NLS_INITCAP` 函数支持，后者目前限于二进制排序。此外，在安全性方面，引入了配置项 `_enable_reserved_user_dcl_restriction`，用于控制是否限制对内置用户的普通用户修改操作，以此加强安全管理。


### V3.2.4 BP3

[**点击查看 V3.2.4 BP3 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.4)

**版本信息：**

* 发布时间：2023 年 4 月 19 日
* 版本号：V3.2.4 BP3
* RPM 版本号：oceanbase-3.2.4.3-103000032023041816

**版本概览：**

新增 OBKV 连接数统计功能简化 OBKV 请求问题的定位流程，引入视图 `GV$OB_KV_CONNECTIONS` 和 `V$OB_KV_CONNECTIONS`，用于查询当前租户所有 KV 类活跃 SESSION 以及当前租户 OBServer 节点上所有 KV 类活跃 SESSION，从而更方便地监控和管理数据库连接。此外，跨机获取 SEQUENCE CURRVAL 的行为也得到了优化。在历史版本中，通过 OBProxy 连接 OBServer 节点时，如果在连续的 NEXTVAL 和 CURRVAL 调用之间发生了路由切换，不同服务端 SESSION 中调用 CURRVAL 会报错。新版本改进了这一行为，支持 OBProxy 连接 OBServer 节点时 CURRVAL 跨路由同步，即在不同服务端 SESSION 中调用 CURRVAL 时，系统会返回上一次的 NEXTVAL 值，从而提高了系统的稳定性。

### V3.2.4 BP2

[**点击查看 V3.2.4 BP2 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.4)

**版本信息：**

* 发布时间：2023 年 2 月 28 日
* 版本号：V3.2.4 BP2
* RPM 版本号：oceanbase-3.2.4.2-102000042023022717

**版本概览：**

* Oracle 模式下系统包 UTL_RAW 新增支持函数 `CAST_TO_NVARCHAR2()`，将 RAW 值转换为 NVARCHAR2 值。
* Oracle 模式下 DBLINK 支持通过 DNS 域名解析的方式进行连接。
* Oracle 模式下新增支持 `XMLAGG()`、`XMLPARSE()` 和 `XMLELEMENT()` 三个系统函数。
* MySQL 模式下支持 `FROM_BASE64()` 和 `TO_BASE64()` 函数。
* MySQL 模式下系统变量 `DEFAULT_STORAGE_ENGINE` 和 `EVENT_SCHEDULER` 兼容。
* 视图 `V$OB_SQL_AUDIT` 的字段 `REQUEST_TYPE` 新增取值 11，表示该 SQL 是在 PL 内部执行。

### V3.2.4 BP1

[**点击查看 V3.2.4 BP1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.4)

**版本信息：**

* 发布时间：2023 年 1 月 9 日
* 版本号：V3.2.4 BP1
* RPM 版本号：oceanbase-3.2.4.1-101000052023010822

**版本概览：**

安全方面优化增强，包括动态设置备份恢复操作的 AK/SK，加密存储 DBLINK 配置密码，RPC 认证通信以及 TDE 能力适配阿里云 KMS。监控统计优化新增事务和 SQL 执行耗时统计。MySQL PL 语法兼容性提升。性能优化使得简易 SQL 场景执行性能提升约4倍。

### V3.2.4

[**点击查看 V3.2.4 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.4)

**版本信息：**

* 发布时间：2022 年 11 月 1 日
* 版本号：V3.2.4
* RPM 版本号：oceanbase-3.2.4.0-100000072022102819

**版本概览：**

OceanBase 数据库 V3.2.4 版本是在 V3.2.3 稳定版本的基础上，根据客户系统生产和测试需求，继续在内核功能兼容性和稳定性方面进行迭代增强。核心能力提升如下：- MySQL 兼容性增强：支持地理信息系统（GIS），兼容 MySQL Binlog 解析，新增系统包 `DBMS_RESOURCE_MANAGER`。  - Oracle 兼容性增强：新增系统包 DBMS_SCHEDULER，系统包函数补充完善。 - 内核增强：支持基于 SQL 规则的资源隔离，支持 IPv6 协议，支持备份到 OBS，日志优化，支持配置事务大小，支持配置登录线程数量。</li></ul>

## V3.2.3

### V3.2.3 BP11 Hotfix1

[**点击查看 V3.2.3 BP11 Hotfix1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2024 年 8 月 14 日
* 版本号：V3.2.3 BP11 Hotfix1
* RPM 版本号：oceanbase-3.2.3.3-111010012024081311

**版本概览：**

修复底层模块分区引用计数泄漏的问题。

### V3.2.3 BP11

[**点击查看 V3.2.3 BP13 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2024 年 7 月 12 日
* 版本号：V3.2.3 BP11
* RPM 版本号：oceanbase-3.2.3.3-111000032024070822

**版本概览：**

**新增 XA 事务相关监控统计项**：部分客户业务会采用 XA 协议来保证跨库事务提交的原子性。由于 OceanBase 数据库本身分布式架构特性，XA 语句的执行需要消耗一定的资源。该版本在 `[G]V$SYSSTAT` 中新增 `XA_TRANS_START_COUNT`、`XA_READ_ONLY_TRANS_TOTAL_COUNT`、`XA_ONE_PHASE_COMMIT_TOTAL_COUNT` 等 30 余项统计项，便于在 XA 事务流量发生变化时，用户可以及时感知。

### V3.2.3 BP10 Hotfix13

[**点击查看 V3.2.3 BP10 Hotfix13 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2024 年 6 月 21 日
* 版本号：V3.2.3 BP10 Hotfix13
* RPM 版本号：oceanbase-3.2.3.3-110130012024061819

**版本概览：**

修复 insert on duplicate key update a = values(b) 中 values() 计算问题，导致 OBServer 异常报错 Column 'a' cannot be null 的问题。

### V3.2.3 BP10 Hotfix12

[**点击查看 V3.2.3 BP10 Hotfix12 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2024 年 6 月 7 日
* 版本号：V3.2.3 BP10 Hotfix12
* RPM 版本号：oceanbase-3.2.3.3-110120012024060510

**版本概览：**

* 修复 Nested Loop Join 场景 Startup Filter 多次 Rescan 导致 Core 的问题。
* 修复 Nested Loop Join 场景 ScanDASCtx 模块内存膨胀的问题。

### V3.2.3 BP10 Hotfix11

[**点击查看 V3.2.3 BP10 Hotfix11 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2024 年 5 月 25 日
* 版本号：V3.2.3 BP10 Hotfix11
* RPM 版本号：oceanbase-3.2.3.3-110110032024052217

**版本概览：**

* 修复事务内有较大的 clob 数据插入时，如果插入 SQL 触发唯一键冲突，会导致事务意外回滚的问题。
* 修复 TX_CALLBACK_CTX_ID 模块内存占用率高的问题。
* 修复 PS 二合一协议在某些执行报错场景，无限重试到超时的问题。
* 优化鲲鹏处理器下计算性能（支持 memset 函数、lse、-wl -q 编译选项）。

### V3.2.3 BP10 Hotfix10

[**点击查看 V3.2.3 BP10 Hotfix10 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2024 年 4 月 30 日
* 版本号：V3.2.3 BP10 Hotfix10
* RPM 版本号：oceanbase-3.2.3.3-110100012024042814

**版本概览：**

* 修复 OCP 开启事务采集时，查询 OBServer 内部表导致集群 Core 的问题。
* 修复 Sequence 在 nocache+noorder 模式下，修改步长后，序列值回退的问题。

### V3.2.3 BP10 Hotfix9

[**点击查看 V3.2.3 BP10 Hotfix9 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2024 年 4 月 17 日
* 版本号：V3.2.3 BP10 Hotfix9
* RPM 版本号：oceanbase-3.2.3.3-110090012024041611

**版本概览：**

* 修复 Nested Loop Join 场景下，大量 Rescan 命中同一个微块导致 500 租户 DecoderCtx 内存膨胀的问题。
* 修复 Varchar 类型转换为 Date 类型异常，导致 OBServer Core 的问题。

### V3.2.3 BP10 Hotfix8

[**点击查看 V3.2.3 BP10 Hotfix8 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2024 年 2 月 29 日
* 版本号：V3.2.3 BP10 Hotfix8
* RPM 版本号：oceanbase-3.2.3.3-110080012024022713

**版本概览：**

* 修复一个长时间不结束的只读请求，叠加进行业务负载均衡、Drop Table、Truncate Table、Drop Replica 等需要删除分区的操作时，删除分区会卡住，进而可能造成冻结卡住或无法转储导致内存爆、Clog 盘爆的问题。
* 修复 Group By 上拉场景，对相关子查询改写异常，进而导致 SQL 执行报错的问题。
* 修复带多个子查询的 Subplan Filter 算子 PKEY 分布式计划查询结果错误的问题。
* 修复用户 SQL 的 Where 谓词中，包含 `xxx IN subquery1 and xxx NOT IN subquery2`, 如果 `subquery1`  结果集是 `subquery2` 的超集，可能触发改写错误的问题。
* 修复在嵌套语句中，使用动态 SQL，执行 `ALTER SESSION SET` 类型的语句报错的问题。

### V3.2.3 BP10 Hotfix7

[**点击查看 V3.2.3 BP10 Hotfix7 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2024 年 1 月 26 日
* 版本号：V3.2.3 BP10 Hotfix7
* RPM 版本号：oceanbase-3.2.3.3-110070012024012316

**版本概览：**

* 修复 Oracle 模式下，使用 `dbms_metadata.get_ddl` 子程序查看建表语句，不展示表的唯一约束的问题。
* 修复租户过多导致重启 OBServer 失败报错 -4013 的问题。
* 修复内核因实现类似 SQLPlus 客户端 Trim 掉字符串换行前空格行为，导致和原生 Oracle 不兼容的问题。该版开始不再对字符串换行前空格做处理。
* 修复 `INSERT INTO SELECT` 未拦截分区外数据的问题。
* 修复并行场景下，遇到异常报错时，RPC 线程一直不释放，RS 队列堵塞的问题。

### V3.2.3 BP10 Hotfix6

[**点击查看 V3.2.3 BP10 Hotfix6 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2024 年 1 月 17 日
* 版本号：V3.2.3 BP10 Hotfix6
* RPM 版本号：oceanbase-3.2.3.3-110060012024011615

**版本概览：**

修复执行计划包含 Nested Loop Join 时，若连接条件和投影表达式中存在复杂共享表达式, 查询结果可能不正确的问题。

### V3.2.3 BP10 Hotfix5

[**点击查看 V3.2.3 BP10 Hotfix5 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2023 年 11 月 24 日
* 版本号：V3.2.3 BP10 Hotfix5
* RPM 版本号：oceanbase-3.2.3.3-110050012023112210

**版本概览：**

- **系统包函数 `dbms_utility.get_hash_value` 计算结果范围变更：** Oracle 系统包函数 `dbms_utility.get_hash_value(str, base, bucket_size)` 计算结果范围为 [base, base+bucket_size)。OceanBase 老版本计算结果范围为 [base, bucket_size]，新版本变更为 [base, base+bucket_size)。

- 修复旧版本引擎处理恒 False 谓词的逻辑不完善导致计划走偏的问题。

### V3.2.3 BP10 Hotfix4

[**点击查看 V3.2.3 BP10 Hotfix4 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2023 年 11 月 8 日
* 版本号：V3.2.3 BP10 Hotfix4
* RPM 版本号：oceanbase-3.2.3.3-110040022023110614

**版本概览：**

* 修复 OBServer 在编译含大量 SQL 语句的文本匿名块时，CPU 可能持续飙高无法下降的问题。
* 修复 JDBC 2.2.6 及之前版本与 JDBC 2.2.6 之后版本，设置 `useServerPrepStmts=true` 混跑时，如果 SQL 顶层为 PX 算子产生并行 Encoding 优化，应用侧可能出现获取数据为乱码的问题。
* 修复执行一条带 UDF 的 SQL，UDF 内部会访问 Package 中的复杂类型标量时，直连不同机器，查询返回的结果集不一致的问题。
* 修复错误的子查询合并改写，导致查询结果集错误的问题。

### V3.2.3 BP10 Hotfix3

[**点击查看 V3.2.3 BP10 Hotfix3 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2023 年 10 月 23 日
* 版本号：V3.2.3 BP10 Hotfix3
* RPM 版本号：oceanbase-3.2.3.3-110030012023101913

**版本概览：**

* 修复 JDBC 2.4.5 通过 PS Cursor 执行 SQL 时，`sql_audit` 中没有 `param_values` 内容的问题。
* 修复 MySQL 模式下，`insert/replace into ... values` 报错没体现行（Column）、列（Row）相关信息的问题。
* 修复 Decode 函数的类型推导异常，导致 SQL 执行报错 `value too large for column` 的问题。
* 修复 V3.2.3 版本由于不支持 SEMI JOIN/SUBPLAN FILTER 的短路执行功能，导致迭代器的对位异常，Update 执行报错 -4377 的问题。
* 修复异常情况下临时文件 Read I/O 发生内存泄露，泄漏一段时间后导致大查询和建索引任务报错 -4013 的问题。


#### V3.2.3 BP10 Hotfix2

[**点击查看 V3.2.3 BP10 Hotfix2 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2023 年 9 月 28 日
* 版本号：V3.2.3 BP10 Hotfix2
* RPM 版本号：oceanbase-3.2.3.3-110020022023092816

**版本概览：**

修复升级混跑期间，当在 PX 下执行分区表的 JOIN 场景时，如查询选择了 PKEY 计划(计划中包含 `EXCHANGE OUT DISTR (PKEY)` 字段)，可能会导致执行结果不正确的问题。

#### V3.2.3 BP10 Hotfix1

[**点击查看 V3.2.3 BP10 Hotfix1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2023 年 9 月 25 日
* 版本号：V3.2.3 BP10 Hotfix1
* RPM 版本号：oceanbase-3.2.3.3-110010042023092216

**版本概览：**

修复非并行执行时，分布式执行中间结果占用内存较大的问题； MySQL 模式下 INSERT IGNORE 未忽略非空约束导致执行报错、 SYSDATE 和 NOW 函数执行结果与原生 MySQL 不一致的问题；优化器改写为 NLJ BC2HOST 计划后，SQL 执行报错的问题。

### V3.2.3 BP10

[**点击查看 V3.2.3 BP10 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2023 年 9 月 15 日
* 版本号：V3.2.3 BP10
* RPM 版本号：oceanbase-3.2.3.3-110000092023091219

**版本概览：**

OceanBase 数据库 V3.2.3 BP10 版本能力提升如下：

- 在 COREDUMP 错误信息中支持打印 SQL 内容，可以帮助快速定位问题 SQL，并采取限流等操作来进行紧急处理。

- 支持 `GET DIAGNOSTICS`、`GET STACKED DIAGNOSTICS CONDITION`、`DECLARE CONTINUE HANDLER` 和 `SIGNAL SQLSTATE` 等 MySQL PL 语法。

- 支持为 SET 变量赋值子查询。

### V3.2.3 BP9 Hotfix2

[**点击查看 V3.2.3 BP9 Hotfix2 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2023 年 8 月 18 日
* 版本号：V3.2.3 BP9 Hotfix2
* RPM 版本号：oceanbase-3.2.3.3-109020032023081510

**版本概览：**

修复 ALTER TABLE 操作中的 NOT NULL 约束标记错误，QUERY RANGE 估行未使用直方图统计信息，以及 .NET 平台使用 MySQL Connector 连接时获取系统变量报错的问题。


### V3.2.3 BP9 Hotfix1

[**点击查看 V3.2.3 BP9 Hotfix1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2023 年 8 月 1 日
* 版本号：V3.2.3 BP9 Hotfix1
* RPM 版本号：oceanbase-3.2.3.3-109010012023072721

**版本概览：**

在 `GV$SYSSTAT` 视图中新增 `cpu time` 统计项，以提供准确的租户 CPU 利用率。

### V3.2.3 BP9

[**点击查看 V3.2.3 BP9 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2023 年 7 月 14 日
* 版本号：V3.2.3 BP9
* RPM 版本号：oceanbase-3.2.3.3-109000182023071410

**版本概览：**

MySQL 数据类型优化：新增支持 NCHAR/NVARCHAR 数据类型，并支持 `SELECT N'xxx'` 语法。

### V3.2.3 BP8

[**点击查看 V3.2.3 BP8 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2023 年 4 月 15 日
* 版本号：V3.2.3 BP8
* RPM 版本号：oceanbase-3.2.3.3-108000062023041511

**版本概览：**

在节点宕机或 Leader 切换场景下，新增支持 SQL 快速失败能力，降低响应延迟；将 OBStack 工具集成到 OBServer 安装包中，便于轻量实时地获取线程堆栈；增加配置项 `_enable_reserved_user_dcl_restriction` 控制是否限制普通用户对内置用户进行修改。

### V3.2.3 BP7

[**点击查看 V3.2.3 BP7 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2023 年 1 月 19 日
* 版本号：V3.2.3 BP7
* RPM 版本号：oceanbase-3.2.3.3-107000092023011911

**版本概览：**

MySQL 模式下支持 `FROM_BASE64()` 和 `TO_BASE64()` 函数；支持使用 GRANT 语法对系统包 `DBMS_RESOURCE_MANAGER` 赋权；优化虚拟表 `information_schema.table_constraints` 的访问性能。

### V3.2.3 BP6

[**点击查看 V3.2.3 BP6 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2022 年 11 月15 日
* 版本号：V3.2.3 BP6
* RPM 版本号：oceanbase-3.2.3.3-106000102022111521

**版本概览：**

实现备份恢复操作的动态 AK/SK 设置，优化了 IN 表达式查询性能，支持 OBKV-Table 的 Filter 和 QueryAndMutate 接口函数，引入了标量函数，优化了分区路由，以及增强了安全能力通过透明加密与阿里云 KMS 的适配。

### V3.2.3 BP5

[**点击查看 V3.2.3 BP5 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2022 年 9 月 9 日
* 版本号：V3.2.3 BP5
* RPM 版本号：oceanbase-3.2.3.2-105000062022090916

**版本概览：**

支持 SQL 文本的预处理语句，增强备份恢复操作通过外部存储 IO 独立子进程功能，新增 MySQL 模式下的 `ADDTIME()` 和 `DAYNAME()` 函数，优化日志输出，新增集群级配置项以控制备份恢复功能及设定相关参数，以及增加 Window Function 数量限制适配不同模式下的要求。

### V3.2.3 BP4

[**点击查看 V3.2.3 BP4 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2022 年 8 月 5 日
* 版本号：V3.2.3 BP4
* RPM 版本号：oceanbase-3.2.3.1-20220805104621

**版本概览：**

新增支持表级别 HINT 并行设置，增强了存储过程调试的稳定性并支持 ARM 平台，以及支持限定场景下的添加分区能力，并通过配置项 `_enable_add_between_range_partitions` 开启该功能。

### V3.2.3 BP3

[**点击查看 V3.2.3 BP3 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2022 年 6月 22 日
* 版本号：V3.2.3 BP3
* RPM 版本号：oceanbase-3.2.3.0-20220622171245

**版本概览：**

引入数据库存储加密（TDE）支持国密 SM4 算法，Oracle 模式下支持列字段默认值使用 Sequence 函数定义，存储过程支持类型构造函数，优化了 Limit 算子性能并支持其下推到 Join 算子，以及支持 SELECT INTO 命令设置文件字符集。

### V3.2.3 BP2

[**点击查看 V3.2.3 BP2 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2022 年 5月 30日
* 版本号：V3.2.3 BP2
* RPM 版本号：oceanbase-3.2.3.0-20220530152606

**版本概览：**

支持通过 `SELECT INTO` 命令将表数据直接导出到阿里云对象存储 (OSS) 上，MySQL 模式下支持 DETERMINISTIC 属性。

### V3.2.3 BP1

[**点击查看 V3.2.3 BP1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2022 年 4月 29 日
* 版本号：V3.2.3 BP1
* RPM 版本号：oceanbase-3.2.3.0-20220429172811

**版本概览：**

MySQL 模式下支持关键字 DISTINCTROW。

### V3.2.3

[**点击查看 V3.2.3 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.3)

**版本信息：**

* 发布时间：2022 年 4 月 18 日

* 版本号：V3.2.3

* RPM 版本号：oceanbase-3.2.3.0-20220418212020

**版本概览：**

OceanBase 数据库 V3.2.3 版本是继续在内核兼容性和性能方面进行迭代增强，在满足客户生产需要的同时，增强质量保障测试，推出 V3.2.x 系列稳定版本。核心能力提升如下：

- MySQL 兼容性增强：扩展支持 SEQUENCE 对象，支持通用表表达式（CTE），支持 CHECK 约束，CAST 函数支持字符集设置，存储过程支持 GET DIAGNOSTICS 语句，支持 `SEND_LONG_DATA(24)` 协议等。

- Oracle 兼容性增强：支持数据库链接到 Oracle（DBLINK），支持设置 SEQUENCE 对象的起始值，新增系统包函数 `DBMS_LOB.COMPARE`。

- 性能优化：优化 OBKV-Table 查询，优化分区表 NLJ 算子，优化正则表达式等。 - 稳定性提升：增强备份文件完整性校验，优化选择率计算逻辑等。

## V3.2.2

### V3.2.2 BP2

[**点击查看 V3.2.2 BP2 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.2)

**版本信息：**

* 发布时间：2022 年 1 月 19日

* 版本号：V3.2.2 BP2

* RPM 版本号：oceanbase-3.2.2-20220119123901

**版本概览：**

新增在 Oracle 模式下支持 `REVERSE` 函数，优化批量 `UPDATE` 语句执行性能。


### V3.2.2 BP1

[**点击查看 V3.2.2 BP1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.2)

**版本信息：**

* 发布时间：2021 年 12 月 15 日

* 版本号：V3.2.2 BP1

* RPM 版本号：oceanbase-3.2.2-20211215001504

**版本概览：**

Oracle 模式下 TRIGGER 支持 `DECODE` 函数，`RANGE/HASH/LIST` 分区裁剪支持非单一时间范围。

### V3.2.2

[**点击查看 V3.2.2 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.2)

**版本信息：**

* 发布时间：2022 年 1 月 10 日

* 版本号：V3.2.2

* RPM 版本号：oceanbase-3.2.2-20211130225726

**版本概览：**

OceanBase 数据库 V3.2.2 版本主要是对数据库内核的稳定性和易用性进行迭代改进，打造满足客户生产需要的稳定版本，同时在 MySQL 模式下推出 JSON 格式数据类型。核心特性如下：

- 支持 JSON 类型：MySQL 模式下新增支持 JSON 格式数据类型，支持 DDL 操作、创建索引、SQL 查询、数据类型转换、MySQL 5.7 版本的全量以及 8.0 版本的部分 JSON 函数。- 内核增强：TableGroup 支持非模版化二级分区；支持主备集群解耦。
- 兼容性：MySQL 租户新增支持聚合函数 `BIT_AND()/BIT_OR()/BIT_XOR()`；Oracle 租户新增支持 ArrayBinding 返回生效的行数。
- 易用性：支持 `SQL_AUDIT` 视图显示绑定变量的值；PL 在解析和执行过程异常时返回错误信息与行号。
- 稳定性：新增支持网络传输压缩；优化 `TIMESTAMP` 分区精度。
- 性能：优化 TRUNCATE 带约束表的性能；优化 `SQL_AUDIT` 视图统计资源消耗；优化多重合并算法和 LIMIT 算子下推逻辑。

## V3.2.1

### V3.2.1 BP1

[**点击查看 V3.2.1 BP1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.1)

**版本信息：**

* 发布时间：2021 年 9月 30日

* 版本号：V3.2.1 BP1

* RPM 版本号：oceanbase-3.2.1-20210930192315

**版本概览：**

增加 CLOG 文件的自动校验和缓存更新，减少 `TMP.FILE` 文件日志输出，支持 PL 中占位符访问 ARRAY 数据元素，引入国密（SM4）算法表加密，以及支持 `ANONYMOUS/PROCEDURE` 对绑定数组变量的支持。

### V3.2.1

[**点击查看 V3.2.1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.1)

**版本信息：**

* 发布时间：2021 年 9 月 30 日

* 版本号：V3.2.1

* RPM 版本号：oceanbase-3.2.1-20210901195302

**版本概览：**

OceanBase 数据库 V3.2.1 版本主要围绕兼容性、HTAP 混合负载、内核能力增强、小规格性价比等几大核心能力，在 Oracle/MySQL 兼容、易用性、稳定性、性能和功能等诸多方面持续迭代增强与优化升级，在提升用户体验的同时，帮助用户更轻松地完成应用迁移、TP 和 AP 统一部署、降低应用开发部署和运维成本。


## V3.2.0

[**点击查看 V3.2.0 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.2.0)

**版本信息：**

* 发布时间：2021 年 7月 5日

* 版本号：V3.2.0

* RPM 版本号：oceanbase-3.2.0-20210705162520

**版本概览：**

OceanBase 数据库 V3.2.0 版本为实验室测试版本，供 OceanBase 内部人员对 HTAP 能力进行验证测试。

## V3.1.2

### V3.1.2 BP11

[**点击查看 V3.1.2 BP11 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.1.2)

**版本信息：**

* 发布时间：2023 年 1 月 6 日
* 版本号：V3.1.2 BP11
* RPM 版本号：oceanbase-3.1.2-111000052023010412

**版本概览：**

* 修复存储过程执行报错 -4201, hash map/set entry not exist 的问题。
* 修复 DML 并行执行报错 -4377 的问题。
* 修复 MySQL 模式下，带 UDF 的 Select 语句事务 SCHEDULER 超过 10 万导致 SQL 报错 -4013 的问题。
* 修复 Insert Select 场景，PDML 指定参与者过多的问题。
* 修复只读副本切换全功能型副本报错的问题。
* 修复包含 UNION ALL 的 SQL 多次执行，第一次为分布式计划且两支参数不同，第二次为 Local 计划且两支参数相同，第三次为 Local 计划且两支参数不同情况下，执行计划选择错误，查询结果可能不正确的问题。
* 修复带 UDF 的查询可能产生悬挂事务，进而导致合并超时、日志归档和数据备份失败的问题。

### V3.1.2 BP10

[**点击查看 V3.1.2 BP10 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.1.2)

**版本信息：**

* 发布时间：2022 年 9 月 29 日
* 版本号：V3.1.2 BP10
* RPM 版本号：oceanbase-3.1.2-110050022022120810

**版本概览：**

* 修复 Oracle 模式下，PL 中执行 Insert Values 语句，可能出现插入数据精度丢失的问题。
* 修复老引擎中 Subplan Filter 存在多个子查询时，特殊计划形态及数据分布下，Create Table AS 创建表，表数据存在不一致的问题。
* Oracle 模式下支持 UNISTR、ASCIISTR 表达式，解决 OMS 迁移遇到生僻字无法处理的问题。
* 修复 Oracle 模式下，PL 中使用 Insert Values 需要在两处抽取同一变量的场景，选用了错误的执行计划导致执行报错 -4016 的问题。
* 修复 Hash Join 的 Join Key 存在大量 Null 值，造成 Hash Table 倾斜，执行性能较差的问题。
* 修复 px batch rescan 存在 bug 导致 SQL 执行超时的问题。
* 修复 PS Cache 内存碎片造成 SQL 执行报错 -4013 的问题。

### V3.1.2 BP9

[**点击查看 V3.1.2 BP9 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.1.2)

**版本信息：**

* 发布时间：2022 年 7 月 28 日
* 版本号：V3.1.2 BP9
* RPM 版本号：oceanbase-3.1.2-20220727191622

**版本概览：**

进行了多项优化和修复，包括增强 CPU 参数精确度、提高 OLAP 业务下算子执行效率、减少 Root Server 模块日志错误以及解决了字符集不同导致的报错问题、`SQL_AUDIT` 视图数据导出问题。此外，还修复了 OBServer 节点全局索引初始化异常、内存使用统计不准确和存储过程执行内存占用过大的问题。

### V3.1.2 BP8

[**点击查看 V3.1.2 BP8 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.1.2)

**版本信息：**

* 发布时间：2022 年 3月 30日

* 版本号：V3.1.2 BP8

* RPM 版本号：oceanbase-3.1.2-20220329234820

**版本概览：**

修复包括 `v$sql_audit` 视图时间准确度问题、唯一索引重复数据的错误处理、字符集合混用支持、配置项影响备份数据清理、MySQL 查询参数结果为空、PL/SQL 入参转换报错、PL 调用引起包状态异常、数据备份时 schema version 不准确和不同字符集返回结果报错的问题。

### V3.1.2 BP7

[**点击查看 V3.1.2 BP7 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.1.2)

**版本信息：**

* 发布时间：2022 年 2月 24日

* 版本号：V3.1.2 BP7

* RPM 版本号：oceanbase-3.1.2-20220223145512

**版本概览：**

新增支持 OUTER JOIN 的连接条件为子查询语句，Oracle 模式下引入 DBMS_LOB.COMPARE 方法以支持 CLOB 字段字符串的比较，并通过配置项 `auto_refresh_location_cache` 实现副本位置的动态刷新功能。

### V3.1.2 BP6

[**点击查看 V3.1.2 BP6 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.1.2)

**版本信息：**

* 发布时间：2021 年 12月 31日

* 版本号：V3.1.2 BP6

* RPM 版本号：oceanbase-3.1.2-20211230114204

**版本概览：**

实现了主备集群解耦，Oracle 模式增加了对 `USERENV('SID')`、`USERENV('LANGUAGE')` 和 `USERENV('INSTANCE')` 的支持，OBServer 默认进行 SCHEMA 变更历史表的记录清理，并且优化了在空表上创建全局索引的性能。


### V3.1.2 BP5

[**点击查看 V3.1.2 BP5 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.1.2)

**版本信息：**

* 发布时间：2021 年 11月 19日

* 版本号：V3.1.2 BP5

* RPM 版本号：oceanbase-3.1.2-20211119151959

**版本概览：**

MySQL 模式下支持 `DEGREES()` 函数；匿名块支持 `CURSOR` 作为出参；OBServer 启动时增加对执行用户的 `UID` 检查，禁止非 ADMIN 用户启动。

### V3.1.2 BP4

[**点击查看 V3.1.2 BP4 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.1.2)

**版本信息：**

* 发布时间：2021 年 10月 13日

* 版本号：V3.1.2 BP4

* RPM 版本号：oceanbase-3.1.2-20211013162404

**版本概览：**

优化改进 `gv$sql_plan_monitor` 视图的显示，增加对本地和远端计划信息的记录；增加系统包函数 `DBMS_LOB.OBCI_WRITE`；`NOT IN` 表达式算子支持提取查询范围。

### V3.1.2 BP3

[**点击查看 V3.1.2 BP3 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.1.2)

**版本信息：**

* 发布时间：2021 年 9月 15日

* 版本号：V3.1.2 BP3

* RPM 版本号：oceanbase-3.1.2-20210914104736

**版本概览：**

新增分区表开启 SQL PLAN 自动淘汰，支持 TDE 功能与客户自有 KMS 系统集成，MySQL 模式下引入 `ANY_VALUE()` 函数，实现了 Follower 节点副本的强一致性读，LIBOBLOG 支持配置 RS 节点信息，以及 SLOG 和 CLOG 文件支持 4K 字节对齐读写。

### V3.1.2 BP2

[**点击查看 V3.1.2 BP2 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.1.2)

**版本信息：**

* 发布时间：2021 年 8月 13日

* 版本号：V3.1.2 BP2

* RPM 版本号：oceanbase-3.1.2-20210813154332

**版本概览：**

优化完善 V2.2.77 版本升级 V3.1.2 功能；提升备份恢复功能稳定性，跨版本备份恢复功能完善。

### V3.1.2 BP1

[**点击查看 V3.1.2 BP1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.1.2)

**版本信息：**

* 发布时间：2021 年 7月 1日

* 版本号：V3.1.2 BP1

* RPM 版本号：oceanbase-3.1.2-20210701144352

**版本概览：**

修复带备库升级 `checker` 脚本执行报错的问题；修复含 `NULL` 的表达式类型推导报错的问题。

### V3.1.2

[**点击查看 V3.1.2 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.1.2)

**版本信息：**

* 发布时间：2021 年 6月 18日

* 版本号：V3.1.2

* RPM 版本号：oceanbase-3.1.2-20210618150922

**版本概览：**

OceanBase 数据库 V3.1.2 版本为 V3.1.x 系列稳定版本，支撑客户项目应用上线。

## V3.1.1

[**点击查看 V3.1.1 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V3.1.1)

**版本信息：**

* 发布时间：2021 年 5月 18日

* 版本号：V3.1.1

* RPM 版本号：oceanbase-3.1.1-20210508100750

**版本概览：**

OceanBase 数据库 V3.1.1 版本为测试版本，供内外部项目进行 POC 验证测试。

## V2.2.77

### V2.2.77 BP19

[**点击查看 V2.2.77 BP19 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V2.2.7)

**版本信息：**

* 发布时间：2024 年 6 月 26 日
* 版本号：V2.2.77 BP19
* RPM 版本号：oceanbase-2.2.77-119000122024060513

**版本概览：**

* PL Debug 功能不建议在生产环境使用。该版本增加 PL Debug 开关 `_enable_dbms_debug_package`，默认关闭。开发测试环境需要使用该功能时，请将该配置项设置为 `True。`

* 修复物理归档备份卡住的问题。
* 修复 `_all_virtual_partition_audit` 虚拟表数据为空的问题。
* 修复 CommonArray 模块内存泄露的问题。
* 修复 SqlExecutor 模块内存泄露的问题。
* 修复 CHAR 列和 VARCHAR 比较情况下 Query Range 抽取不正确问题。
* 修复下压 Order By 打标不合理导致查询结果不正确的问题。
* 修复 `convert_skip_null_check` 导致 Core 的问题。
* 修复 `sys` 租户队列积压导致集群不可用问题。

### V2.2.77 BP17

[**点击查看 V2.2.77 BP17 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V2.2.7)

**版本信息：**

* 发布时间：2023 年 5 月 19 日
* 版本号：V2.2.77 BP17
* RPM 版本号：oceanbase-2.2.77-117000112023051914

**版本概览：**

在安全方面做了强化，增加配置项 `_enable_reserved_user_dcl_restriction` 控制是否限制普通用户对内置用户进行修改。

### V2.2.77 BP16

[**点击查看 V2.2.77 BP16 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V2.2.7)

**版本信息：**

* 发布时间：2023 年 2 月 14 日
* 版本号：V2.2.77 BP16
* RPM 版本号：oceanbase-2.2.77-116000022023021412

**版本概览：**

新增支持 OBKV 热点行更新的 GROUP COMMIT 能力。在热点行高并发更新场景下，服务端对热点行的更新做聚合，避免每一个操作都去申请行锁、释放行锁，优化行锁竞争等待时间，提升热点行更新速度。

### V2.2.77 BP15

[**点击查看 V2.2.77 BP15 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V2.2.7)

**版本信息：**

* 发布时间：2023 年 1 月 10 日
* 版本号：V2.2.77 BP15
* RPM 版本号：oceanbase-2.2.77-115000012023010607

**版本概览：**

MySQL 模式下支持 `FROM_BASE64()` 和 `TO_BASE64()` 函数。

### V2.2.77 BP14

[**点击查看 V2.2.77 BP14 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V2.2.7)

**版本信息：**

* 发布时间：2022 年 12 月 04 日
* 版本号：V2.2.77 BP14
* RPM 版本号：oceanbase-2.2.77-114000072022120410

**版本概览：**

备份恢复操作支持动态设置 AK/SK，用户可在备份中更改对象存储的访问凭证，同时提供了操作建议以保证备份的顺利进行。此外，数据库优化了热点行观测，在 `v$sysstat` 视图中新增了三个统计字段。管理工具 `ob_admin` 增加对华为云对象存储 OBS 的适配。


### V2.2.77 BP13

[**点击查看 V2.2.77 BP13 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V2.2.7)

**版本信息：**

* 发布时间：2022 年 8月 26日

* 版本号：V2.2.77 BP13

* RPM 版本号：oceanbase-2.2.77-113000052022082622

**版本概览：**

支持在限定场景下的添加分区能力。管理工具 `ob_admin` 新增了修改指定 OBServer 节点的集群级配置项功能，但不支持租户级配置项的修改。此外，还支持对 COS(Cloud Object Storage) 上的备份文件进行标记，以便用户更好地管理备份文件。

### V2.2.77 BP12

[**点击查看 V2.2.77 BP12 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V2.2.7)

**版本信息：**

* 发布时间：2022 年 6月 14日

* 版本号：V2.2.77 BP12

* RPM 版本号：oceanbase-2.2.77-20220612090508

**版本概览：**

修复了一系列问题，包括解决 Oracle 模式下存储过程创建导致的挂起问题、MySQL 模式下 Limit 算子类型转换报错、缓存路由不准导致 SQL 执行耗时偏高、DBMS_LOB.SUBSTR 执行报错、`v$sql_audit` 字段显示异常、SYS 租户资源规格未恢复默认、存储过程入参转化报错、JOIN 优化 CPU 资源消耗、空值处理错误问题等。同时还解决了 OBServer 在使用全局索引、停止集群与数据写入并发操作和系统包操作中可能出现的 crash 问题以及创建索引并发异常报错。

### V2.2.77 BP11

[**点击查看 V2.2.77 BP11 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V2.2.7)

**版本信息：**

* 发布时间：2022 年 5 月 2 日

* 版本号：V2.2.77 BP11

* RPM 版本号：oceanbase-2.2.77-20220502140811

**版本概览：**

透明加密（TDE）功能新增支持阿里云 KMS，并优化了 OBKV-Table 的流式非阻塞查询性能，同时使 in(values) 查询的 values 规格上限与 MySQL 兼容。LIBOBLOG 库增加了租户过滤功能，可配置以同步特定租户的日志数据，并且支持返回日志同步的位点信息。

### V2.2.77 BP10

[**点击查看 V2.2.77 BP10 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V2.2.7)

**版本信息：**

* 发布时间：2022 年 1 月 17 日

* 版本号：V2.2.77 BP10

* RPM 版本号：oceanbase-2.2.77-20220116224111

**版本概览：**

支持了 OSS 对象存储的 TAG 清理模式，并在 Oracle 模式下增加了对 USERENV('SID') 和 USERENV('LANGUAGE') 的支持。新增了备份空间达到极限时删除过时备份的功能。同时，优化了 QUEUING 表的稳定性和性能，删除了 CLOG 传输中不支持的流式压缩算法，并且支持了磁盘 `DIRECT_IO` 的 4K 写入对齐。

### V2.2.77 BP9

[**点击查看 V2.2.77 BP9 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V2.2.7)

**版本信息：**

* 发布时间：2021 年 11 月 19 日

* 版本号：V2.2.77 BP9

* RPM 版本号：oceanbase-2.2.77-20211119120733

**版本概览：**

修复了一系列问题，涉及 PX 执行、ODC 资源释放、SQL PARSE 内存申请、临时表约束管理、MERGE INTO 操作、分区排序、REPLACE INTO 操作、`gv$sql_audit` 视图数据准确性、NFS 备份协议、记录密码明文、slog 空间不足导致的启动问题、SHOW TABLE STATUS 显示、时区设置、权限管理、IP 解析、列名重复、BIT 类型兼容性、启动时配置文件读取以及备份到 OSS 存储和类型转换造成的 crash 问题。

### V2.2.77 BP8

[**点击查看 V2.2.77 BP8 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V2.2.7)

**版本信息：**

* 发布时间：2021 年 10 月 15 日

* 版本号：V2.2.77 BP8

* RPM 版本号：oceanbase-2.2.77-20211117180427

**版本概览：**

增加内部表 `__ALL_VIRTUAL_PROCESSLIST`，展示事务超时状态。


### V2.2.77 BP7

[**点击查看 V2.2.77 BP7 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V2.2.7)

**版本信息：**

* 发布时间：2021 年 9 月 18 日

* 版本号：V2.2.77 BP7

* RPM 版本号：oceanbase-2.2.77-20210923214552

**版本概览：**

进行了性能和功能优化，包括分区表 SQL PLAN 的淘汰机制，`ob_admin` 支持了 SSL 通信加密，Oracle 模式增加了 `LOAD DATA REPLACE INTO` 功能。此外，增加了用户登录和登出信息的统计，MySQL 模式支持了 ORDER BY 表达式，并优化了分区自动均衡在 STOP SERVER/ZONE 场景下的应用以及优化了路由临时表的机制。

### V2.2.77 BP6

[**点击查看 V2.2.77 BP6 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V2.2.7)

**版本信息：**


* 发布时间：2021 年 8 月 25 日

* 版本号：V2.2.77 BP6

* RPM 版本号：oceanbase-2.2.77-20210825181323

**版本概览：**

针对备份恢复、会话管理、CLOG 压缩、安全审计、查询执行等方面进行了多项修复，解决了备份备份标记问题、恢复租户操作问题、PX 场景下租户默认超时问题、CLOG 功能可能引发的观察者进程启动失败、高并发下安全审计死锁、Oracle 模式特定查询导致的 OBServer 崩溃以及分布式执行计划内存申请引发的 OBServer 崩溃问题。

### V2.2.77 BP5

[**点击查看 V2.2.77 BP5 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V2.2.7)

**版本信息：**

* 发布时间：2021 年 7 月 31 日

* 版本号：V2.2.77 BP5

* RPM 版本号：oceanbase-2.2.77-20210730214129

**版本概览：**

MySQL 模式的 SQL_MODE 支持 `NO_ZERO_IN_DATE`。


### V2.2.77 BP4

[**点击查看 V2.2.77 BP4 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V2.2.7)

**版本信息：**

* 发布时间：2021 年 7 月 13 日

* 版本号：V2.2.77 BP4

* RPM 版本号：oceanbase-2.2.77-20210712224820

**版本概览：**

MySQL 模式支持 `MAKETIME` 和 `UTC_DATE/UTC_TIME/GET_FORMAT` 函数。

### V2.2.77 BP3

[**点击查看 V4.2.1 BP3 Hotfix2 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.2.1)

**版本信息：**

* 发布时间：2021 年 6 月 18 日

* 版本号：V2.2.77 BP3

* RPM 版本号：oceanbase-2.2.77-20210618130343

**版本概览：**

MySQL 模式增加对数学和日期函数的支持，包括 `LOG/LN/PI/RADIANS/ATAN/ASIN/ACOS/COT`、`MONTHNAME` 、`LAST_DAY`、`QUARTER` 以及 `BIT_LENGTH` 函数。


### V2.2.77 BP2

[**点击查看 V4.2.1 BP3 Hotfix2 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.2.1)

**版本信息：**

* 发布时间：2021 年 6 月 4 日

* 版本号：V2.2.77 BP2

* RPM 版本号：oceanbase-2.2.77-20210604113922

**版本概览：**

在 MySQL 模式中增加了 LIKE 语句对特殊字符引号的转义支持，并且引入了租户级配置项  `ob_proxy_readonly_transaction_routing_policy`，在开启后，显式的事务不会强制路由，保证事务内部的所有 SQL 都在同一个 OBServer 节点处理。同时，提升了租户的 `sql_audit` 内存存储能力和优化了异步 IO 的超时等待机制。

### V2.2.77 BP1

[**点击查看 V4.2.1 BP3 Hotfix2 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.2.1)

**版本信息：**

* 发布时间：2021 年 5 月 27 日

* 版本号：V2.2.77 BP1

* RPM 版本号：oceanbase-2.2.77-20210526202046

**版本概览：**

支持租户级配置项 `_tenant_max_trx_size`，设置事务中分区使用内存的最大限制。

### V2.2.77

[**点击查看 V4.2.1 BP3 Hotfix2 Release Notes 的完整内容**](https://www.oceanbase.com/product/oceanbase-database-rn/releaseNote#V4.2.1)

**版本信息：**

* 发布时间：2021 年 5 月 8 日

* 版本号：V2.2.77

* RPM 版本号：oceanbase-2.2.77-20210508211731

**版本概览：**

OceanBase 数据库 V2.2.77 版本为 V2.2.x 系列稳定 GA 版本，在产品高可用性、兼容性和安全性进行改进提升，支撑客户项目批量上线。
