|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# 部署 FAQ

## 安装 OceanBase 服务器对系统有什么要求吗？

服务器应满足的最低配置要求如下表所示。

| **服务器类型** | **数量** | **功能最低配置** | **性能最低配置** |
| --- | --- | --- | --- |
| OCP 管控服务器 | 1台 | 16C，32G，1.5TB 存储 | 32C，128G，1.5TB SSD 存储，万兆网卡 |
| OceanBase 数据库计算服务器 | 3台 | 4C，16G，<main id="notice" type='explain'><h4>说明</h4><p>磁盘中日志盘需要内存的 4 倍以上，数据盘要满足目标数据量的存储。</p></main> | 32C，256G，<main id="notice" type='explain'><h4>说明</h4><p>磁盘中日志盘需要内存的 4 倍以上，数据盘要满足目标数据量的存储。</p></main>，万兆网卡 |

如果需要 OCP 管控服务提供高可用能力，则需要 3 台管控服务器，并提供负载均衡软件或者硬件，例如 F5、阿里云 SLB，或者使用 OceanBase 数据库提供的 ob_dns 软负载组件，进行三节点部署。

支持在下表所示的 Linux 操作系统中安装 OceanBase 数据库。

|       Linux 操作系统      |    版本   |             服务器架构         |
|-------------------------|-----------|-------------------------------|
| Alibaba Cloud Linux     | 2   | x86_64，ARM_64 |
| 龙蜥 AnolisOS           | 8.6 及以上   | x86_64（包括海光），ARM_64（鲲鹏、飞腾）|
| KylinOS                 | V10         | x86_64（包括海光），ARM_64（鲲鹏、飞腾） |
| 统信 UOS                | V20         | x86_64（包括海光），ARM_64（鲲鹏、飞腾）|
| 中科方德 NFSChina        | 4.0 及以上  | x86_64（包括海光），ARM_64（鲲鹏、飞腾）|
| 浪潮 Inspur kos          | 5.8        | x86_64（包括海光），ARM_64（鲲鹏、飞腾）|
| CentOS / Red Hat Enterprise Linux | 7.x、8.x | x86_64（包括海光），ARM_64（鲲鹏、飞腾）|
| SUSE Enterprise Linux     | 12SP3 及以上 | x86_64（包括海光）|
| Debian                    | 8.3 及以上   | x86_64（包括海光）|
| openEuler                | 20.03 LTS SP1/SP2 和 22.10 LTS | x86_64（包括海光），ARM_64（鲲鹏、飞腾）|
| 凝思 LinxOS | V6.0.99、V6.0.100 | x86_64（包括海光），ARM_64（鲲鹏、飞腾） |

<main id="notice" type='explain'>
  <h4>说明</h4>
  <p>操作系统需要配置网络和软件管理器（ yum 或 zypper 源）。</p>
</main>

## 在生产环境中，OceanBase 数据库会如何部署？

部署方案如下：

| **方案名称** | **方案特点** | **基础设施要求** | **适用场景** |
| --- | --- | --- | --- |
| 单机房 3 副本 | RPO=0，RTO 低，故障自动切换。 可抵御个别硬件故障，无法抵御机房级灾难或者城市级灾难。 | 单机房 | 对机房级容灾能力和城市级容灾能力没有要求。 |
|  同城 3 机房 3 副本 | RPO=0，RTO 低，故障自动切换。 可抵御个别硬件故障和机房级灾难，无法抵御城市级灾难。 | 同城3机房。 同城机房间网络时延低。 | 需要机房级容灾能力，但对城市级容灾能力没有要求。 |
| 3 地 5 机房 5 副本 | RPO=0，RTO 低，故障自动切换。 可抵御个别硬件故障、机房级灾难和城市级灾难。 | 3 地 5 机房。 其中 2 个城市距离较近，网络时延低。 | 需要机房级容灾能力和城市级容灾能力。 |
| 同城 2 机房，集群间数据复制 | RPO>0，RTO 高，人工决策切换。 可抵御个别硬件故障、机房级灾难，无法抵御城市级灾难。 | 同城 2 机房。 | 有 2 个同城机房，同时有机房级容灾的要求。 |
| 2 地 3 机房，5 副本+集群间数据复制 | 机房级故障：RPO=0，RTO 低，故障自动切换。 城市级故障：RPO>0, RTO 高，人工决策切换。 可抵御个别硬件故障、机房级灾难和城市级灾难。 | 2 地 3 机房。 | 有 2 个城市 3 个机房，同时有机房级容灾和城市级容灾的要求。 |

## 什么是 LSE？

LSE 是 ARMv8.1 中引入的特性，即 "Large System Extensions"（大型系统扩展）。LSE 提供了一组原子操作，用于支持多处理器环境下的同步和互斥访问。这些原子操作包括 Load-Exclusive（LDE）、Store-Exclusive（STE）和条件比较交换指令（Conditional Compare Exchange，CCXE）。LSE 还提供了一些新的指令和内存屏障，用于维护数据一致性和顺序性。

使用 LSE 指令，可以实现对共享内存的高效访问，并提供更细粒度的锁机制和更低的开销。相比于传统的同步指令，LSE 指令可以减少锁竞争、提高并发性能，并提供更好的可伸缩性。

### OCP 什么版本开始适配带 nolse 的包？

OCP 从 V4.3.0 版本开始适配具有 nolse 标记的 OceanBase RPM 软件包，主要解决 ARM 架构下 Large System Extensions (LSE) 扩展指令功能识别的问题。

### OBD 部署时注意事项

可以将带 nolse 和不带 nolse 的 OceanBase 数据库 RPM 包同时上传，OBD 会自适应的根据系统支持的情况进行部署。或者按需上传支持的包进行安装。

### OCP 部署时注意事项

虽然可以同时将带 nolse 和不带 nolse 的包上传到 OCP，但是不支持自适应的安装，在部署集群选择版本的时候需要按需选择是否支持 LSE 的包。
