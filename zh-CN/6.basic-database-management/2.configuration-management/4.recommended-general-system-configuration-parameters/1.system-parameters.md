系统参数
=========================

本节主要介绍 OceanBase 数据库使用过程中常用的系统配置参数。

集群级参数
--------------------------

|               配置项名               |  默认值  |                                                                                                                                                              取值范围                                                                                                                                                              |                                                                                              描述                                                                                              |
|----------------------------------|-------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| memory_limit                     | 0     | \[0M, +∞)                                                                                                                                                                                                                                                                                                                      | 用于配置 OBServer 最大可使用的总内存大小。 当前该值无上限，如果设置的内存的最大上限超过了实际的物理内存总和，则会导致系统中其他按总内存计算的值偏大。                                                                                             |
| system_memory                    | 30G   | \[0M, +∞)                                                                                                                                                                                                                                                                                                                      | 用于设置系统预留的内存容量。                                                                                                                                                                               |
| rootservice_memory_limit         | 2G    | \[2G, +∞)                                                                                                                                                                                                                                                                                                                      | 用于设置 RootService 的最大内存容量限制。                                                                                                                                                                  |
| cpu_quota_concurrency            | 4     | \[1, 10\]                                                                                                                                                                                                                                                                                                                      | 用于设置租户的每个 CPU 配额所允许的最大并发数。                                                                                                                                                                   |
| enable_merge_by_turn             | True  | *True* False                                                                                                                                                                                                                            | 用于设置是否开启轮转合并策略。                                                                                                                                                                              |
| freeze_trigger_percentage        | 70    | \[1, 99\]                                                                                                                                                                                                                                                                                                                      | 用于设置触发全局冻结的租户使用内存阈值。                                                                                                                                                                         |
| major_compact_trigger            | 5     | \[0, 65535\]                                                                                                                                                                                                                                                                                                                   | 用于设置多少次小合并触发一次全局合并。                                                                                                                                                                          |
| memstore_limit_percentage        | 50    | \[1, 99\]                                                                                                                                                                                                                                                                                                                      | 用于设置租户使用 MEMStore 的内存占其总可用内存的百分比。                                                                                                                                                            |
| minor_freeze_times               | 5     | \[0, 65535\]                                                                                                                                                                                                                                                                                                                   | 用于设置多少次小合并触发一次全局合并。值为 0 时，表示关闭小合并。                                                                                                                                                           |
| trace_log_slow_query_watermark   | 100ms | \[1ms, +∞)                                                                                                                                                                                                                                                                                                                     | 用于设置查询的执行时间阈值，如果查询的执行时间超过该阈值，则被认为是慢查询，慢查询的追踪日志会被打印到系统日志中。                                                                                                                                    |
| enable_syslog_recycle            | False | *True* False                                                                                                                                                                                                                            | 用于设置是否开启回收系统日志的功能。                                                                                                                                                                           |
| max_syslog_file_count            | 0     | \[0, +∞)                                                                                                                                                                                                                                                                                                                       | 用于设置在回收日志文件之前可以容纳的日志文件数量。                                                                                                                                                                    |
| enable_sql_audit                 | True  | *True* False                                                                                                                                                                                                                            | 用于设置是否开启 SQL 审计功能。                                                                                                                                                                           |
| clog_disk_usage_limit_percentage | 95    | \[80, 100\]                                                                                                                                                                                                                                                                                                                    | 用于设置事务日志的磁盘 I/O 最大使用百分比。                                                                                                                                                                     |
| datafile_disk_percentage         | 90    | \[5,99\]                                                                                                                                                                                                                                                                                                                       | 表示占用 `data_dir` 所在磁盘（ `data_dir` 所在的磁盘将被 OceanBase 数据库系统初始化用于存储数据）总空间的百分比。                                                                                                                   |
| merge_thread_count               | 0     | \[0,256\]                                                                                                                                                                                                                                                                                                                      | 用于设置每日合并工作的线程数。                                                                                                                                                                              |
| enable_rebalance                 | True  | *True* False                                                                                                                                                                                                                            | 用于设置是否开启自动负载均衡的功能。                                                                                                                                                                           |
| resource_hard_limit              | 100   | (0, 10000\]                                                                                                                                                                                                                                                                                                                    | 用于分配 Unit。                                                                                                                                                                                   |
| resource_soft_limit              | 50    | (0, 10000\]                                                                                                                                                                                                                                                                                                                    | 用于设置是否开启 Unit 均衡： *当取值小于 `100` 时， 表示 Unit 均衡开关打开。* 当取值大于等于 `100` 时，表示 Unit 均衡开关关闭。    |
| auto_leader_switch_interval      | 30s   | \[1s, +∞)                                                                                                                                                                                                                                                                                                                      | 用于设置自动切主后台线程工作间隔时间。                                                                                                                                                                          |
| enable_auto_leader_switch        | True  | *True* False                                                                                                                                                                                                                            | 用于设置是否开启自动切主。                                                                                                                                                                                |
| stack_size                       | 1M    | \[512K, 20M\]                                                                                                                                                                                                                                                                                                                  | 用于设置程序函数调用栈的大小。                                                                                                                                                                              |
| syslog_level                     | INFO  | *DEBUG* TRACE   *INFO* WARN   *USER_ERR* ERROR   * PERF    | 用于设置系统日志的打印级别。                                                                                                                                                                               |

租户级参数
--------------------------

|                  配置项                  | 默认值  |                                                                                                                     取值范围                                                                                                                      |                         描述                          |
|---------------------------------------|------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|
| writing_throttling_trigger_percentage | 100  | \[0, 100\]                                                                                                                                                                                                                                    | 用于设置写入速度的阈值。当值为 `100` 时，表示关闭写入限速机制。                 |
| audit_trail                           | None | *NONE* OS   *DB* DB，EXTENDED   * DB_EXTENDED    | 用于设置是否启用数据库审核。  |
