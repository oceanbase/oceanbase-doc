设置和查看租户白名单
===============================

您可以通过租户白名单功能来设置允许哪些客户端访问当前租户。

背景信息
-------------------------

租户白名单指的是该租户允许登录的客户端列表。您可以根据业务需要自定义租户的白名单，系统支持以下多种租户白名单格式：

* IP 地址的形式：示例，`10.10.10.10,10.10.10.11`

* 子网/掩码的形式：示例，`10.10.10.0/24`

* 模糊匹配的形式：示例，`10.10.10.%` 或者 `10.10.10._`

* 多种格式混合的形式：示例，`10.10.10.10,10.10.10.11,10.10.10.%,10.10.10._,10.10.10.0/24`

通过 SQL 语句查看和设置租户白名单
----------------------------------------

系统变量 `ob_tcp_invited_nodes` 用于设置租户的 IP 白名单，是租户全局的白名单限制参数。默认值为 `127.0.0.1,::1`，表示仅允许本机的 IP 连接该租户。

通过 SQL 语句查看和设置租户白名单的方法如下：

1. 租户管理员登录数据库。

2. 执行以下语句，查看租户的白名单。

   ```sql
   obclient> SHOW VARIABLES LIKE 'ob_tcp_invited_nodes';
   +----------------------+-------+
   | Variable_name        | Value |
   +----------------------+-------+
   | ob_tcp_invited_nodes | %     |
   +----------------------+-------+
   ```

   其中，值为 `%` 表示允许任何客户端 IP 连接该租户。

3. 如果需要更改白名单设置，可以执行以下语句，重新设置租户的白名单。

   示例如下：

   ```sql
   obclient> SET GLOBAL ob_tcp_invited_nodes='%';
   
   obclient> SET GLOBAL ob_tcp_invited_nodes='10.10.10.%';
   ```

通过 OCP 查看和设置租户白名单
--------------------------------------

您也可以通过 OCP 来查看各租户的白名单设置情况。

1. 登录 OCP。

2. 在左侧导航栏中单击 **租户** 。

3. 在 **租户列表** 中找到指定租户，并单击租户名称。

4. 在 **总览** 页面的 **白名单** 区域，查看当前租户的白名单设置。

   ![查看白名单](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8428123261/p280919.png)

5. 如果需要更改白名单设置，则在 **白名单** 区域的右侧，单击 **修改** 。

6. 在弹出的对话框中，在 **IP 地址白名单** 单选框中，选择 **自定义** ，并根据界面上的配置说明重新设置白名单。

   ![修改白名单](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0099559361/p358446.png)

7. 完成后，单击 **确定** 。
