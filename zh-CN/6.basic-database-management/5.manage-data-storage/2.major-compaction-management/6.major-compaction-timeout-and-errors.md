合并超时与报错
============================

本节主要介绍了合并超时与合并报错的判断方法及处理方式。

合并超时
-------------------------

合并的超时时间可以通过配置项 `zone_merge_timeout` 设置，默认为 3 小时。

合并超时后，合并的状态为 `TIMEOUT`，您可以通过 `__all_zone` 进行查看，查看合并状态的详细操作请参见 [查看合并过程](5.view-major-compaction-information/1.view-the-major-compaction-process.md)。

合并超时后，合并操作会继续进行，系统仅仅设置了超时的标识位。设置超时标志位的目的是合并的时间超过预计时间意味着合并会从凌晨开始持续到了工作日高峰时间段，也意味着合并之前的一天有过多更改的标志 ，例如，导入大量的数据。

合并超时后，不需要做额外的处理，合并继续进行，管理员可以通过 **OCP** 查看相关的合并进度，查看合并进度的详细操作请参见 [查看合并过程](5.view-major-compaction-information/1.view-the-major-compaction-process.md)。

管理员还可以查看表的压缩算法，了解最近一天表的数据变化量，如果有大量的数据变化并且不是常规的操作，可以等待合并完成。表压缩算法的详细介绍请参见 [合并管理概述](../2.major-compaction-management/1.overview-of-major-compaction-management.md)。

如果日常的更改量经常导致合并超时，并且您希望加快合并的速度，可以调整合并的参数，例如，调大合并的线程数量。更多合并相关的参数请参见 [修改合并配置](../2.major-compaction-management/7.modify-major-compaction-configurations.md)。

合并报错
-------------------------

如果合并过程中发生了无法处理的异常情况，合并的状态为 `ERROR` 。发生合并报错时，合并会停止。合并报错后需要管理员介入排查，解决报错问题后可以重新开始合并。

常见的合并报错问题通常是：磁盘满、IO 超时、磁盘 IO 错误和合并被取消等。
